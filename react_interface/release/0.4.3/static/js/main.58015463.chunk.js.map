{"version":3,"sources":["components/buttons.js","interactions.js","index.js","components/images/Arrowhead-01-128.png","components/images/Arrowhead-Down-01-128.png","serviceWorker.js","tutors/CTAT/CTAT_Tutor.js","tutors/Stylus/StylusTutor.js","tutors/Stylus/c_modules/bezier_fit/bezier_fit.js","tutors/Stylus/c_modules/bezier_fit/build/js_glue.js","App.js","training_handler.js","network_layer.js","components/skill_panel.js","components/panel.js"],"names":["_react","_interopRequireWildcard","__webpack_require__","_reactNativeWeb","deep_equal","_interopRequireDefault","require","query_text","default","createElement","Text","style","color","textShadowRadius","textShadowColor","Buttons","props","_classCallCheck2","this","_possibleConstructorReturn2","_getPrototypeOf2","call","_this","current","interactions_state","matches","x","Waiting_User_Feedback","console","log","send","action_str","callbacks","interactions_service","View","styles","container","button_wrapper1","prompt1","TouchableHighlight","next_button","underlayColor","onPress","next_button_text","startstate_button","startstate_button_text","button_wrapper2","prompt2","yes_no","yes_button","yes_button_text","no_button","no_button_text","submit_button","submit_button_text","debugmode","button_wrapper3","nools_button","app","changeInteractionMode","tutor_mode","nools_button_text","generateBehaviorProfile","display","bottom","flexDirection","height","fontSize","_defineProperty2","Component","StyleSheet","create","flex","textAlign","margin","flexWrap","marginTop","marginBottom","alignItems","flexShrink","justifyContent","padding","width","backgroundColor","borderRadius","position","prompt_text","_xstate","appendStartHistory","assign","start_state_history","context","event","state","tutor","get_state","history","push","stateRecalc","staged_SAI","reward","assignFoci","_extends2","foci_of_attention","get_current_foci","saiIsCorrectDone","sai_data","feedback_map","Object","keys","length","selection","isFreeAuthor","free_author","checkIsCorrect","data","noApplicableSkills","logError","error","_kill_this","network_layer","kill_this","toString","printFeedback","nl","type","action_type","index","skill_app","skill_applications","toUpperCase","inps","inputs","term_print","clearSkillPanel","setState","skill_panel_props","skill_set","Applicable Skills","fillSkillPanel","recalcFeedbackMap","skill","match","label","match_id","new_label","new_feedback_map","_objectSpread2","was_empty","now_empty","assignFeedbackMap","skill_panel","updateFeedbackMap","toggleFeedbackStyle","build_interactions_sm","sm","interactive","arguments","undefined","buttons","agent_id","tutor_sm","interactive_sm","non_interactive_sm","Machine","services","sendFeedback","sendFeedbackExplicit","applyNextExample","attemptStagedSAI","queryApprentice","checkApprentice","actions","assignResponse","response","assignStagedSAI","assignExample","assignAttempt","assignCorrect","assignIncorrect","clearFeedbackData","assignSkillApplications","responses","printEvent","done","training_service","enterSetStartStateMode","exitSetStartStateMode","enterFeedbackMode","exitFeedbackMode","enterFociMode","exitFociMode","enterTutoringMode","exitTutoringMode","displayCorrectness","applyStagedSAI","applySAI","proposeSAI","confirmProposedSAI","clearProposedSAI","generate_nools","guards","get_machine_actions","initial","states","Start","entry","on","","Querying_Apprentice","invoke","id","src","onDone","target","cond","onError","exit","Applying_Staged_SAI","Applying_Next_Example","Sending_Feedback","Done","Fail","Setting_Start_State","START_STATE_SET","Waiting_Demonstrate_Only","Waiting_Yes_No_Feedback","SKILL_PANEL_FEEDBACK_NONEMPTY","YES_PRESSED","NO_PRESSED","Waiting_Submit_Feedback","SKILL_PANEL_FEEDBACK_EMPTY","SUBMIT_SKILL_FEEDBACK","STAGE_SAI","TOGGLE_FEEDBACK","FEEBACK_MAP_UPDATE","DEMONSTRATE","GEN_NOOLS","Waiting_Select_Foci","FOCI_DONE","Waiting_User_Attempt","ATTEMPT","Checking_Against_Apprentice","_reactDom","serviceWorker","_CTAT_Tutor","_StylusTutor","_App","_relaxedJson","tutor_map","ctatttutor","CTAT_Tutor","ctat","stylustutor","StylusTutor","stylus","safeParse","json","parsed","JSON","parse","e","training_file","urlParams","URLSearchParams","window","location","search","substring","AL_URL","get","HOST_URL","origin","toLowerCase","use_foci","nools_dir","getWebProps","fetch","then","str","text","RJSON","training_json","training_file_props","set_params","obj","out","forEach","key","removeEmpty","replace","ReactDOM","render","ref","react_interface","tutorClass","document","getElementById","unregister","module","exports","p","config","navigator","publicUrl","URL","process","href","addEventListener","swUrl","concat","isLocalhost","contentType","headers","status","indexOf","ready","registration","reload","registerValidSW","catch","checkValidServiceWorker","Boolean","hostname","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","_reactNativeWebWebview","_classAutobind","queryString","path","$","checkTypes","element","types","ok","i","classList","contains","_assertThisInitialized2","where_colors","relative_pos_cache","color_class_map","EXAMPLE","CORRECT","INCORRECT","HIGHLIGHT","START_STATE","DEFAULT","ctat_webview","React","createRef","source","highlighted_elements","prevProps","prevState","iframe","init_callback","_this2","prob_obj","html","LOAD_SCREEN","Promise","resolve","reject","HTML_name","lastIndexOf","domain_name","HTML_PATH","isAbsolute","join","working_dir","BRD_name","free_authoring","qf_exists","qf","question_file","includes","logging_params","problem_name","dataset_level_name1","dataset_level_type1","SessionLog","Logging","log_service_url","user_guid","session_id","params","updateContext","stringify","graph","commLibrary","hasConfig","uri","onLoad","_triggerWhenInitialized","elm_type","attributes","elm","iframe_content","attr","setAttribute","getElementsByTagName","appendChild","_this3","frameRef","contentWindow","CTAT","CTATCommShell","commShell","ToolTutor","setTimeout","getGraph","getCommLibrary","CTATConfiguration","_inject_element","rel","flashVars","setParams","deliverymode","CTAT_CORRECT","Base","Tutorable","EventType","correct","CTAT_INCORRECT","incorrect","CTAT_ACTION","action","evt","sai","detail","sel","getSelection","getInput","colorElement","start_state_elements","remove","handle_user_set_state","removeEventListener","firstChild","value","lockElement","handleUserInput","contentEditable","getAction","unlockElement","handleUserExample","CTATSAI","_done_clicked_example","handleUserAttempt","_done_clicked_attempt","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","ele","indx","current_foci","highlightElement","splice","unhighlightElement","err","return","unhighlightAll","handle_foci_select","map","_this4","currentElement","handle_ctat_feedback","getTransactionID","_this5","applyHint","getDefaultSAI","sel_elm","incorrect_event","CustomEvent","component","bubbles","cancelable","dispatchEvent","sai_obj","processComponentAction","name","CTATShellTools","findComponent","setEnabled","firstElementChild","colorIndex","add","c","mapping","var_str","elem_str","alert","_i","_arr","_toConsumableArray2","getExampleTracer","getBestNextLink","proposed_SAI","clearElement","highlightSAI","stageSAI","comp","executeSAI","sendXML","_ref","_ref$encode_relative","encode_relative","_ref$strip_offsets","strip_offsets","_ref$use_offsets","use_offsets","_ref$use_class","use_class","_ref$use_id","use_id","_ref$append_ele","append_ele","state_array","toArray","state_json","each","idx","offsetParent","dataset","silexId","offsetLeft","offsetTop","offsetWidth","offsetHeight","options","temp","count","rel_objs","elm_list","entries","to_left","to_right","above","below","j","_elm_list$i","_slicedToArray2","a_n","a_obj","_elm_list$j","b_n","b_obj","dist","grab1st","compare2nd","y","rel_obj","sort","originWhitelist","_reactNativeSvg","_bezier_fit","pen_down","strokes","n_strokes","BezierFit","promise","fitCurve","groupStrokes","setMode","mode","mode_to_color","set_start_state","demonstrate","debug","L","new_strokes","stroke","locked","highlight","className","baseVal","parentNode","points_str","clientX","clientY","points","bounds","minY","maxY","minX","maxX","mouseDown","groups","elements","get_min","Math","min","apply","values","get_max","max","mouseUp","lp","pow","MIN_DIST","bezier_splines","mouseMove","getElementUnderPoint","elmUnderPointID","mouseDownElmID","strokeCandidates","minStroke","minDist","Number","MAX_VALUE","_i2","_strokeCandidates","d","last_ev","ev","ev_strokes","evaluate","getEvaluatable","check_button_callback","cursor","svg_content","strokeWidth","Polyline","fill","strokeOpacity","pen_color_map","Circle","cx","cy","r","splines","circles","curve_str","b","Path","elems","Rect","setStartState","cursor_map","TouchableWithoutFeedback","onMouseDown","penDown","onMouseUp","penUp","onMouseLeave","onMouseMove","penMove","absoluteFill","Defs","circle_buttons","undo_button","undoStroke","undo_button_text","check_button","check_button_text","TUTOR","foci","null","zIndex","shadowColor","shadowOffset","shadowOpacity","shadowRadius","right","_js_glue","max_stroke_length","Module","HEAPF64","HEAP32","input_ptr","_malloc","BYTES_PER_ELEMENT","output_ptr","ml_ptr","input_buffer","Float64Array","buffer","output_buffer","c_module","nPts","flat","set","n_curves","_c_FitCurve","_c_ML_EncodeCurves","it","nxt","round","len_ptr","len_buffer","Int32Array","lens","stroke_ptr","out_ptr","out_buffer","nGroups","_c_GroupStrokes","grp","_free","_scriptDir","c_BezierFit","moduleOverrides","hasOwnProperty","arguments_","thisProgram","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","Error","readBinary","scriptDirectory","self","currentScript","substr","importScripts","url","xhr","XMLHttpRequest","open","responseType","Uint8Array","bind","warn","getOwnPropertyDescriptor","defineProperty","configurable","abort","assert","warnOnce","shown","stackSave","setTempRet0","wasmBinary","wasmMemory","WebAssembly","wasmTable","Table","maximum","ABORT","condition","UTF8Decoder","TextDecoder","UTF8ArrayToString","u8Array","maxBytesToRead","endIdx","endPtr","subarray","decode","u0","u1","u2","String","fromCharCode","ch","UTF8ToString","ptr","HEAPU8","stringToUTF8Array","outU8Array","outIdx","maxBytesToWrite","startIdx","u","charCodeAt","lengthBytesUTF8","len","writeArrayToMemory","array","HEAP8","writeAsciiToMemory","dontAddNull","HEAPU32","STACK_MAX","DYNAMICTOP_PTR","STACK_BASE","DYNAMIC_BASE","buf","INITIAL_TOTAL_MEMORY","writeStackCookie","checkStackCookie","cookie1","cookie2","callRuntimeCallbacks","callback","shift","func","arg","prototype","Memory","byteLength","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","h16","h8","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATEXIT__","__ATPOSTRUN__","runtimeInitialized","runtimeExited","imul","fround","clz32","trunc","abs","cos","sin","tan","acos","asin","atan","atan2","exp","sqrt","ceil","floor","runDependencies","runDependencyWatcher","dependenciesFulfilled","runDependencyTracking","what","js","stack","jsStackTrace","stackTrace","RuntimeError","FS","init","createDataFile","createPreloadedFile","createLazyFile","mkdev","registerDevice","analyzePath","loadFilesFromDB","ErrnoError","dataURIPrefix","isDataURI","filename","startsWith","wasmBinaryFile","getBinary","___wasm_call_ctors","___exception_infos","___setErrNo","SYSCALLS","buffers","printChar","stream","curr","varargs","getStr","get64","low","high","getZero","_emscripten_get_now","_emscripten_memcpy_big","dest","num","ENV","_emscripten_get_environ","strings","env","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","_","__isLeapYear","year","__arraySum","sum","__MONTH_DAYS_LEAP","__MONTH_DAYS_REGULAR","__addDays","date","days","newDate","Date","getTime","leap","getFullYear","currentMonth","getMonth","daysInCurrentMonth","getDate","setDate","setMonth","setFullYear","_strftime","s","maxsize","format","tm","tm_zone","tm_sec","tm_min","tm_hour","tm_mday","tm_mon","tm_year","tm_wday","tm_yday","tm_isdst","tm_gmtoff","pattern","EXPANSION_RULES_1","%c","%D","%F","%h","%r","%R","%T","%x","%X","%Ec","%EC","%Ex","%EX","%Ey","%EY","%Od","%Oe","%OH","%OI","%Om","%OM","%OS","%Ou","%OU","%OV","%Ow","%OW","%Oy","rule","RegExp","WEEKDAYS","MONTHS","leadingSomething","digits","character","leadingNulls","compareByDay","date1","date2","sgn","compare","getFirstWeekStartDate","janFourth","getDay","getWeekBasedYear","thisDate","janFourthThisYear","janFourthNextYear","firstWeekStartThisYear","firstWeekStartNextYear","EXPANSION_RULES_2","%a","%A","%b","%B","%C","%d","%e","%g","%G","%H","%I","twelveHour","%j","%m","%M","%n","%p","%S","%t","%u","%U","janFirst","firstSunday","endDate","februaryFirstUntilEndMonth","%V","daysDifference","%w","%W","firstMonday","%y","%Y","%z","off","ahead","slice","%Z","%%","bytes","stringy","u8array","Array","numBytesWritten","intArrayFromString","performance","asmLibraryArg","__cxa_allocate_exception","size","__cxa_atexit","unshift","__cxa_throw","destructor","adjusted","refcount","caught","rethrown","__ZSt18uncaught_exceptionv","uncaught_exceptions","__handle_stack_overflow","__lock","__map_file","pathname","__syscall91","which","addr","info","mappings","getStream","fd","doMsync","flags","munmap","allocated","malloc","__emscripten_syscall_munmap","errno","__unlock","clock_gettime","clk_id","tp","now","emscripten_get_sbrk_ptr","emscripten_memcpy_big","emscripten_resize_heap","requestedSize","abortOnCannotGrowMemory","environ_get","__environ","environ_buf","bufSize","string","environ_sizes_get","penviron_count","penviron_buf_size","fd_close","fd_read","iov","iovcnt","pnum","getStreamFromFD","doReadv","fd_seek","offset_low","offset_high","whence","newOffset","fd_write","memory","$i","strftime_l","table","asm","wasi_snapshot_preview1","receiveInstance","instance","clearInterval","removeRunDependency","setInterval","dep","trueModule","receiveInstantiatedSource","output","instantiateArrayBuffer","receiver","credentials","binary","instantiate","reason","instantiateStreaming","instantiateAsync","createWasm","real____wasm_call_ctors","real__malloc","real__free","real__c_GroupStrokes","real__c_FitCurve","real__c_ML_EncodeCurves","real__setThrew","real___ZSt18uncaught_exceptionv","real____set_stack_limit","real_stackSave","real_stackAlloc","real_stackRestore","real___growWasmMemory","real_dynCall_iii","real_dynCall_ii","real_dynCall_iiii","real_dynCall_jiji","real_dynCall_iidiiii","real_dynCall_vii","real_dynCall_vi","real_dynCall_viijii","real_dynCall_viiii","real_dynCall_iiiii","real_dynCall_iiiiii","real_dynCall_iiiiiiiii","real_dynCall_iiiiiii","real_dynCall_iiiiij","real_dynCall_iiiiid","real_dynCall_iiiiijj","real_dynCall_iiiiiiii","real_dynCall_iiiiiijj","real_dynCall_viiiiii","real_dynCall_v","real_dynCall_viiiii","calledRun","allocSize","old","run","args","doRun","cb","postRun","preRun","runCaller","pop","_skill_panel","_buttons","_interactions","_training_handler","_network_layer","ALReactInterface","onInteractionTransition","NetworkLayer","default_props","buttons_props","tutor_props","training_description","agent_description","problem_description","standard_props","o1","o2","reduce","diff","shallow_diff","wd","tf","interactions_sm","training_machine","build_training_sm","interpret","onTransition","onTrainingTransition","start","subscribe","setTutorMode","setInteractive","setFreeAuthor","ground_truth_path","out_dir","f","t_context","_state","resp","split","in_list","line","to_json_list","resps","requests","lower_display","Tutor","controls","prompt","ctat_tutor","flexBasis","flexGrow","justifySelf","file_params","agent_params","Loading_Training_File","Serving_Training_Sets","Serving_Agents","Creating_Agent","Handling_Prior_Knowledge","Serving_Problems","Waiting_Problem_Load","Training","PROBLEM_DONE","CHANGE_INTERACTION_MODE","All_Done","load_training_file","serve_next_training_set","serve_next_agent","create_agent","createAgent","serve_next_problem","load_problem","handle_prior_knowledge","start_training_interaction","assignAgentId","allDone","assignInteractionSM","iteratorEmpty","CTATGuid","s4","random","guid","training_iterator","agent_iterator","agent_obj","problem_set","prior_knowledge","other_data","request_history","agent_name","agent_type","other_agent_data","agent_start_time","problem_iterator","_next_prob_obj","fp_clone","_next_prob_obj2","_next_prob_obj3","_next_prob_obj4","_next_prob_obj5","EXAMPLES_ONLY","loadProblem","pass_along_context","withContext","ignoreKeys","wait","_callee3","ms","_regenerator","wrap","_context3","prev","abrupt","stop","fetch_retry","_asyncToGenerator2","mark","_callee","n","t","_args","_context","sent","t0","_x2","_x3","JSON_HEADERS","Accept","Content-Type","project_id","method","body","res","d_list","rhs_id","sendTrainingData","add_skill_info","message","out_data","problems","skills","dir","elapse","start_data","elapse_minutes","toFixed","_ref2","_callee2","whatever","item","completeness_data","_context2","kwargs","finish","_x4","_panel","colorItems","items","colors","splt","arr","sep","a","skill_text_by_action","ButtonPressed","UpdateTextField","match_text_by_action","acc","kv","innerHTML","SkillPanel","s_skill_set","structure_skills","select","starting_selection","selected_skill","selected_match","handleClickSkillItem","handleToggleFeedbackButton","initial_select","first_key","id_count","_loop","title","fnc","rest","_rest","selectSkill","select_callback","_rest2","cm","s_keys","skillbox_styles","content","liststyles","skill_list","ScrollView","header","sectionHeader","skill_eq","skill_elem","daisyChain","mIndex","match_eq","match_container","feedback_button","correct_selected","incorrect_selected","filter","skill_info","showsVerticalScrollIndicator","collapsedHeight","how","where","when","borderWidth","borderColor","paddingTop","paddingLeft","paddingRight","paddingBottom","fontWeight","borderBottomWidth","textIndent","defaultProps","Panel","icons","up","down","expanded","expandable","animation","Animated","Value","maxHeight","nativeEvent","layout","minHeight","expandedHeight","initialValue","finalValue","setValue","timing","toValue","duration","icon","onLayout","_setMinHeight","toggle","titleContainer","Image","buttonImage","_setMaxHeight","children","overflow","button"],"mappings":"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","file":"static/js/main.58015463.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { TouchableHighlight,ScrollView,View, Text, StyleSheet } from \"react-native\";\nimport Panel from './panel.js'\nvar deep_equal = require('fast-deep-equal');\n\n\n// import { useMachine } from '@xstate/react';\n\n\nvar text_by_mode = {\"choose_foci\": \"Select any interface elements that were used to compute this result.\",\n                    \"set_start\": \"Set the start state.\",\n                    \"press_next\": \"Press next to continue.\",\n                    \"demonstrate\" : \"Demonstrate the next step.\"\n                    }\n\n// function gen_query_text(){\n//   let h = <Text style={{\"color\":\"darkorchid\",'textShadowRadius':3, 'textShadowColor': \"darkorchid\"}}>{\"highlighted\"}</Text>\n//   return [\"Or specify if the \", h ,\" input is correct for the next step.\"]\n// }\nvar h = <Text style={{\"color\":\"darkorchid\",'textShadowRadius':3, 'textShadowColor': \"darkorchid\"}}>{\"highlighted\"}</Text>\nvar query_text = [\"Or specify if the \", h ,\" input is correct for the next step.\"]\n\n\nclass Buttons extends Component{\n  constructor(props){\n        super(props);\n        \n        // props.mode = \"feedback\"\n        // props.yes_no = false\n        // props.current\n  }\n\n  // componentDidMount() {\n  //   this.service.start();\n  // }\n\n  // componentWillUnmount() {\n  //   this.service.stop();\n  // }\n\n\n\trender(){ \n    // const current = this.props.interactions_state || {\"value\" : \"\"};\n    // const current = this.props.interactions_state || {\"value\" : \"\"};\n    // var service = this.props.interactions_service\n    var current = this.props.interactions_state\n    // console.log(\"CURRENT_MCGIGGER\",this.props.interactions_state)\n    const matches = (x) => current && current.matches ? current.matches(x) : deep_equal(x , {\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"});\n    console.log(\"props\",this.props)\n    // const matches = (x) => current.matches(x)\n    const send  = (action_str) => {\n      console.log(action_str)\n      console.log(this.props.callbacks)\n      if(this.props.callbacks && action_str in this.props.callbacks){\n        this.props.callbacks[action_str]();\n      }\n      this.props.interactions_service.send(action_str);\n    }\n\n\t\treturn (\n          <View style={styles.container}>\n            <View style={styles.button_wrapper1}>\n              <Text style={styles.prompt1}> \n              {matches(\"Setting_Start_State\") &&\n               \"Set the start state.\"}\n              {(matches(\"Waiting_User_Feedback\")  || matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"})) &&\n               \"Demonstrate the next step.\"}\n              {matches(\"Explantions_Displayed\") &&\n               \"Press next to continue. Or demonstrate the next step.\"}\n              {matches(\"Waiting_Select_Foci\") &&\n               \"Select any interface elements that were used to compute this result.\"}\n              {matches(\"Waiting_User_Attempt\") &&\n               \"TUTOR MODE\"}\n              \n              </Text>\n\n              {matches(\"Waiting_Select_Foci\") &&\n              <TouchableHighlight style={styles.next_button} underlayColor=\"#CCCCCC\"\n                                onPress={() => send('FOCI_DONE')}>\n               <Text style={styles.next_button_text}>{\"Next\"}</Text>\n              </TouchableHighlight>\n              } \n\n              {matches(\"Explantions_Displayed\") &&\n              <TouchableHighlight style={styles.next_button} underlayColor=\"#CCCCCC\"\n                                onPress={() => send('NEXT_PRESSED')}>\n               <Text style={styles.next_button_text}>{\"Next\"}</Text>\n              </TouchableHighlight>\n              }\n\n              {matches(\"Setting_Start_State\") &&\n              <TouchableHighlight style={styles.startstate_button} underlayColor=\"#CCCCCC\"\n                                onPress={ ()=> send(\"START_STATE_SET\")}>\n               <Text style={styles.startstate_button_text}>{\"Start State Done\"}</Text>\n              </TouchableHighlight>\n              }\n            </View>\n\n            \n            {(matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"})\n             || matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"})) &&\n\n            <View style={styles.button_wrapper2}>\n              <Text style={styles.prompt2}> \n              {matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"}) && query_text}\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"}) &&\n                \"Or press submit to send the feedback from the skill panel.\"}\n              </Text>\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"}) &&\n              <View style={styles.yes_no}>\n                <TouchableHighlight style={styles.yes_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('YES_PRESSED')}>\n                 <Text style={styles.yes_button_text}>{\"YES\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={styles.no_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('NO_PRESSED')}>\n                 <Text style={styles.no_button_text}>{\"NO\"}</Text>\n                </TouchableHighlight>\n              </View>\n              }\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"}) &&\n                <TouchableHighlight style={styles.submit_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('SUBMIT_SKILL_FEEDBACK')}>\n                 <Text style={styles.submit_button_text}>{\"Submit\"}</Text>\n                </TouchableHighlight>\n              }\n            </View>\n            }\n            \n            {!this.props.debugmode && \n            \n            <View style={styles.button_wrapper3}>\n              {/*<TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send(\"GEN_NOOLS\")}>\n               <Text style={styles.nools_button_text}>{\"Generate Nools\"}</Text>\n              </TouchableHighlight>\n            */}\n              <TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => this.props.app.changeInteractionMode({tutor_mode:!this.props.tutor_mode})}>\n               <Text style={styles.nools_button_text}>{(!this.props.tutor_mode && \"Tutor Mode\") || \"Train Mode\"}</Text>\n              </TouchableHighlight>\n              <TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={()=>this.props.app.generateBehaviorProfile()}>\n               <Text style={styles.nools_button_text}>{\"Gen bProfile\"}</Text>\n              </TouchableHighlight>\n\n            </View>\n            }\n\n            {this.props.debugmode && \n            <View style={styles.button_wrapper3}>\n              <View style={{display:'absolute',bottom:0,flexDirection:\"row\"}}>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\"\n                      onPress={() => send('DEMONSTRATE')}>\n                     <Text style={{fontSize : 10}}>{\"Demonstrate\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\" onPress={ ()=>{}}\n                      onPress={() => send('DONE')}>\n                     <Text style={{fontSize : 10}}>{\"Done\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\" onPress={ ()=>{}}\n                      onPress={() => send('APPLICABLE_SKILLS_RECIEVED')}>\n                     <Text style={{fontSize : 10}}>{\"Req recieved\"}</Text>\n                </TouchableHighlight>                \n              </View>\n            </View>\n          }\n        </View>\n\t\t  );\n\t}\n\n}\n\nconst styles = StyleSheet.create({\n\n  \"container\": {\n    flex : 1,\n    flexDirection : \"column\",\n    // justifyContent: \"spaceBetween\",\n    // marginBottom : 40\n    // display: \"flex\",\n    // flexWrap: \"wrap\",\n    // \"height\" : \"100%\",\n  },\n\n  \"prompt1\" : {\n    fontSize: 20,\n    \"textAlign\":\"center\",\n    // marginBottom : 20,\n    margin : 3,\n    flexWrap: \"wrap\",\n  },\n\n  \"prompt2\" : {\n    fontSize: 20,\n    \"textAlign\":\"center\",\n    margin : 7,\n    marginTop : 25,\n    marginBottom : 12,\n    flexWrap: \"wrap\",\n  },\n\n  \"button_wrapper1\":{\n    display:\"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n\n    // flexBasis : \"40%\",\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"button_wrapper2\":{\n    // justifyContent: \"spaceBetween\",\n    display:\"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    // flexBasis : \"40%\",\n    flexShrink: 1,\n    // marginBottom : 70,\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"button_wrapper3\":{\n\n    display:\"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n\n    // position: \"absolute\",\n    // bottom: 5,\n    padding: 5,\n\n    \n    // alignItems: \"center\",\n    // flexBasis : \"20%\",\n    marginTop: \"auto\",\n    // marginBottom: \"auto\",\n    \n    \n    // justifySelf: \"flex-end\",\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"yes_no\":{\n\n    display:\"flex\",\n    flexDirection: \"row\",\n    // justifyContent: \"space-between\"\n    // marginVertical: 10\n\n  },\n\n  \"nools_button\" : {\n    // position: \"absolute\",\n    // bottom: 5,\n    padding: 5,\n    // \"top\":100,\n    \"width\":100,\n    \"backgroundColor\": \"#999999\",\n    // justifySelf: \"bottom\",\n    borderRadius: 5,\n    \n  },\n\n  \"nools_button_text\" : {\n    // \"fontSize\":18,\n    \"textAlign\":\"center\",\n\n  },\n\n  \"startstate_button\" : {\n    \"position\": \"relative\",\n    \"width\":200,\n    // \"fontSize\":18,\n    \"backgroundColor\": \"#4CAF50\",\n     borderRadius: 5,\n     padding: 5,\n    // \"pointerEvents\": auto;\n  },\n  \"startstate_button_text\" : {\n    \"fontSize\":20,\n    \"textAlign\":\"center\",\n  },\n\n  \"yes_button\" :{\n    \"width\":80,\n    \"backgroundColor\": \"#4CAF50\",\n    borderRadius: 6,\n    margin: 8,\n    padding: 4,\n    // \"pointerEvents\": auto;\n  },\n  \"yes_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n   \"no_button\" :{\n    \"width\":80,\n    \"backgroundColor\": \"#f44336\",\n    borderRadius: 6,\n    margin: 8,\n    padding: 4,\n    // \"pointerEvents\": auto;\n  },\n\n  \"no_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n  \"next_button\" : {\n    // display: \"relative\",\n    // bottom: 0,\n    width:100,\n    backgroundColor: \"#4CAFFF\",\n    borderRadius: 6,\n    margin: 10,\n    padding: 5,\n    // \"pointerEvents\": auto;\n  },\n\n  \"next_button_text\" : {\n    \"fontSize\":35,\n    \"textAlign\":\"center\",\n  },\n\n  \"submit_button\" : {\n    // display: \"relative\",\n    // bottom: 0,\n    width:150,\n    backgroundColor: \"#4CAFFF\",\n    borderRadius: 6,\n    margin: 10,\n    padding: 5,\n    // \"pointerEvents\": auto;\n  },\n\n  \"submit_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n  \"prompt_text\" :{\n    /*display:flex;*/\n    \"textAlign\":\"center\",\n    \"fontSize\":25,\n\n  }, \n\n});\n\n\nexport default Buttons;\n","import { Machine,assign,interpret,send } from 'xstate';\n\n\n\n\n// const sendFeedback = (context,event,explicit=false) => {\n// \tif(event.response_type == \"CORRECT\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,1,explicit)\n// \t}else if(event.response_type == \"INCORRECT\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,-1,explicit)\n// \t}else if(event.response_type == \"NO_RESPONSE\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,0,explicit)\n// \t}\t\n// }\n\n// const post_next_example = (context,event) => {\n\n// }\n\n// const queryApprentice = () => {};\n// const post_next_example = () => {};\n// const apply_sai = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n\n// function apply_skill_application(context,event){\n// \tcontext.tutor.apply_skill_application()\n// }\n\n// function apply_next_example(context,event){\n// \tconst tutor = context.tutor\n// \tvar sai = tutor.getDefaultSAI()\n// \tvar data = {state: context.state, reward: 1,...sai}\n// \tcontext.network_layer.sendTrainingData(data)\n\n// }\nconst appendStartHistory = assign({start_state_history: (context,event) => {\n\tvar state = context.tutor.get_state()\n\tvar history = context.start_state_history || []\n\thistory.push(state)\n\treturn history\n}});\n\t\n\t\n\nconst stateRecalc = assign({state: (context,event) => {\n\tif(context.staged_SAI == null || context.staged_SAI.reward > 0){\n\t\treturn context.tutor.get_state()\n\t}else{\n\t\treturn context.state\n\t}\n}});\n\nconst assignFoci = assign({staged_SAI: (context,event) => {\n\tObject.assign(context.staged_SAI,{\"foci_of_attention\" : context.tutor.get_current_foci()})\n\treturn context.staged_SAI\n}});\n\n//CONDITIONS \nfunction saiIsCorrectDone(context,event){\n\tconst sai_data = context.staged_SAI\n\tif(context.feedback_map && Object.keys(context.feedback_map).length > 0) {return false}\n\treturn (sai_data.selection === \"done\" && (sai_data.reward == null || sai_data.reward  > 0))\n}\n\nfunction isFreeAuthor(context,event){\n\treturn context.free_author || false\n}\n\nfunction checkIsCorrect(context,event){\n\treturn event.data > 0\t\n} \n\nfunction noApplicableSkills(context,event){\n\treturn !Object.keys(event.data).length;\n}\n\nfunction logError(context,event){\n\tconsole.error(event.data)\n\t// alert(\"FAIL\")\n}\n\n// var color_map = { \n// \t\"EXAMPLE\" : \"0;33;44m\",\n// \t\"CORRECT\" : \"0;30;42m\",\n// \t\"INCORRECT\" : \"0;30;41m\",\n// }\n\nfunction _kill_this(context,event){\n\tvar nl = context.network_layer\n\tnl.kill_this(event.data.toString())\n}\n\n\nfunction printFeedback(context,event){\n\tvar nl = context.network_layer\n\tvar staged_SAI = context.staged_SAI\n\t\n\tvar type  = context.action_type \n\t// var reward = staged_SAI.reward \n\tif(!context.feedback_map || Object.keys(context.feedback_map).length === 0){\n\n\t\tif(type == \"ATTEMPT\"){\n\t\t\ttype = staged_SAI.reward > 0 ? \"CORRECT\" : \"INCORRECT\"\n\t\t}\n\n\t\t// var color = color_map[type]\n\t\tvar inps = staged_SAI.inputs['value'] != null ? staged_SAI.inputs['value'] : \"\"\n\t\t\n\t\tnl.term_print(type + \": \" + staged_SAI.selection + \" -> \" + inps, type)\n\t}else{\n\t\tfor (var index in context.feedback_map){\n\t\t\tvar skill_app = context.skill_applications[index]\n\t\t\tvar type = context.feedback_map[index].toUpperCase() \n\t\t\t// var color = color_map[type]\n\t\t\tvar inps = skill_app.inputs['value'] != null ? skill_app.inputs['value'] : \"\"\n\t\t\tnl.term_print(type + \": \" + skill_app.selection + \" -> \" + inps, type)\n\t\t}\n\t}\n\t\n}\n\nfunction clearSkillPanel(context,event){\n\tcontext.app.setState({skill_panel_props : {\n\t\tskill_set : {\"Applicable Skills\" :  {}},\n\t}})\n}\n\nfunction fillSkillPanel(context,event){\n\tcontext.app.setState({skill_panel_props : {\n\t\tskill_set : {\"Applicable Skills\" : event.data['responses'] || {}},\n\t}})\n}\n\nconst recalcFeedbackMap = send((context,event) => {\n\t// const promise = new Promise((resolve,reject) => {\n\tvar skill = event.skill;\n\tvar match = event.match;\n\tvar label = event.label;\n\n\tlet match_id = match[\"_id\"];\n    // console.log(match[\"_id\"])\n    // console.log(this.state.feedback_map)\n    let feedback_map = context.feedback_map || {} \n    let new_label = (feedback_map[match_id]\n           && label === feedback_map[match_id]) ? null : label;\n    \n    let new_feedback_map = {...feedback_map};\n    if(new_label === null){\n      delete new_feedback_map[match_id];\n    }else{\n      new_feedback_map[match_id] = new_label;\n    }\n\n    let was_empty = Object.keys(feedback_map).length === 0\n    let now_empty = Object.keys(new_feedback_map).length === 0\n\n    return {type : \"FEEBACK_MAP_UPDATE\" ,\n    \t\tfeedback_map : new_feedback_map,\n    \t\twas_empty : was_empty,\n    \t\tnow_empty : now_empty\n    \t   }\n    // if(!was_empty && now_empty){\n    //   \tconsole.log(\"EMPTY\")\n    //   \treturn {type: \"SKILL_PANEL_FEEDBACK_EMPTY\"}\n    // }else if(was_empty && !now_empty){\n    //   \tconsole.log(\"NOT EMPTY\")\n    //   \treturn {type :\"SKILL_PANEL_FEEDBACK_NONEMPTY\"}\n    // }\n    // return undefined\n\t// });\n\t// return promise;\n})\n\nconst assignFeedbackMap = assign({\"feedback_map\" : (context,event) =>  {\n\tif(context.skill_panel.updateFeedbackMap){\n\t\tcontext.skill_panel.updateFeedbackMap(event.feedback_map);\t\n\t}\n\tif(context.tutor.updateFeedbackMap){\n\t\tcontext.tutor.updateFeedbackMap(event.feedback_map)\n\t}\n\treturn event.feedback_map\n}})\n\nconst toggleFeedbackStyle = send((context,event) => {\n\tif(!event.was_empty && event.now_empty){\n      \tconsole.log(\"EMPTY\")\n      \treturn {type: \"SKILL_PANEL_FEEDBACK_EMPTY\"}\n    }else if(event.was_empty && !event.now_empty){\n      \tconsole.log(\"NOT EMPTY\")\n      \treturn {type :\"SKILL_PANEL_FEEDBACK_NONEMPTY\"}\n    }\n    return {type :\"\"}\n})\n\n\n\n\n\n// skill_set={skill_set}\n\t\t\t//\t\t\t\t\t\tselect_callback={select_callback}\n\t\t\t//\t\t\t\t\t\tcorrectness_callback={correctness_callback}\n\t\t//\t\t\t\t\t\t\tinitial_select={initial_select}\n\t\t//\t\t\t\t\t\t\twhere_colors={where_colors || undefined}\n\t//\t\t\t\t\t\t\t\tcurrent = {window.state_machine}\n\t//\t\t\t\t\t\t\t\tservice = {window.state_machine_service}\n\nfunction get_machine_actions(app){\n\tvar tutor = app.tutor.current\n\tvar skill_panel = app.skill_panel.current\n\tvar buttons = app.network_layer.current\n\tvar network_layer = app.network_layer\n\n\treturn {\n\t\tservices : {\n\t\t\tsendFeedback : (context,event) => network_layer.sendFeedback(context,event),\n\t\t\tsendFeedbackExplicit : (context,event) => network_layer.sendFeedbackExplicit(context,event),\n\t\t\tapplyNextExample : tutor.applyNextExample,\n\t\t\tattemptStagedSAI : tutor.attemptStagedSAI,\n\t\t\tqueryApprentice : network_layer.queryApprentice,\n\t\t\tcheckApprentice : network_layer.checkApprentice,\n\t\t},\n\t\tactions : {\n\t\t\t\tlogError : logError,\n\t\t\t\t\n\t\t\t\tstateRecalc : stateRecalc,\n\t\t\t\tassignResponse : assign({response: (context,event) => event.data}),\n\t\t\t\tassignStagedSAI : assign({staged_SAI: (context,event) => event.data}) ,\n\t\t\t\tassignExample : assign({action_type: (context,event) => \"EXAMPLE\"}) ,\n\t\t\t\tassignAttempt : assign({action_type: (context,event) => \"ATTEMPT\"}) ,\n\t\t\t\tassignCorrect : assign({staged_SAI: (context,event) => {\n\t\t\t\t\treturn {...context.staged_SAI, ...{reward: 1}}\n\t\t\t\t}}),\n\t\t\t\tassignIncorrect : assign({staged_SAI: (context,event) => {\n\t\t\t\t\treturn {...context.staged_SAI, ...{reward: -1}}\t\n\t\t\t\t}}),\n\t\t\t\tassignFoci : assignFoci,\n\t\t\t\tclearFeedbackData : assign((context,event) => {\t\n\t\t\t\t\treturn {\"reward\" : null,\n\t\t\t\t   \t\t\t// \"rewards\" : null,\n\t\t\t\t   \t\t\t\"staged_SAI\" : null,\n\t\t\t\t\t\t\t\"skill_applications\": null,\n\t\t\t\t\t\t\t\"feedback_map\" : null};\n\t\t\t\t}),\n\t\t\t\tassignSkillApplications : assign({skill_applications: (context,event) =>\n\t\t\t\t\tevent.data.responses || event.data.skill_applications}),\n\t\t\t\t// done : window.signal_done,\n\t\t\t\t\n\t\t\t\tprintFeedback : printFeedback,\n\t\t\t\tkill_this : _kill_this,\n\t\t\t\tprintEvent : (context,event) => {console.log(\"P_EVT:\",event)},\n\n\t\t\t\tfillSkillPanel : fillSkillPanel,\n\t\t\t\tclearSkillPanel : clearSkillPanel,\n\t\t\t\tdone : (context,event) => {context.app.training_service.send(\"PROBLEM_DONE\");}, \n\n\t\t\t\tenterSetStartStateMode : tutor.enterSetStartStateMode,\n\t\t\t\texitSetStartStateMode : tutor.exitSetStartStateMode,\n\t\t\t\tenterFeedbackMode : tutor.enterFeedbackMode,\n\t\t\t\texitFeedbackMode : tutor.exitFeedbackMode,\n\t\t\t\tenterFociMode : tutor.enterFociMode,\n\t\t\t\texitFociMode : tutor.exitFociMode,\n\t\t\t\tenterTutoringMode : tutor.enterTutoringMode,\n\t\t\t\texitTutoringMode : tutor.exitTutoringMode,\n\t\t\t\tdisplayCorrectness : tutor.displayCorrectness,\n\t\t\t\tapplyStagedSAI : (context,event) => {tutor.applySAI(context.staged_SAI);},\n\t\t\t\tproposeSAI : (context,event) => tutor.proposeSAI(event.data),\n\t\t\t\tconfirmProposedSAI : (context,event) => {tutor.confirmProposedSAI();},\n\t\t\t\tclearProposedSAI : (context,event) => {tutor.clearProposedSAI();},\n\n\t\t\t\trecalcFeedbackMap : recalcFeedbackMap,\n\t\t\t\tassignFeedbackMap : assignFeedbackMap,\n\t\t\t\ttoggleFeedbackStyle : toggleFeedbackStyle,\n\n\t\t\t\tgenerate_nools : network_layer.generate_nools,\n\t\t\t\tappendStartHistory : appendStartHistory,\n\n\t\t},\n\t\tguards : {\n\t\t\tsaiIsCorrectDone : saiIsCorrectDone,\n\t\t\tnoApplicableSkills : noApplicableSkills,\n\t\t\tisFreeAuthor : isFreeAuthor,\n\t\t\tcheckIsCorrect : checkIsCorrect,\n\t\t}\n\t}\n}\n\nexport function build_interactions_sm(app, interactive=false, free_author=false, tutor_mode=false){\n\tconst context = {\n\t\tapp : app,\n\t\ttutor : app.tutor.current,\n\t\tskill_panel : app.skill_panel.current,\n\t\tbuttons : app.buttons.current,\n\t\tnetwork_layer : app.network_layer,\n\n\t\t//Inherited\n\t\tagent_id : null,\n\t\tinteractive : null,\n\t\tfree_author : null,\n\t\t\n\t\t//Dynamic\n\t\t// last_correct : null,\n\t\tstaged_SAI : null,\n\t\taction_type : null\n\t}\n\tvar sm;\n\tif(tutor_mode){\n\t\tsm = tutor_sm\n\t}else{\n\t\tsm = interactive ? interactive_sm : non_interactive_sm\n\t}\n\t\n\t\n\n\tconst interaction_sm = Machine(\n\t\t{...{\"context\" : context}, ...sm},\n\t\tget_machine_actions(app)\n\t);\t\n\treturn interaction_sm\n}\n\n// ------------------------------- NON INTERACTIVE ----------------------------\n\nvar non_interactive_sm = {\n\tinitial : \"Start\",\n\tstates: {\n\t\tStart:{\n\t\t\tentry : \"stateRecalc\",\n\t\t\ton : {\n\t\t\t\t\"\" : \"Querying_Apprentice\",\n\t\t\t}\n\t\t},\n\t\tQuerying_Apprentice: {\n\t\t\tinvoke : {\n\t\t        id: \"queryApprentice\",\n\t\t        src: \"queryApprentice\",\n\t\t        onDone: [\n\t\t        \t{target: \"Applying_Next_Example\", cond: \"noApplicableSkills\"},\n\t\t        \t{target: \"Applying_Staged_SAI\", actions : [\"assignStagedSAI\"]},\n\t\t        ],\n\t\t        onError: 'Fail',\n\t\t\t},\n\t\t\texit: \"assignResponse\",\n\t\t},\n\t\tApplying_Staged_SAI : {\n\t\t\tinvoke : {\n\t\t        id: \"attemptStagedSAI\",\n\t\t        src: \"attemptStagedSAI\",\n\t\t        onDone: {target: \"Sending_Feedback\", actions : [\"assignStagedSAI\",\"assignAttempt\"]},\n\t\t        onError: 'Fail',\n\t\t\t},\n\t\t},\n\n\t\tApplying_Next_Example : {\n\t\t\tinvoke : {\n\t\t        id: \"applyNextExample\",\n\t\t        src: \"applyNextExample\",\n\t\t        onDone: {target: \"Sending_Feedback\", actions : [\"assignStagedSAI\",\"assignExample\"]},\n\t\t        onError: 'Fail'\n\t\t\t},\n\t\t},\n\n\t\tSending_Feedback : {\n\t\t\tentry : 'printFeedback',\n\t\t\tinvoke : {\n\t\t        id: \"sendFeedback\",\n\t\t        src: \"sendFeedback\",\n\t\t        onDone: [\n\t\t\t        {target: \"Done\", cond : \"saiIsCorrectDone\"},\n\t\t\t        {target: \"Querying_Apprentice\"},\n\t\t        ],\n\t\t        onError: 'Fail',\n\t\t\t},\n\t\t\texit:[\"stateRecalc\",\"assignResponse\",\"clearFeedbackData\"]\n\t\t},\n\t\tDone : {\n\t\t\ttype : 'final',\n\t\t\tentry : \"done\",\n\t\t},\n\t\tFail : {\n\t\t\tentry : [\"logError\",\"kill_this\"]\n\t\t}\n\t}\n};\n\n\n\n\n\n// ------------------------------- INTERACTIVE ----------------------------\n\nvar interactive_sm = {\n\tid : \"interactive\",\n\tinitial : \"Start\",\n\tstates: {\n\t\tStart:{\n\t\t\tentry : \"stateRecalc\",\n\t\t\ton : {\n\t\t\t\t\"\" : [\n\t\t\t\t\t{\"target\" : \"Setting_Start_State\", cond : \"isFreeAuthor\"},\n\t\t\t\t\t{\"target\" : \"Querying_Apprentice\"}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t\"Setting_Start_State\": {\n\t\t\tentry : \"enterSetStartStateMode\",\n  \t\t\ton: { \"START_STATE_SET\": {target : \"Querying_Apprentice\", actions: [\"appendStartHistory\"] }},\n  \t\t\texit : [\"exitSetStartStateMode\",\"stateRecalc\"]\n  \t\t},\n\t\tQuerying_Apprentice: {\n\t\t\tinvoke : {\n\t\t        id: \"queryApprentice\",\n\t\t        src: \"queryApprentice\",\n\t\t        onDone: [\n\t\t        \t{target: \"Waiting_User_Feedback.Waiting_Demonstrate_Only\",\n\t\t        \t cond: \"noApplicableSkills\", \"actions\" : [\"fillSkillPanel\"]},\n\t\t        \t{target: \"Waiting_User_Feedback.Waiting_Yes_No_Feedback\",\n\t\t        \t \"actions\" : [\"fillSkillPanel\",\"proposeSAI\", \"assignStagedSAI\"]},\n\t\t        ],\n\t\t        onError: 'Fail',\n\t\t\t},\n\t\t\texit: \"assignSkillApplications\",\n\t\t},\n\t\tWaiting_User_Feedback : {\n\t\t\tentry : \"enterFeedbackMode\",\n\t\t\t//\n\t\t\tinitial : \"Waiting_Demonstrate_Only\",\n\t\t\tstates : {\n\t\t\t\t\"Waiting_Demonstrate_Only\" : {\n\n\t\t\t\t},\n\t\t\t\t\"Waiting_Yes_No_Feedback\" : {\n\t\t\t\t\ton : {\n\t\t\t\t\t\t\"SKILL_PANEL_FEEDBACK_NONEMPTY\" : \"Waiting_Submit_Feedback\",\n\t\t\t\t\t\t// \"YES_PRESSED\" : {target : \"#interactive.Sending_Feedback\",\n\t\t\t\t\t\t\"YES_PRESSED\" : {target : \"#interactive.Sending_Feedback\",\n\t\t\t\t\t\t\tactions : [\"assignCorrect\",\"assignAttempt\",\"confirmProposedSAI\"]},\n\t\t\t\t\t\t\"NO_PRESSED\" : {target :\"#interactive.Sending_Feedback\",\n\t\t\t\t\t\t\tactions : [\"assignIncorrect\",\"assignAttempt\",\"clearProposedSAI\"]},\n\t\t\t\t\t}\t\n\t\t\t\t},\n\t\t\t\t\"Waiting_Submit_Feedback\" : {\n\t\t\t\t\ton : {\n\t\t\t\t\t\t\"SKILL_PANEL_FEEDBACK_EMPTY\" : \"Waiting_Yes_No_Feedback\",\n\t\t\t\t\t\t\"SUBMIT_SKILL_FEEDBACK\": {target : \"#interactive.Sending_Feedback\",\n\t\t\t\t\t\t \tactions : [\"clearProposedSAI\"]},\n\t\t\t\t\t}\t\n\t\t\t\t},\n\t\t\t},\n\t\t\t//\n\t\t\ton : {\n\t\t\t\t\"STAGE_SAI\" : {actions : [\"assignStagedSAI\",\"proposeSAI\"]},\n\t\t\t\t//\n\t\t\t\t\"TOGGLE_FEEDBACK\" : {actions : \"recalcFeedbackMap\"},//, onDone:{actions :\"callSend\"}, onError: 'Fail'}},\n\t\t\t\t\"FEEBACK_MAP_UPDATE\" : {actions : [\"assignFeedbackMap\",\"toggleFeedbackStyle\",]},//, onDone:{actions :\"callSend\"}, onError: 'Fail'}},\n\t\t\t\t//\n\t\t\t\t\"DEMONSTRATE\" : {target : \"Waiting_Select_Foci\",\n\t\t\t\t   \tactions : [\"assignStagedSAI\", \"assignExample\", \"printEvent\", \"clearProposedSAI\"]},\n\t\t\t\t\"GEN_NOOLS\" : {actions : [\"generate_nools\"]},\n\t\t\t\t },\n\t\t\t\t \n\t\t\texit : [\"exitFeedbackMode\"]\n\t\t},\t\t\n\t\t// \"Applying_Staged_SAI\" : {\n\t\t// \tinvoke : {\n\t\t//         id: \"attemptStagedSAI\",\n\t\t//         src: \"attemptStagedSAI\",\n\t\t//         onDone: \"Sending_Feedback\",\n\t\t//         onError: 'Fail',\n\t\t// \t},\n\t\t// },\n\t\t\"Waiting_Select_Foci\": {\n\t\t\tentry : \"enterFociMode\",\n\t\t\ton: {\n\t\t\t\t\"\" : \t\t {target : \"Sending_Feedback\", actions : \"assignFoci\", cond : \"saiIsCorrectDone\"},\n\t\t\t\t\"FOCI_DONE\": {target : \"Sending_Feedback\", actions : \"assignFoci\"},\n\t\t\t},\n\t\t\texit : \"exitFociMode\",\n\t    },\n\t\tSending_Feedback : {\n\t\t\tentry : ['printFeedback'],\n\t\t\tinvoke : {\n\t\t        id: \"sendFeedback\",\n\t\t        src: \"sendFeedback\",\n\t\t        onDone: [\n\t\t\t        // {target: \"Setting_Start_State\", cond : },\n\t\t\t        {target: \"Done\", cond : \"saiIsCorrectDone\"},\n\t\t\t        {target: \"Querying_Apprentice\"},\n\t\t        ],\n\t\t        onError: 'Fail',\n\t\t\t},\n\t\t\texit:[\"stateRecalc\",\"assignResponse\",\"clearFeedbackData\"]\n\t\t},\n\t\t// Sending_Feedback_Explicit : {\n\t\t// \tentry : 'printFeedback',\n\t\t// \tinvoke : {\n\t\t//         id: \"sendFeedbackExplicit\",\n\t\t//         src: \"sendFeedbackExplicit\",\n\t\t//         onDone: [\n\t\t// \t        // {target: \"Setting_Start_State\", cond : },\n\t\t// \t        // {target: \"Done\", cond : \"saiIsCorrectDone\"},\n\t\t// \t        {target: \"Querying_Apprentice\"},\n\t\t//         ],\n\t\t//         onError: 'Fail',\n\t\t// \t},\n\t\t// \texit:[\"stateRecalc\",\"assignResponse\",\"clearFeedbackData\"]\n\t\t// },\n\t\tDone : {\n\t\t\ttype : 'final',\n\t\t\tentry : ['clearSkillPanel',\"done\"],\n\t\t\t// on : {\n\t\t\t// \t\"\" : {target  : \"Setting_Start_State\", cond : \"isFreeAuthor\"},\n\t\t\t// },\n\t\t},\n\t\tFail : {\n\t\t\tentry : [\"logError\",\"kill_this\"]\n\t\t}\n\t}\n};\n\nconst tutor_sm = {\n\tid : \"interactive\",\n\tinitial : \"Start\",\n\tstates: {\n\t\tStart:{\n\t\t\tentry : \"stateRecalc\",\n\t\t\ton : {\n\t\t\t\t\"\" : [\n\t\t\t\t\t{\"target\" : \"Setting_Start_State\", cond : \"isFreeAuthor\"},\n\t\t\t\t\t{\"target\" : \"Waiting_User_Attempt\"}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t\"Setting_Start_State\": {\n\t\t\tentry : \"enterSetStartStateMode\",\n  \t\t\ton: { \"START_STATE_SET\": {target : \"Waiting_User_Attempt\", actions: [\"appendStartHistory\"] }},\n  \t\t\texit : [\"exitSetStartStateMode\",\"stateRecalc\"]\n  \t\t},\n  \t\t\"Waiting_User_Attempt\":{\n  \t\t\tentry : [\"enterTutoringMode\",\"stateRecalc\"],\n  \t\t\ton: {\n  \t\t\t\t\"ATTEMPT\" : {target : \"Checking_Against_Apprentice\", actions : \"assignStagedSAI\"},\n  \t\t\t},\n  \t\t\texit : \"exitTutoringMode\",\n  \t\t},\n  \t\t\"Checking_Against_Apprentice\" : {\n\t\t\tinvoke : {\n\t\t\t\tid : \"checkApprentice\",\n\t\t\t\tsrc : \"checkApprentice\",\n\t\t\t\tonDone : [\n\t\t\t\t\t{cond : \"saiIsCorrectDone\",\n\t\t\t\t\ttarget : \"Done\",\n\t\t\t\t\tactions : [\"displayCorrectness\",\"assignCorrect\"]},\n\t\t\t\t\t{cond : \"checkIsCorrect\",\n\t\t\t\t\ttarget : \"Waiting_User_Attempt\",\n\t\t\t\t\tactions : [\"displayCorrectness\",\"assignCorrect\"]},\n\t\t\t\t\t{target : \"Waiting_User_Attempt\",\n\t\t\t\t\tactions : [\"displayCorrectness\",\"assignIncorrect\"]},\n\n\t\t\t\t],\n\t\t\t},\n\t\t\t// exit : \"stateRecalc\"\n\t\t},\n\t\t\"Done\" :{\n\t\t\ttype : 'final',\n\t\t\tentry : ['clearSkillPanel',\"done\"],\n\t\t}\n\n\t}\n}\n\n\n// const feedbackStates = {\n// \tinitial: \"Waiting_For_Applicable_Skills\",\n// \tstates: {\n// \t\t\"Waiting_For_Applicable_Skills\" :{\n// \t\t\tentry : ['queryApprentice'],\n// \t\t\ton : {\n// \t\t\t\t\"APPLICABLE_SKILLS_RECIEVED\" : \"Query_Yes_No_Feedback\",\n// \t\t\t\t\"NO_SKILLS_RECIEVED\" : \"No_Query_Feedback\"\n// \t\t\t}\n// \t\t},\n// \t\t\"Waiting_For_Training_Recieved\" :{\n// \t\t\ton : {\n// \t\t\t\t\"TRAINING_RECIEVED\" : \"Waiting_For_Applicable_Skills\",\n// \t\t\t}\t\n// \t\t},\n// \t\t\"No_Query_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_NONEMPTY\" : \"Query_Submit_Feedback\"\n// \t\t\t}\n// \t\t},\n// \t\t\"Query_Yes_No_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_NONEMPTY\" : \"Query_Submit_Feedback\",\n// \t\t\t\t\"YES_PRESSED\" : \"Waiting_For_Training_Recieved\",\n// \t\t\t\t\"NO_PRESSED\" : \"Waiting_For_Training_Recieved\",\n// \t\t\t}\t\n// \t\t},\n// \t\t\"Query_Submit_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_EMPTY\" : [\n// \t\t\t\t\t{target : \"Query_Yes_No_Feedback\", },\n// \t\t\t\t\t{target : \"No_Query_Feedback\"}\n// \t\t\t\t],\n// \t\t\t\t\"SUBMIT_SKILL_FEEDBACK\": \"Waiting_For_Training_Recieved\"\n// \t\t\t}\t\n// \t\t}\n// \t}\n// }\n\n// const ButtonsMachine = Machine({\n//   \"initial\": \"Specify_Start_State\",\n//   \"states\": {\n//   \t\"Specify_Start_State\": {\n//   \t\ton: { \"START_STATE_SET\": \"Query_Demonstrate\" },\n//   \t},\t\n//     \"Query_Demonstrate\": {\n//       on: { \"DEMONSTRATE\": \"Request_Foci\",\n//        \t\t\"DONE\": \"Specify_Start_State\" },\n      \n//       ...feedbackStates\n//     },\n//     \"Request_Foci\": {\n//       on: {\n//         \"FOCI_DONE\": \"Query_Demonstrate\",\n//       },\n//     },\n//     \"Explantions_Displayed\": {\n//       on: {\n//         \"NEXT_PRESSED\": \"Query_Demonstrate\",\n//         \"DEMONSTRATE\": \"Request_Foci\",\n//         \"DONE\": \"Specify_Start_State\"\n//       },\n      \n//     },\n//   }\n// },\n// {\n// \tactions: {\n// \t\tqueryApprentice : (context,event) => {\n// \t\t\twindow.queryApprentice()\n// \t\t}\n// \t}\n// }\n// )\n\n// window.new_nonInteractiveMachine = () => {\n// \tvar machine = build_SM_NonInteractive(window.tutor,window.network_layer,window.agent_id)\n// \tvar machine_service = interpret(machine)\n// \tmachine_service.start()\n// \treturn machine_service\n// }\n\n\n\n// const load_training_file = () => {};\n// const serve_next_training_set = () => {};\n// const serve_next_agent = () => {};\n// const serve_next_problem = () => {};\n// const runWhenReady = () => {};\n// const query_outerloop = () => {};\n\n\n// function make_training_handler(){\n// \tconst sm= Machine({\n// \t\tinitial: \"Loading_Training_File\",\n// \t\tstates: {\n// \t\t\tLoading_Training_File: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"load_training_file\",\n// \t\t\t\t\tsrc: \"load_training_file\",\n// \t\t\t\t\tonDone: \"Serving_Training_Sets\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\t\n// \t\t\tServing_Training_Sets: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_training_set\",\n// \t\t\t\t\tsrc: \"serve_next_training_set\",\n// \t\t\t\t\tonDone: [{target : \"All_Done\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Serving_Agents\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Agents: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_agent\",\n// \t\t\t\t\tsrc: \"serve_next_agent\",\n// \t\t\t\t\tonDone: [{target : \"Serving_Training_Sets\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Serving_Problems\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Problems: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_problem\",\n// \t\t\t\t\tsrc: \"serve_next_problem\",\n// \t\t\t\t\tonDone: [{target : \"Serving_Agents\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Waiting_Problem_Load\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tWaiting_Problem_Load:{\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"set_problem_src\",\n// \t\t\t\t\tsrc: \"set_problem_src\",\n// \t\t\t\t\tonDone: \"Training\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n\n// \t\t// \"Waiting_For_OuterLoop\": {\n// \t\t// \tentry: query_outerloop,\n// \t\t// \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\"}\n// \t\t// },\n\n// \t\t\tTraining: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"training_state_machine\",\n// \t\t\t\t\tsrc: \"training_state_machine\",\n// \t\t\t\t\tonDone: \"Serving_Problems\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t// \"Explantions_Displayed\": {\n// \t\t//   on: {\n// \t\t//     \"NEXT_PRESSED\": \"Query_Demonstrate\",\n// \t\t//     \"DEMONSTRATE\": \"Request_Foci\",\n// \t\t//     \"DONE\": \"Specify_Start_State\"\n// \t\t//   },\n\t\t  \n// \t\t// },\n// \t\t\tAll_Done : {\n// \t\t\t\ttype : 'final',\n// \t\t\t},\n// \t\t\tFail : {\n// \t\t\t\tentry : [\"logError\",\"kill_this\"]\n// \t\t\t}\n// \t\t}\n// \t})\n// }\n\n\n// const TrainingJSON_SM= Machine({\n//   \"initial\": \"Loading_Training_File\",\n//   \"states\": {\n//   \t\"Loading_Training_File\": {\n//   \t\tentry: load_training_file,\n//   \t\ton: { \"TRAINING_FILE_LOADED\": \"Serving_Training_Sets\" },\n//   \t},\t\n//   \t\"All_Done\" : {},\n//     \"Serving_Training_Sets\": {\n//     \tentry: serve_next_training_set,\n//       \ton: { \"TRAINING_SET_LOADED\": \"Serving_Agents\",\n//       \t\t  \"NO_MORE_TRAINING_SETS\" : \"All_Done\"},\n//     },\n//     \"Serving_Agents\": {\n//     \tentry: serve_next_agent,\n//     \ton: {\"AGENT_CREATED\": \"Serving_Problem\",\n//       \t\t \"NO_MORE_AGENTS\" : \"Serving_Training_Sets\"},\n//     },\n//     \"Serving_Problems\": {\n//     \tentry: serve_next_problem,\n//     \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\",\n//     \t\t \"QUERY_OUTERLOOP\": \"Waiting_For_OuterLoop\",\n//       \t\t \"NO_MORE_PROBLEMS\" : \"Serving_Agents\"},\n//     },\n//     \"Waiting_Problem_Load\":{\n//     \tentry: runWhenReady,\n//     \ton: {\"PROBLEM_LOADED\": \"Training\"}\n//     },\n//     \"Waiting_For_OuterLoop\": {\n//     \tentry: query_outerloop,\n//     \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\"}\n//     },\n\n//     \"Training\": {\n//     \ton: {\"PROBLEM_DONE\": \"Serving_Problems\"},\n//     },\n//     \"Explantions_Displayed\": {\n//       on: {\n//         \"NEXT_PRESSED\": \"Query_Demonstrate\",\n//         \"DEMONSTRATE\": \"Request_Foci\",\n//         \"DONE\": \"Specify_Start_State\"\n//       },\n      \n//     },\n//   }\n// },\n// {\n// \tactions: {\n// \t\tqueryApprentice : (context,event) => {\n// \t\t\twindow.queryApprentice()\n// \t\t}\n// \t}\n// }\n// )\n\nexport default build_interactions_sm;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport SkillPanel from './components/skill_panel';\nimport Buttons from './components/buttons';\nimport * as serviceWorker from './serviceWorker';\n// import ButtonsMachine from './interactions.js'\n\nimport { interpret } from 'xstate';\nimport CTAT_Tutor from './tutors/CTAT/CTAT_Tutor';\nimport StylusTutor from './tutors/Stylus/StylusTutor';\nimport App from './App';\nimport RJSON from 'relaxed-json'\n\nconst tutor_map =  {\n\t\"ctatttutor\" : CTAT_Tutor,\n\t\"ctat\" : CTAT_Tutor,\n\t\"stylustutor\" : StylusTutor,\n\t\"stylus\" : StylusTutor,\n}\n\nfunction load_training_file (training_file){\n\t// console.log(\"SLOOPERZ\",training_file)\n\treturn fetch(training_file)\n\t\t\t.then((str) => str.text())//str.json())\n\t\t\t.then((str) => RJSON.parse(str))//str.json())\n}\n\nfunction safeParse(json){\n\tvar parsed;\n\ttry {\n    \tparsed = JSON.parse(json)\n\t} catch (e) {\n\t    parsed = null;\n\t}\n\treturn parsed;\n}\n\nfunction getWebProps(){\n\tvar urlParams = new URLSearchParams(window.location.search.substring(1));\n\tconsole.log(window.location.search)\n\tconsole.log(urlParams)\n\n\tvar props = {AL_URL : urlParams.get('al_url'),\n\t\t\t\t HOST_URL : window.location.origin,\n\t\t\t\t training_file : urlParams.get('training'),\n\t\t\t\t interactive : safeParse((urlParams.get('interactive')||\"\").toLowerCase()),\n\t\t\t\t use_foci : safeParse((urlParams.get('use_foci')||\"\").toLowerCase()),\n\t\t\t\t tutor : urlParams.get('tutor'),\n\t\t\t\t nools_dir : urlParams.get('nools_dir'), \n\t\t\t}\n\n\tconsole.log(\"PROPS\",props,urlParams.get('interactive'))\n\treturn props\n}\n\nfunction removeEmpty(obj){\n  var out = {}\n  console.log(obj)\n  Object.keys(obj).forEach((key) => {\n  \tconsole.log(key)\n  \tif(obj[key] != null){\n  \t\tout[key] = obj[key]\n  \t}\n  });\n  return out\n};\n\nvar props = getWebProps()\n\nprops.training_file = props.training_file || \"/stylus_author.json\"\n// console.log(\"WEE\", props.training_file)\n\nload_training_file(props.training_file).then(function(training_json){\n\t// console.log(\"BOOPERSZ\", training_json)\n\tvar training_file_props = training_json.set_params\t\n\tprops = {...training_file_props, ...removeEmpty(props)}\n\tprops.tutor = (props.tutor || 'ctat').toLowerCase().replace(\"_\",\"\");\n\tReactDOM.render(\n\t\t\t<App \n\t\t\tref={(app) => {window.react_interface = app}}\n\t\t\tstyle={{\"height\":\"100%\"}}\n\t\t\ttutorClass={tutor_map[props.tutor] || StylusTutor}\n\t\t\t{...props}/>\n\t\t\t, document.getElementById('root'));\t\n});\n\n\n\n\n\n\n\n\n\n\nif(false){\n\t// function setSkillWindowState(evt){\n\n\t// }\n\t// window.state_machine = ButtonsMachine.initialState\n\t// window.state_machine_service = interpret(ButtonsMachine)\n\t// window.state_machine_service.start()\n\n\n\t// const state = {\n\t//   current: \n\t// };\n\t// window.state_machine_service.onTransition(current => {\n\t// \tconsole.log(\"current.value\")\n\t// \tconsole.log(current.value)\n\t// \tsetButtonsState(current,window.debugmode)\n\t  \n\t//   // this.setState({ current : current })\n\t//   }\n\t// );\n\n\n\n\t// function setButtonCallbacks(callbacks){\n\t// window.button_callbacks = callbacks\n\t// }\n\t// window.setButtonCallbacks = setButtonCallbacks\n\n\t// function setNoolsCallback(callback){\n\t// \twindow.nools_callback = callback\n\t// }\n\t// window.setNoolsCallback = setNoolsCallback\n\n\n\tfunction setSkillWindowState(skill_set, select_callback,\n\t\t\t\t\t\t\t\t correctness_callback, initial_select=null,\n\t\t\t\t\t\t\t\t where_colors=null){\n\t\tReactDOM.render(\n\t\t\t//<View>\n\t\t\t<CTAT_Tutor></CTAT_Tutor>\n\t\t\t//<SkillPanel skill_set={skill_set}\n\t\t\t//\t\t\t\t\t\tselect_callback={select_callback}\n\t\t\t//\t\t\t\t\t\tcorrectness_callback={correctness_callback}\n\t\t//\t\t\t\t\t\t\tinitial_select={initial_select}\n\t\t//\t\t\t\t\t\t\twhere_colors={where_colors || undefined}\n\t//\t\t\t\t\t\t\t\tcurrent = {window.state_machine}\n\t//\t\t\t\t\t\t\t\tservice = {window.state_machine_service}\n\t//\t\t\t\t\t\t\t\t\n\t//\t\t\t\t\t\t\t\t/>\n\t//\t\t</View>\n\t\t\t, document.getElementById('skill_panel'));\t\n\t}\n\n\n\tfunction setButtonsState(current,debugmode=false){\n\t\twindow.state_machine = current;\n\t\tReactDOM.render(<Buttons current={current}\n\t\t\t\t\t\t service={window.state_machine_service}\n\t\t\t\t\t\t debugmode={debugmode}\n\t\t\t\t\t\t callbacks={window.button_callbacks}\n\t\t\t\t\t\t nools_callback={window.nools_callback}/>,\n\t\t document.getElementById('buttons'));\t\n\t}\n\n\twindow.setSkillWindowState = setSkillWindowState\n\twindow.setButtonCallbacks = setSkillWindowState\n\twindow.setButtonsState = setButtonsState\n\n\t// function render(){\n\t// let sections = [\n\t// \t              {title: 'D', data: ['Devin the long named fool']},\n\t// \t              {title: 'J', data: ['Jackson', 'James', 'Jillian', 'Jimmy', 'Joel', 'John', 'Julie']},\n\t// \t              {title: 'B', data: ['Backson', 'Bames', 'Billian', 'Bimmy', 'Boel', 'Bohn', 'Bulie']},\n\t// \t            ];\n\n\n\tlet test_skills = {\"explanations\": [\n\t\t\t\t\t\n\t\t\t\t\t{\"name\" : \"E0 + E1\",\n\t\t\t\t\t \"how\": \"E0 + E1\",\n\t\t\t\t\t \"where\": {\"A\":{\"B\":1}},\n\t\t\t\t\t \"when\": \"WHEN PART\",\n\t\t\t\t\t \"which\": 7.0,\n\t\t\t\t\t 'mapping': {\"?sel\": 'A1', \"?arg0\": 'B1',\"?arg1\": 'C1'}\n\t\t\t\t\t},\n\t\t\t\t\t{\"name\" : \"E0 + E1\",\n\t\t\t\t\t \"how\": \"E0 + E1\",\n\t\t\t\t\t \"where\": \"WHERE PART\",\n\t\t\t\t\t \"when\": \"WHEN PART\",\n\t\t\t\t\t \"which\": 7.0,\n\t\t\t\t\t 'mapping': {\"?sel\": 'A2', \"?arg0\": 'B2',\"?arg1\": 'C2'}\n\t\t\t\t\t},\n\t\t\t\t\t{\"name\": \"(E0 + E1) // 10\",\n\t\t\t\t\t \"how\": \"(E0 + E1) // 10\",\n\t\t\t\t\t \"where\": \"WHERE PART\",\n\t\t\t\t\t \"when\": \"WHEN PART\",\n\t\t\t\t\t \"which\": 4.0,\n\t\t\t\t\t 'mapping': {\"?sel\": 'A1', \"?arg0\": 'B1',\"?arg1\": 'C1'}\n\n\t\t\t\t\t},\n\t\t\t\t\t{\"name\": \"(E0 + E1) // 10\",\n\t\t\t\t\t \"how\": \"(E0 + E1) // 10\",\n\t\t\t\t\t \"where\": \"WHERE PART\",\n\t\t\t\t\t \"when\": \"WHEN PART\",\n\t\t\t\t\t \"which\": 4.0,\n\t\t\t\t\t 'mapping': {\"?sel\": 'A2', \"?arg0\": 'B2',\"?arg1\": 'C2'}\n\t\t\t\t\t}\n\t\t\t\t ],\n\t\t\t\t \"other skills\": [\n\t\t\t \t\t{\"name\": \"(E0 + E1) // 10\",\n\t\t\t\t\t \"how\": \"E0 + E1 + E2\",\n\t\t\t\t\t \"where\": \"WHERE PART (E0 + E1 + E2)\",\n\t\t\t\t\t \"when\": \"WHEN PART (E0 + E1 + E2)\",\n\t\t\t\t\t \"which\": 3.0,\n\t\t\t\t\t},\n\t\t\t\t\t{\"name\": \"(E0 + E1 + E2) // 10\",\n\t\t\t\t\t \"how\": \"E0 + E1\",\n\t\t\t\t\t \"where\": \"WHERE PART ((E0 + E1 + E2) // 10)\",\n\t\t\t\t\t \"when\": \"WHEN PART ((E0 + E1 + E2) // 10)\",\n\t\t\t\t\t \"which\": 8.0,\n\t\t\t\t\t},\n\t\t\t\t ]\n\n\n\t\t\t\t};\n\t// setSkillWindowState({\"skills:\": []});\n\n\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\twindow.debugmode = true;\n\t\twindow.query_apprentice = () => {};\n\t\tsetButtonsState(window.state_machine,true)\n\t\tsetSkillWindowState(test_skills);\n\t}else{\n\t\twindow.debugmode = false\n\t}\n}\n// setButtonsState(\"press_next\",true,true);\n\n// }\n// document.getElementById('render_button').addEventListener(\"click\",render)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/Arrowhead-01-128.3fbf838f.png\";","module.exports = __webpack_public_path__ + \"static/media/Arrowhead-Down-01-128.912d4e8d.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport WebView  from 'react-native-web-webview';\nimport autobind from 'class-autobind';\n\n// import WebViewFile from '../../examples/FracPreBake/FractionArithmetic/HTML/fraction_arithmetic.html';\nimport {\n  Icon,\n  View,\n  Text,\n  StyleSheet,\n  Platform//, \n  // WebView\n} from 'react-native';\n\nconst queryString = require('query-string');\nconst path = require(\"path\")\n\nvar $ = require('jquery');\n\n// const post_message = \n// \"\\\n// function waitForBridge() {\\\n//    //the react native postMessage has only 1 parameter\\\n//    //while the default one has 2, so check the signature\\\n//    //of the function\\\n//    if (window.postMessage.length !== 1){\\\n//      setTimeout(waitForBridge, 200);\\\n//    }\\\n//    else {\\\n//      window.postMessage(document);\\\n//    }\\\n// }\\\n// \\\n// window.onload = waitForBridge;\\\n// \";\n\nfunction checkTypes(element, types){\n  var ok = false;\n    for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n    if(element.classList.contains(type)) ok = true;\n  }\n  return ok;\n}\n\n\nclass CTAT_Tutor extends React.Component {\n  constructor(props){\n    super(props);\n    autobind(this)\n\n    this.where_colors = [  \"darkorchid\",  \"#ff884d\",  \"#52d0e0\", \"#feb201\",  \"#e44161\", \"#ed3eea\", \"#2f85ee\",  \"#562ac6\", \"#cc24cc\"]\n\n    this.relative_pos_cache = {};\n\n    this.color_class_map = {\n      \"EXAMPLE\" : \"CTAT--example\",\n      \"CORRECT\" : \"CTAT--correct\",\n      \"INCORRECT\" : \"CTAT--incorrect\",\n      \"HIGHLIGHT\" : \"CTAT--AL_highlight\",\n      \"START_STATE\" : \"CTAT--AL_start\",\n      \"ATTEMPT\" : \"\",\n      \"DEFAULT\" : \"\"\n      };\n\n    this.ctat_webview = React.createRef();\n\n    this.state = {\n      // \"mode\" : this.props.mode || \"train\",\n      \"source\" : \"../../examples/FracPreBake/FractionArithmetic/HTML/fraction_arithmetic.html?question_file=../mass_production/mass_production_brds/AD 5_9_plus_3_7.brd\"\n    }\n    this.start_state_history = []\n    this.highlighted_elements = []\n\n    // window.setMode = (mode) => {this.setState({mode : mode })}\n\n  }\n\n  // setMode(mode){\n  //   if(this.state.mode == \"train\" && mode == \"tutor\"){\n  //     this.clearProposedSAI()\n  //   } \n\n  //   this.setState({mode : mode })\n\n  // }\n\n  componentDidMount(){\n    // window.ctat_webview = this.ctat_webview.current\n\n    \n    \n    console.log(\"THIS\",this)\n    // this.graph = this.iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n  }\n\n  componentDidUpdate(prevProps,prevState){\n    console.log(\"UPDATED\", this.state)\n    this.iframe = this.ctat_webview.current\n    \n    if(!this.init_callback){\n      this.init_callback = (x) => {};\n    }\n\n    // this._triggerWhenInitialized()\n\n  }\n\n  loadProblem(context){\n    const prob_obj = context.prob_obj\n    const nl = context.network_layer\n    const interactive = context.interactive\n    this.interactive = context.interactive\n    this.setState({\"source\" : {\"html\":LOAD_SCREEN}})\n    const promise = new Promise((resolve,reject) => {\n      var HTML_name = prob_obj[\"HTML\"].substring(prob_obj[\"HTML\"].lastIndexOf('/')+1).replace(\".html\", \"\");\n\n      var domain_name = prob_obj[\"domain_name\"] || HTML_name;\n      \n\n      // Point the iframe to the HTML and question_file (brd or nools) for the next problem\n\n      // iframe_content.CTAT = null;\n      // iframe_content.CTATCommShell = null;\n\n\n\n      var HTML_PATH = prob_obj[\"HTML\"];\n      if(!path.isAbsolute(HTML_PATH)){\n          HTML_PATH = path.join(context.working_dir || \"/\", HTML_PATH)  \n      }\n      // console.log(\"working_dir: \", working_dir)\n      // console.log(\"HTML_PATH: \", HTML_PATH)\n\n\n      // if(session_id == null){\n      //     user_guid = \"Stu_\" + CTATGuid.guid();\n      //     session_id = CTATGuid.guid();\n      // }\n\n      var qf_exists = prob_obj[\"question_file\"] != undefined && prob_obj[\"question_file\"].toUpperCase() != \"INTERACTIVE\";\n      var BRD_name, free_authoring;\n      if(qf_exists){\n          BRD_name = prob_obj[\"question_file\"].substring(prob_obj[\"question_file\"].lastIndexOf('/')+1).replace(\".brd\", \"\").replace(\".nools\", \"\");  \n            free_authoring = false;\n      }else{\n          BRD_name = \"FREE AUTHORING\"\n            free_authoring = true;\n      }\n      // this.free_authoring = \n        // term_print(prob_obj[\"question_file\"])\n        \n\n      nl.term_print(\"Starting Problem: \" + BRD_name, 'INFO');\n\n      var qf = qf_exists  ? {\"question_file\" : prob_obj[\"question_file\"]} : {\"question_file\" : \"/src/empty.nools\"} ;\n\n      console.log(\"qf\",qf,interactive)\n      if(!interactive && qf[\"question_file\"].includes(\".nools\")){\n          nl.kill_this('Question file cannot be nools in non-interactive mode. Use example tracing.')\n      }\n      var logging_params = {\n          \"problem_name\": BRD_name,\n          \"dataset_level_name1\" : domain_name,\n          \"dataset_level_type1\" : \"Domain\",\n          \"SessionLog\" : \"true\",\n          \"Logging\" : \"ClientToLogServer\",\n          \"log_service_url\" : window.location.origin,\n          \"user_guid\" : context.agent_id,\n          \"session_id\" : context.session_id\n      };\n      var params = Object.assign({},qf,logging_params) //Merge dictionaries\n      \n      this.HTML_PATH = HTML_PATH\n      this.init_callback = () => {resolve({\"updateContext\": {free_author : free_authoring}})}\n      var source = HTML_PATH + \"?\" + queryString.stringify( params );\n      console.log(\"source\", source)\n      this.graph = null\n      this.commLibrary = null\n      this.hasConfig = null\n      this.setState({\"source\" : {\"uri\":source},\n            \"onLoad\" : this._triggerWhenInitialized\n        })\n      // this.iframe.onLoad = this._triggerWhenInitialized;\n      // this.iframe.src = HTML_PATH + \"?\" + queryString.stringify( params ).search;\n      // setTimout(this._triggerWhenInitialized(),10)\n    })\n    return promise;\n  }\n\n  _inject_element(elm_type,attributes={}){\n      var elm = this.iframe_content.document.createElement(elm_type);\n      for (var attr in attributes){\n        elm.setAttribute(attr, attributes[attr])\n      }\n      this.iframe_content.document.getElementsByTagName('head')[0].appendChild(elm);\n\n  }\n\n  /*\n  _checkAndStartTrigger(){\n      this.iframe_content = this.iframe.frameRef.contentWindow;\n    // if(this.iframe_content.document){\n      this._inject_element('link',   {href:'/CTAT/CTAT.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('link',   {href:'/CTAT/normalize.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('link',   {href:'/CTAT/front-end.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/jquery.min.js\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/nools.js\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/ctat.min.js\"})\n      \n      window.setTimeout(() => {\n        this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/ctatloader.js\"})\n        this._triggerWhenInitialized()      \n      }, 100);\n      \n    // }else{\n    //   window.setTimeout(() => {this._checkAndStartTrigger()}, 200);\n    // }\n    \n    \n  }*/\n\n  _triggerWhenInitialized(){\n    console.log(\"TRIGGER WHEN INITIALIZED\")\n    this.iframe_content = this.iframe.frameRef.contentWindow;\n    const iframe_content = this.iframe_content\n\n    if(typeof iframe_content.CTAT == \"undefined\" || iframe_content.CTAT == null ||\n      typeof iframe_content.CTATCommShell == \"undefined\" || iframe_content.CTATCommShell == null || \n      typeof iframe_content.CTATCommShell.commShell == \"undefined\" || iframe_content.CTATCommShell.commShell == null ||\n      typeof iframe_content.CTAT.ToolTutor == \"undefined\" || iframe_content.CTAT.ToolTutor == null ||\n      typeof iframe_content.CTAT.ToolTutor.tutor == \"undefined\" || iframe_content.CTAT.ToolTutor.tutor == null){\n        // term_print('\\x1b[0;30;47m' + \"BLEHH1\" +  '\\x1b[0m');\n        console.log(\"BLEHH1\")\n        window.setTimeout(() => {this._triggerWhenInitialized()}, 500);\n        return;       \n    }\n    this.graph = iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n    this.commLibrary = iframe_content.CTATCommShell.commShell.getCommLibrary();\n    this.hasConfig = iframe_content.CTATConfiguration != undefined\n    \n\n\n    // console.log(\"graph\")\n    // console.log(graph)\n    // console.log(\"comm\")\n    // console.log(commLibrary)\n    // console.log(hasConfig)\n    \n\n    if((this.graph || this.interactive) && this.commLibrary && this.hasConfig){\n      this._inject_element('link',{href:'/css/AL_colors.css',type: \"text/css\",rel: \"stylesheet\"})\n      // var link = iframe_content.document.createElement('link');\n      // link.setAttribute('rel', 'stylesheet');\n      // link.setAttribute('type', 'text/css');\n      // // link.setAttribute('href', \"../\".repeat(working_dir.split('/').length+1) + 'css/AL_colors.css');\n      // link.setAttribute('href', document.location.origin + '/css/AL_colors.css');\n      // iframe_content.document.getElementsByTagName('head')[0].appendChild(link);\n\n      //Gets rid of annyoing sai printout on every call to sendXML\n      iframe_content.flashVars.setParams({\"deliverymode\" : \"bleehhhh\"})\n\n      //Grab these event constants from CTAT\n      this.CTAT_CORRECT = iframe_content.CTAT.Component.Base.Tutorable.EventType.correct;\n      this.CTAT_INCORRECT = iframe_content.CTAT.Component.Base.Tutorable.EventType.incorrect;\n      this.CTAT_ACTION = iframe_content.CTAT.Component.Base.Tutorable.EventType.action;    \n\n      console.log(\"INITIALIZED!\")\n      this.init_callback(this)\n    }else{\n      // term_print('\\x1b[0;30;47m' + \"BLEHH2\" + '\\x1b[0m');\n      console.log(\"BLEHH2\")\n      window.setTimeout(() => {this._triggerWhenInitialized()}, 500);\n    }\n  }\n\n  handle_user_set_state(evt){\n    var sai = evt.detail.sai;\n    var sel = sai.getSelection()\n\n    // var elm = );\n    // elm = this.iframe_content.document.getElementById(sai.getSelection());\n    // console.log(sai.getInput())\n    if(sai.getInput() != \"\"){\n        this.colorElement(sel,\"START_STATE\")\n        //elm.firstChild.classList.add(\"CTAT--AL_start\");\n        this.start_state_elements.push(sel);\n    }else{\n        // elm.firstChild.classList.remove(\"CTAT--AL_start\");\n        this.colorElement(sel,\"DEFAULT\")\n        if(this.start_state_elements.includes(sel)){\n            this.start_state_elements.remove(sel);\n        }\n    }\n    \n  }\n  \n  enterSetStartStateMode(){\n    this.start_state_elements = []\n    this.iframe_content.document.addEventListener(this.CTAT_ACTION, this.handle_user_set_state); \n  }\n\n  exitSetStartStateMode(){\n    this.iframe_content.document.removeEventListener(this.CTAT_ACTION, this.handle_user_set_state); \n\n    console.log(\"START DONE\")\n    for (var i in this.start_state_elements){\n        var sel = this.start_state_elements[i]\n        var elm = this.iframe_content.document.getElementById(sel);\n        if(elm.firstChild.value){\n            this.lockElement(sel)\n            // elm.setAttribute(\"data-ctat-enabled\",\"false\")\n            // elm.firstChild.setAttribute(\"contentEditable\",\"false\")\n            // elm.firstChild.disabled = true;    \n        }\n        this.colorElement(sel,\"DEFAULT\")\n        // elm.firstChild.classList.remove(\"CTAT--AL_start\");\n        // console.log(\"BOOP\",elm);\n    }\n    //Take away focus from whatever is there so it isn't treated as an example\n    // document.activeElement.blur();\n    // console.log(\"STAT\",get_state())\n    this.start_state_history.push(this.get_state());\n    // last_action = proposed_SAI = null;\n  }\n  \n  handleUserExample(evt){\n    this.handleUserInput(evt,\"EXAMPLE\")\n  }\n  handleUserAttempt(evt){\n    this.handleUserInput(evt,\"ATTEMPT\")\n  }\n\n  handleUserInput(evt,type){\n    var sai = evt.detail.sai\n    var sel = sai.getSelection();\n\n    var elm = this.iframe_content.document.getElementById(sel)\n    if(elm.firstChild.contentEditable == \"false\"){\n        console.log(\"BAIL\")\n        return\n    }\n\n    var sai = {\n        selection: sai.getSelection(),\n        action: sai.getAction(),\n        inputs: {value: sai.getInput()},\n    };\n\n    this.lockElement(sel)\n    this.colorElement(sel,type)\n\n\n    // if(this.state.mode == \"train\"){\n    if(type == \"EXAMPLE\"){\n      this.props.interactions_service.send({\n        type : \"DEMONSTRATE\",\n        data : {...sai,reward : 1},\n      });\n    }else if (type == \"ATTEMPT\"){\n      console.log(\"SEND ATTEMPT\", sai)\n      this.props.interactions_service.send({\n        type : \"ATTEMPT\",\n        data : {...sai},\n      });\n    }else{\n      throw \"uknown type given\"\n    }\n    // }else if(this.state.mode == \"tutor\"){\n    //   this.props.interactions_service.send({\n    //     type : \"ATTEMPT\",\n    //     data : {...sai,reward : 1},\n    //   });\n    // }\n  }\n\n\n  displayCorrectness(context,event){\n    var sai = context.staged_SAI\n    var sel = sai.selection\n    if(event.data == 1){\n      this.colorElement(sel,\"CORRECT\")\n    }else{\n      this.colorElement(sel,\"INCORRECT\")\n      this.unlockElement(sel)\n    }\n  }\n\n  _done_clicked_example(evt){\n    this.handleUserExample({detail:{sai:new this.iframe_content.CTATSAI(\"done\", \"ButtonPressed\", \"-1\")}})\n  }\n\n  enterFeedbackMode(){\n    this.iframe_content.document.addEventListener(this.CTAT_ACTION, this.handleUserExample); \n    this.iframe_content.document.getElementById(\"done\").addEventListener(\"click\", this._done_clicked_example); \n  }\n\n  exitFeedbackMode(){\n    this.iframe_content.document.removeEventListener(this.CTAT_ACTION, this.handleUserExample); \n    this.iframe_content.document.getElementById(\"done\").removeEventListener(\"click\", this._done_clicked_example); \n  }\n\n  _done_clicked_attempt(evt){\n    this.handleUserAttempt({detail:{sai:new this.iframe_content.CTATSAI(\"done\", \"ButtonPressed\", \"-1\")}})\n  }\n\n  enterTutoringMode(){\n    this.iframe_content.document.addEventListener(this.CTAT_ACTION, this.handleUserAttempt); \n    this.iframe_content.document.getElementById(\"done\").addEventListener(\"click\", this._done_clicked_attempt); \n  }\n\n  exitTutoringMode(){\n    this.iframe_content.document.removeEventListener(this.CTAT_ACTION, this.handleUserAttempt); \n    this.iframe_content.document.getElementById(\"done\").removeEventListener(\"click\", this._done_clicked_attempt); \n  }\n\n  handle_foci_select(evt){\n    console.log(\"FOCI SELECT!\")\n    for(var ele of evt.path){\n        console.log(\"EELE\", ele)\n        if(ele.classList != undefined && ele.classList.contains(\"CTATComponent\")){\n            var indx = this.current_foci.indexOf(ele)\n            // console.log(current_foci)\n            if(indx == -1){\n                this.current_foci.push(ele)\n                this.highlightElement(ele.id,1)\n                // ele.classList.add(\"CTAT--AL_highlight1\");\n            }else{\n                this.current_foci.splice(indx,1)\n                // ele.classList.remove(\"CTAT--AL_highlight1\");\n                this.unhighlightElement(ele.id)\n            }\n            console.log(this.current_foci)\n\n            break\n        }    \n    }\n    \n  }\n\n  enterFociMode(){\n    console.log(\"FOCI START!\")\n    this.unhighlightAll()\n    this.current_foci = []\n    this.iframe_content.document.addEventListener(\"click\", this.handle_foci_select)\n  }\n\n  get_current_foci(){\n    if(this.current_foci){\n      return this.current_foci.map((elm) => elm.id)\n    }else{\n      return []\n    }\n  }\n\n  exitFociMode(){\n    this.unhighlightAll();\n    console.log(\"FOCI DONE!\")\n    // var foci_of_attention = [];\n    // for(var ele of this.current_foci){\n    //     // ele.classList.remove(\"CTAT--AL_highlight1\");\n    //     this.colorElement(ele.id)\n    //     // foci_of_attention.push(ele.id);\n    // }\n    // console.log(foci_of_attention)\n    // current_sai_data.foci_of_attention = foci_of_attention;\n    this.current_foci = []\n    this.iframe_content.document.removeEventListener(\"click\", this.handle_foci_select)\n\n  }\n\n  //---------- Xstate API with promises ----------------\n  attemptStagedSAI(context,event){\n    const promise = new Promise((resolve, reject) => {\n      // try {\n        const sai = context.staged_SAI;\n        var currentElement = this.iframe_content.document.getElementById(sai.selection);\n        const CTAT_CORRECT = this.CTAT_CORRECT\n        const CTAT_INCORRECT = this.CTAT_INCORRECT\n\n        function handle_ctat_feedback(evt){\n          console.log(\"EVENT\", evt.detail.sai.getTransactionID())\n          console.log(\"EVENT\", evt.detail.sai.getTransactionID())\n          currentElement.removeEventListener(CTAT_CORRECT, handle_ctat_feedback);\n          currentElement.removeEventListener(CTAT_INCORRECT, handle_ctat_feedback);\n          resolve({...sai,reward: evt.type == CTAT_CORRECT ? 1 : -1})            \n        }\n\n        currentElement.addEventListener(CTAT_CORRECT, handle_ctat_feedback);\n        currentElement.addEventListener(CTAT_INCORRECT, handle_ctat_feedback);    \n        this.applySAI(sai)  \n      // }catch(err){\n      //   reject(err)\n      // }\n      \n\n    });\n    return promise\n  }\n  applyNextExample(context,event){\n    const promise = new Promise((resolve, reject) => {\n      // try{\n        this.applyHint()\n        var sai = this.getDefaultSAI()\n        this.colorElement(sai.selection, \"EXAMPLE\")\n        this.applySAI(sai)    \n        resolve({...sai, reward : 1})\n    //   }catch(err){\n    //     reject(err)\n    //   }\n    });\n    return promise\n  }\n  //----------------------------------------------------\n\n\n  applySAI(sai){\n    var sel_elm = this.iframe_content.document.getElementById(sai.selection)\n    if((sel_elm[\"data-ctat-enabled\"] || 'true') == 'false'){\n      //Force incorrect if try to edit uneditaable\n        var incorrect_event = new CustomEvent(this.CTAT_INCORRECT, {detail:{'sai':sai, 'component':sel_elm}, bubbles:true, cancelable:true});\n        sel_elm.dispatchEvent(incorrect_event);\n    }\n\n\n    if(sai.action == \"ButtonPressed\"){\n        sai.inputs = {\"value\" : -1}\n    }\n\n    // last_action = sai\n    const CTATSAI = this.iframe_content.CTATSAI\n    var sai_obj = new CTATSAI(sai.selection, sai.action,sai.inputs[\"value\"]);\n    this.iframe_content.CTATCommShell.commShell.processComponentAction(sai_obj,true)\n  }\n\n\n\n\n  lockElement(name){\n    var comp = this.iframe_content.CTATShellTools.findComponent(name)[0];\n    comp.setEnabled(false);\n  }\n\n  unlockElement(name){\n    var comp = this.iframe_content.CTATShellTools.findComponent(name)[0];\n    comp.setEnabled(true);\n  }\n\n  colorElement(name,type){\n    var elm = this.iframe_content.document.getElementById(name);\n    // if(type == \"DEFAULT\"){\n    //   for (const [key, value] of Object.entries(this.color_class_map)) {\n    //     if(elm.firstElementChild.classList.contains(value)){\n    //       elm.firstElementChild.classList.remove(value);     \n    //     }\n    //   }\n    // }else{\n      // this.colorElement(name,\"DEFAULT\")\n    if(elm && elm.firstElementChild){\n      elm.firstElementChild.setAttribute(\"class\", this.color_class_map[type]); \n    }\n      // elm.firstElementChild.classList.add(this.color_class_map[type]); \n  //   }\n  }\n\n  // highlightSAI(sai){\n\n  //   if(sai.mapping){\n  //       Object.entries(sai.mapping).forEach(function(v,index){\n  //           const [var_str, elem_str] = v\n  //           var colorIndex = 1\n  //           if(var_str != \"?sel\"){\n  //               colorIndex = 2 + ((index-1) % (this.where_colors.length-1));\n  //               console.log(colorIndex)\n  //           }\n  //           // elm = this.iframe_content.document.getElementById(elem_str.replace('?ele-',\"\"));\n  //           this.highlightElement(elem_str,colorIndex)\n  //       });\n  //   }else{\n  //     alert(\"IDK WHAT THIS IS\")\n  //       // this.highlighted_elements.push(elm.firstElementChild.id)\n  //       // elm.firstElementChild.classList.add(\"CTAT--AL_highlight1\")\n  //   }\n  // }\n\n  highlightElement(name,colorIndex=1){\n    this.unhighlightElement(name)\n    var elm = this.iframe_content.document.getElementById(name.replace('?ele-',\"\"));\n    elm.firstElementChild.classList.add(\"CTAT--AL_highlight\"+colorIndex)\n    this.highlighted_elements.push(name)\n    // console.log(\"H\", this.highlighted_elements)\n  }\n\n  unhighlightElement(name){\n\n    if(this.highlighted_elements.includes(name)){\n\n      var elm = this.iframe_content.document.getElementById(name.replace('?ele-',\"\"));\n      var before = elm.firstElementChild.classList.toString()\n      for (var i = 1; i <= this.where_colors.length; i++) { \n          var c = \"CTAT--AL_highlight\"+i;\n          // console.log(c)\n          if(elm.firstElementChild.classList.contains(c)) {\n            elm.firstElementChild.classList.remove(c)\n          }\n      }\n      var after = elm.firstElementChild.classList.toString()\n      // console.log(\"BEF-AFT:\", before,after)\n      var index = this.highlighted_elements.indexOf(name)\n      if(index > -1){\n        this.highlighted_elements.splice(index,1)  \n      }\n      \n    }\n  }\n\n  clearElement(name){\n    var elm = this.iframe_content.document.getElementById(name);    \n    elm.firstElementChild.value = \"\";\n  }\n\n  highlightSAI(sai){\n    if(sai.mapping){\n        var index = 0\n        for (var var_str in sai.mapping){\n            var elem_str = sai.mapping[var_str]\n            var colorIndex = 1\n            if(var_str != \"?sel\"){\n                colorIndex = 2 + ((index-1) % (this.where_colors.length-1));\n                // console.log(colorIndex)\n            }\n            // elm = this.iframe_content.document.getElementById(elem_str.replace('?ele-',\"\"));\n            this.highlightElement(elem_str,colorIndex)\n            index++\n        }\n    }else{\n      alert(\"IDK WHAT THIS IS\")\n        // this.highlighted_elements.push(elm.firstElementChild.id)\n        // elm.firstElementChild.classList.add(\"CTAT--AL_highlight1\")\n    }\n  }\n\n  unhighlightAll(){\n    // console.log(\"HIGHLIGHTED_/\", this.highlighted_elements)\n    for(var elem_str of [...this.highlighted_elements]){\n      this.unhighlightElement(elem_str);\n    }\n  }\n\n  getDefaultSAI(){\n    var sai = this.graph.getExampleTracer().getBestNextLink().getDefaultSAI();\n    sai = {\n      selection: sai.getSelection(),\n      action: sai.getAction(),\n      inputs: {value: sai.getInput()},\n    }\n    return sai\n  }\n\n  clearProposedSAI(){\n    if(this.proposed_SAI){\n        this.clearElement(this.proposed_SAI.selection)\n        this.unlockElement(this.proposed_SAI.selection.replace('?ele-',\"\"))\n        this.unhighlightAll()\n        this.proposed_SAI = null;\n    }\n  }\n\n  proposeSAI(sai){\n    // console.log(\"EVDA\", event.data)\n    // var sai = event.data\n    this.clearProposedSAI()\n    this.proposed_SAI = {...sai}\n    this.highlightSAI(sai)\n    this.stageSAI(sai)\n  }\n\n  stageSAI(sai){\n    var comp = this.iframe_content.CTATShellTools.findComponent(sai.selection)[0];\n    var sai_obj =  new this.iframe_content.CTATSAI(sai.selection, sai.action,sai.inputs[\"value\"]);\n    comp.executeSAI(sai_obj);\n    this.lockElement(sai.selection)\n  }\n\n  confirmProposedSAI(){\n    if(this.proposed_SAI){\n      this.unhighlightAll()\n      this.proposed_SAI = null  \n    }\n  }\n\n  applyHint(){\n  \n    var message = \"<message><properties>\" +\n                    \"<MessageType>InterfaceAction</MessageType>\" +\n                    \"<Selection><value>hint</value></Selection>\" +\n                    \"<Action><value>ButtonPressed</value></Action>\" +\n                    \"<Input><value><![CDATA[hint request]]></value></Input>\" +\n                \"</properties></message>\";\n    // console.log(\"MESSAGE\",message);\n    this.commLibrary.sendXML(message);   \n}\n\n  get_state({encode_relative=true,strip_offsets=true, use_offsets=true, use_class=true, use_id=true,append_ele=true}={}){\n    var relative_pos_cache = this.relative_pos_cache\n    var HTML_PATH = this.HTML_PATH\n    var state_array = this.iframe_content.$('div').toArray();\n    // state_array.push({current_task: current_task});\n\n    var state_json = {}\n    var count = 0;\n    $.each(state_array, function(idx, element){\n\n      obj = {}\n      if(element.classList.contains(\"CTATComponent\")\n             && !element.classList.contains(\"CTATTable\")) {\n            // if(obj[\"className\"] == \"CTATTextField\") {continue;} //Skip table objects and just use cells\n            if(element.classList[0] != \"CTATTextField\") { //Skip text fields\n            if(use_class){obj[\"type\"] = element.classList[0];}\n                if(use_offsets){\n                obj[\"offsetParent\"] = element.offsetParent.dataset.silexId;\n                obj[\"offsetLeft\"] = element.offsetLeft;\n                    obj[\"offsetTop\"] = element.offsetTop;\n                    obj[\"offsetWidth\"] = element.offsetWidth;\n                obj[\"offsetHeight\"] = element.offsetHeight;\n                }\n\n\n            if(use_id){obj[\"id\"] = element.id;}\n\n            if(checkTypes(element, [\"CTATTextInput\",\"CTATComboBox\",\"CTATTable--cell\"])){\n              obj[\"value\"] = element.firstElementChild.value;\n              obj[\"contentEditable\"] = (element.firstElementChild.contentEditable == 'true');\n              // obj[\"name\"] = element.id\n            }\n            // if(checkTypes(element, [\"CTATTextField\", \"CTATComboBox\"])){\n            //  obj[\"textContent\"] = element.textContent;\n            // }\n\n            if(checkTypes(element, [\"CTATComboBox\"])){\n              // if(element.options){\n                //Probably not the best\n              var options = element.firstElementChild.options;\n              var temp = [];\n              for (var i = 0; i < options.length; i++) {\n                temp.push(options[i].text);\n              }\n              obj[\"options\"] = Object.assign({}, temp)\n\n              // }\n              \n            }\n            let name = (append_ele ? \"?ele-\":\"\") + element.id\n                // console.log(name,append_ele)\n            state_json[name] = obj;\n              count++;\n            }\n      }\n        // add question marks for apprentice\n        // element = jQuery.extend({}, element);\n        // element = jQuery.data(element);\n        // if(element && !jQuery.isEmptyObject(element) && element.CTATComponent){\n        //  console.log(\"ELEEMENT\", element);\n        //  // element = jQuery.data(element.CTATComponent);\n        //  element = element.CTATComponent;\n        //  // if(element.CTATComponent){\n        //    // element.CTATComponent = jQuery.data(element.CTATComponent);\n        //  // }\n        //  console.log(\"KEY \", idx, element.className);\n         //  state_json[\"?ele-\" + idx] = element;\n         //  count++;\n        // }\n        \n        // element.component = jQuery.data(element.component);\n        \n\n        // if(element.hasAttribute(\"removeData\") ){\n        //  element.removeData();\n        //  console.log(\"WOOOPS\");\n        // }\n\n    });\n\n\n    \n    // Gets lists of elements that are to the left, right and above the current element\n    if(encode_relative){\n        const elm_list = Object.entries(state_json);\n        // console.log(elm_list);\n\n        var rel_objs;\n        if(! (HTML_PATH in relative_pos_cache) ){\n            rel_objs = {};\n            for (var i = 0; i < elm_list.length; i++) {\n                // console.log(elm_list[i][0])\n                rel_objs[elm_list[i][0]] = {\n                    \"to_left\" : [],\n                    \"to_right\" : [],\n                    \"above\" : [],\n                    \"below\" : []\n                }\n            }\n\n            for (var i = 0; i < elm_list.length; i++) {\n                for (var j = 0; j < elm_list.length; j++) {\n                    if(i != j){\n                        var [a_n, a_obj] = elm_list[i];\n                        var [b_n, b_obj] = elm_list[j];\n                        if(a_obj.offsetTop > b_obj.offsetTop \n                            && a_obj.offsetLeft < b_obj.offsetLeft + b_obj.offsetWidth\n                            && a_obj.offsetLeft + a_obj.offsetWidth > b_obj.offsetLeft){\n\n                            var dist = a_obj.offsetTop-b_obj.offsetTop;\n                            rel_objs[a_n][\"above\"].push([b_n, dist]);\n                            rel_objs[b_n][\"below\"].push([a_n, dist]);\n                        }\n                        if(a_obj.offsetLeft < b_obj.offsetLeft \n                            && a_obj.offsetTop + a_obj.offsetHeight > b_obj.offsetTop\n                            && a_obj.offsetTop < b_obj.offsetTop + b_obj.offsetHeight){\n\n                            var dist = b_obj.offsetLeft-a_obj.offsetLeft;\n                            rel_objs[a_n][\"to_right\"].push([b_n, dist]);\n                            rel_objs[b_n][\"to_left\"].push([a_n, dist]);\n\n                            // console.log(a_n,b_n,dist)\n\n                        }\n                    }\n                }\n            }\n\n            var grab1st = function(x){return x[0];};\n            var compare2nd = function(x,y){return x[1] - y[1];};\n            var grabN = function(x,n){\n                let out = []\n                for (var i = 0; i < n; i++){\n                    if(i < x.length){\n                        out.push(x[i])\n                    }else{\n                        out.push(null)\n                    }\n                }\n                return out\n            }\n            for (var i = 0; i < elm_list.length; i++) {\n                var rel_obj = rel_objs[elm_list[i][0]];\n                // rel_obj[\"below\"] = rel_obj[\"below\"].sort(compare2nd).map(grab1st).join(' '); \n                // rel_obj[\"above\"] = rel_obj[\"above\"].sort(compare2nd).map(grab1st).join(' '); \n                // rel_obj[\"to_right\"] = rel_obj[\"to_right\"].sort(compare2nd).map(grab1st).join(' '); \n                // rel_obj[\"to_left\"] = rel_obj[\"to_left\"].sort(compare2nd).map(grab1st).join(' '); \n                // console.log(elm_list[i], rel_obj[\"to_left\"].sort(compare2nd))\n                rel_obj[\"below\"] = rel_obj[\"below\"].sort(compare2nd).map(grab1st)[0] || \"\";\n                rel_obj[\"above\"] = rel_obj[\"above\"].sort(compare2nd).map(grab1st)[0] || \"\";\n                rel_obj[\"to_right\"] = rel_obj[\"to_right\"].sort(compare2nd).map(grab1st)[0] || \"\";\n                rel_obj[\"to_left\"] = rel_obj[\"to_left\"].sort(compare2nd).map(grab1st)[0] || \"\";\n            \n                // rel_obj[\"below\"] = grabN(rel_obj[\"below\"].sort(compare2nd).map(grab1st),2);\n                // rel_obj[\"above\"] = grabN(rel_obj[\"above\"].sort(compare2nd).map(grab1st),2);\n                // rel_obj[\"to_right\"] = grabN(rel_obj[\"to_right\"].sort(compare2nd).map(grab1st),2);\n                // rel_obj[\"to_left\"] = grabN(rel_obj[\"to_left\"].sort(compare2nd).map(grab1st),2);\n            }\n            \n            // console.log(rel_objs)\n            relative_pos_cache[HTML_PATH] = rel_objs;\n        }else{\n            rel_objs = relative_pos_cache[HTML_PATH];\n        }\n\n        for (var i = 0; i < elm_list.length; i++) {\n            var obj = state_json[elm_list[i][0]];\n            var rel_obj = rel_objs[elm_list[i][0]];\n            // console.log(rel_obj)\n            // console.log(elm_list[i][0])\n            // console.log(relative_pos_cache[HTML_PATH])\n\n            obj[\"below\"] = rel_obj[\"below\"];\n            obj[\"above\"] = rel_obj[\"above\"];\n            obj[\"to_right\"] = rel_obj[\"to_right\"];\n            obj[\"to_left\"] = rel_obj[\"to_left\"];\n            if(strip_offsets){\n                delete obj[\"offsetTop\"];\n                delete obj[\"offsetLeft\"];\n                delete obj[\"offsetWidth\"];\n                delete obj[\"offsetHeight\"];\n            }\n\n            state_json[elm_list[i][0]] = obj;\n        }\n        \n\n\n    }\n\n    console.log(\"STATE JSON\", state_json);\n    return state_json;\n\n}\n\n\n\n  // state_update(state){\n\n  // }\n\n  // webview_loaded(message){\n  //   console.log(message)\n  //   var d = message.nativeEvent.data;\n  //   console.log(\"document&:\",d)\n  //   console.log(document.getElementsByClassName('background-initial'))\n  //   // window.document.domain = \"http://0.0.0.0:8000\"\n  // }\n\n  // setRef = webview => {\n  //   this.ctat_webview = webview; \n  // }\n  render() {\n    return (\n      <WebView\n            //title=\"hey\"\n            ///*ref={function(webview) {window.ctat_webview = webview;*/}\n            //                        this.iframe_content = webview.frameRef.contentWindow;\n            //                        console.log(\"THIS\",this)\n            //                        // this.graph = this.iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n             //                       console.log(\"MOOP\",webview)}}\n            ref={this.ctat_webview}\n            // style={{ height: 700, width: 400 }}\n            originWhitelist={['*']}\n            // source={{\"uri\": \"http://0.0.0.0:8000/HTML/fraction_arithmetic.html?question_file=../mass_production/mass_production_brds/AD 5_9_plus_3_7.brd\"}}\n            source={ this.state.source}\n            onLoad={this.state.onLoad}\n            // source={{\"html\": \"<!DOCTYPE html><html><head></head><body> HERE IS THE TUTOR... ARE YOU LEARNING YET? </body></html>\"}}\n            // source={{\"html\": \"<? echo file_get_contents('http://0.0.0.0:8000/HTML/fraction_arithmetic.html'); ?>\"}}\n            // injectedJavaScript={\"window.booger = document\"}\n            // onMessage={this.webview_loaded}\n\n      />\n    );\n  }\n  \n}\n\nconst LOAD_SCREEN = '<!DOCTYPE html> \\\n<html>\\\n<head>\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\\n<style>\\\n.loader {\\\n  border: 16px solid #f3f3f3;\\\n  border-radius: 50%;\\\n  border-top: 16px solid #3498db;\\\n  width: 120px;\\\n  height: 120px;\\\n  -webkit-animation: spin 2s linear infinite; /* Safari */\\\n  animation: spin 2s linear infinite;\\\n  position: absolute;\\\n  left: 50%;\\\n  top: 50%;\\\n  transform: translate(-50%, -50%);*/\\\n}\\\n\\\n/* Safari */\\\n@-webkit-keyframes spin {\\\n  0% { -webkit-transform: rotate(0deg); }\\\n  100% { -webkit-transform: rotate(360deg); }\\\n}\\\n\\\n@keyframes spin {\\\n  0% { transform: rotate(0deg); }\\\n  100% { transform: rotate(360deg); }\\\n}\\\n</style>\\\n</head>\\\n<body>\\\n\\\n<h2>How To Create A Loader</h2>\\\n\\\n<div class=\"loader\"></div>\\\n\\\n</body>\\\n</html>\\\n'\n\nexport default CTAT_Tutor;","import Svg, {\n  Circle,\n  Ellipse,\n  G,\n  // Text,\n  TSpan,\n  TextPath,\n  Path,\n  Polygon,\n  Polyline,\n  Line,\n  Rect,\n  Use,\n  Image,\n  Symbol,\n  Defs,\n  LinearGradient,\n  RadialGradient,\n  Stop,\n  ClipPath,\n  Pattern,\n  Mask,\n  // Filter,\n  // FEGaussianBlur,\n  // FEOffset,\n  // FEMerge,\n  // FEMergeNode,\n} from 'react-native-svg';\n\n/* Use this if you are using Expo\nimport { Svg } from 'expo';\nconst { Circle, Rect } = Svg;\n*/\n\nimport React from 'react';\nimport {\n  Icon,\n  View,\n  Text,\n  StyleSheet,\n  TouchableHighlight,\n  TouchableWithoutFeedback,\n  Platform//, \n  // WebView\n} from 'react-native';\n\nimport autobind from 'class-autobind';\nimport BezierFit from './c_modules/bezier_fit/bezier_fit'\n\nconst MAX_STROKE_LENGTH = 512\nconst MIN_DIST = 4.0\n// var stroke_id_counter = 0;\n\n\n\n/////\nexport default class StylusTutor extends React.Component {\n  state = {\n      pen_down : false,\n      strokes : {},\n      n_strokes : 0,\n      // mode : \"set_start_state\"\n  }\n\n  constructor(props){\n    super(props);\n    autobind(this)\n\n    this.BezierFit = new BezierFit();\n      this.BezierFit.promise.then(() => {\n        this.fitCurve = this.BezierFit.fitCurve\n        this.groupStrokes = this.BezierFit.groupStrokes\n        this.fitCurve([[1,2],[3,4],[5,6],[7,8]])\n    })\n\n    window.setMode = (mode) => {this.setState({mode : mode })}\n\n    this.where_colors = [  \"darkorchid\",  \"#ff884d\",  \"#52d0e0\", \"#feb201\",  \"#e44161\", \"#ed3eea\", \"#2f85ee\",  \"#562ac6\", \"#cc24cc\"]\n    // this.color_map = {\n    //   \"EXAMPLE\" : \"dodgerblue\",\n    //   \"CORRECT\" : \"limegreen\",\n    //   \"INCORRECT\" : \"red\",\n    //   \"HIGHLIGHT\" : \"darkorchid\",\n    //   \"START_STATE\" : \"darkcyan\",\n    //   \"DEFAULT\" : \"black\"\n    //   };\n    this.mode_to_color = {\n      \"set_start_state\" : \"START_STATE\",\n      \"demonstrate\" : \"EXAMPLE\",\n      \"debug\" : \"gray\"\n    }\n    this.current_foci = [];\n    this.start_state_history = [];\n    this.highlighted_elements = [];\n    // this.getEvaluatable = this.getEvaluatable.bind(this)\n    // this.evaluate = this.evaluate.bind(this)\n    // this.setStartState = this.setStartState.bind(this)\n    // this.undoStroke = this.undoStroke.bind(this)\n    // this.penDown = this.penDown.bind(this)\n    // this.penUp = this.penUp.bind(this)\n    // this.penMove = this.penMove.bind(this)\n\n    // this.setState({\"mode\" : (props.mode || \"set_start_state\")})\n    \n    // this.onStartShouldSetResponder = (e) => true;\n    // this.onMoveShouldSetResponder = (e) => true;\n    // this.onResponderStart = this.penDown.bind(this);\n    // this.onResponderRelease = this.penUp.bind(this);\n    // this.onResponderMove = this.penMove.bind(this);\n    // this.onMouseDown = this.penDown.bind(this);\n    // this.onPress= this.penDown.bind(this);\n    // this.onMouseUp = this.penUp.bind(this);\n    // this.onResponderStart = this.onResponderStart.bind(this);\n    // this.penDown = this.penDown.bind(this);\n    // this.penUp = this.penUp.bind(this);\n\n\n  }\n\n  componentDidMount(){\n    console.log(\"PROPSMODE\", this.props.mode)\n    this.setState({\"mode\" : this.props.mode || null})\n  }\n\n  enterSetStartStateMode(){\n    if(this.state.mode != \"debug\"){\n      this.setState({mode : \"set_start_state\" })  \n    }\n    console.log(\"MODE!\", this.state.mode)\n  }\n\n  exitSetStartStateMode(){\n    let L = this.state.n_strokes+this.state.pen_down\n    let new_strokes = {}\n    for (var i=0; i<L;i++){\n      var stroke = this.state.strokes[i]\n      if(stroke['evaluation'] == \"START_STATE\"){\n        stroke['evaluation'] = \"TUTOR\"\n      }\n      new_strokes[i] = stroke\n    }\n    this.setState({strokes : new_strokes,mode : null })\n  }\n\n\n  enterFeedbackMode(){\n    this.setState({mode : \"feedback\" }) \n  }\n\n  exitFeedbackMode(){\n    this.setState({mode : null })\n  }\n\n  getCurrentFoci(){\n    if(this.current_foci){\n      return this.current_foci.map((elm) => elm.id)\n    }else{\n      return []\n    }\n  }\n\n  enterFociMode(){\n    this.unhighlightAll();\n    this.current_foci = []\n    this.setState({mode : \"foci\" }) \n    \n  }\n\n  exitFociMode(){\n    this.unhighlightAll();\n    this.current_foci = []\n    this.setState({mode : null })\n  }\n\n\n  // get_current_foci(){\n  //   if(this.current_foci){\n  //     return this.current_foci.map((elm) => elm.id);\n  //   }else{\n  //     return []\n  //   }\n  // }\n  // setStartState(){\n  //   let L = this.state.n_strokes+this.state.pen_down\n  //   let new_strokes = {}\n  //   for (var i=0; i<L;i++){\n  //     var stroke = this.state.strokes[i]\n  //     if(stroke['evaluation'] == \"START_STATE\"){\n  //       stroke['evaluation'] = \"TUTOR\"\n  //     }\n  //     new_strokes[i] = stroke\n  //   }\n  //   this.setState({strokes : new_strokes,mode : \"authoring\" })\n\n  // }\n\n  loadProblem(context){\n    //TODO\n  }\n\n  lockElement(name){\n    var stroke = this.state.strokes[name]\n    stroke.locked = true\n    this.setState({strokes :this.state.strokes})\n  }\n\n  unlockElement(name){\n    var stroke = this.state.strokes[name]\n    stroke.locked = false\n    this.setState({strokes :this.state.strokes})\n  }\n\n  colorElement(name,type){\n    alert(\"NOT IMPLEMENTED\")\n    // var stroke = this.state.strokes[name]\n    // stroke.color = this.color_map[type] || type\n    // this.setState({strokes :this.state.strokes})\n  }\n\n  highlightElement(name,colorIndex=0){\n    var stroke = this.state.strokes[name]\n    stroke.highlight = colorIndex;\n    var index = this.highlighted_elements.indexOf(name)\n    if(index == -1){\n      this.highlighted_elements.push(name)  \n    }\n  }\n\n  unhighlightElement(name){\n    var stroke = this.state.strokes[name]\n    stroke.highlight = null\n    var index = this.highlighted_elements.indexOf(name)\n      if(index > -1){\n        this.highlighted_elements.splice(index,1)  \n      }\n  }\n\n  clearElement(name){\n    //TODO\n  }\n\n  highlightSAI(sai){\n    if(sai.mapping){\n      var index = 0\n      for (var var_str in sai.mapping){\n          var elem_str = sai.mapping[var_str]\n          var colorIndex = 0\n          if(var_str != \"?sel\"){\n              colorIndex = 1 + ((index-1) % (this.where_colors.length-1));\n          }\n          this.highlightElement(elem_str,colorIndex)\n          index++\n      }\n    }else{\n      alert(\"IDK WHAT THIS IS\")\n    }\n  }\n  \n\n  unhighlightAll(){\n    for(var elem_str of [...this.highlighted_elements]){\n      this.unhighlightElement(elem_str);\n    }\n  }\n\n  getState(){\n    //TODO\n  }\n\n  clearProposedSAI(){\n    if(this.proposed_SAI){\n        this.clearElement(this.proposed_SAI.selection)\n        this.unlockElement(this.proposed_SAI.selection.replace('?ele-',\"\"))\n        this.unhighlightAll()\n        this.proposed_SAI = null;\n    }\n  }\n\n  proposeSAI(sai){\n    this.clearProposedSAI()\n    this.proposed_SAI = {...sai}\n    this.highlightSAI(sai)\n    this.stageSAI(sai)\n  }\n\n  stageSAI(sai){\n    //TODO\n  }\n\n  confirmProposedSAI(){\n    if(this.proposed_SAI){\n      this.unhighlightAll()\n      this.proposed_SAI = null  \n    }\n  }\n\n\n  penDown(e){\n    if(this.state.mode == \"foci\"){\n      this.mouseDown(e)\n      return\n    }\n    console.log(\"HERE\",typeof(e.target.className),e.target.className.baseVal == \"svg_canvas\" || false)\n    console.log(\"DOWN\")\n    if(e.target.className.baseVal == \"svg_canvas\" || e.target.parentNode.className.baseVal == \"svg_canvas\"){\n      var strokes = this.state.strokes\n      var L = Object.keys(strokes).length\n      strokes[L] = {\"id\" : L}\n      strokes[L].points_str = e.clientX.toString()+\",\"+e.clientY.toString()\n      strokes[L].points = [[e.clientX,e.clientY]]\n      strokes[L].bounds = {\"minY\": e.clientY, \"maxY\":e.clientY, \"minX\":e.clientX, \"maxX\" :e.clientX }\n      console.log(\"MODE\",this.state.mode)\n      if(this.state.mode == \"set_start_state\"){\n        strokes[L]['evaluation'] = \"START_STATE\" \n      }else{\n        strokes[L]['evaluation'] = \"ATTEMPT\" \n      }\n      // strokes.push()\n      this.setState({pen_down : true,strokes:strokes});\n    }\n  }\n\n  penUp(e){\n    if(this.state.mode == \"foci\"){\n      this.mouseUp(e)\n      return\n    }\n    console.log(\"UP\")\n    if(this.state.pen_down){\n      this.setState({pen_down : false,n_strokes: this.state.n_strokes+1});\n\n    }\n    var groups = this.groupStrokes(this.state.strokes)\n    this.elements = []\n    const get_min = (key,strokes) => Math.min(...Object.values(strokes).map((stroke)=>stroke.bounds[key])) \n    const get_max = (key,strokes) => Math.max(...Object.values(strokes).map((stroke)=>stroke.bounds[key])) \n    for (var i=0; i < groups.length; i++){\n      var elm = {}\n\n      elm.strokes = groups[i].map((indx)=>this.state.strokes[indx])\n      console.log(\"CLOOOO\",elm.strokes,Object.values(elm.strokes))\n      console.log(\"CLOOOO\",Object.values(elm.strokes).map((stroke)=>stroke.bounds[\"minX\"]))\n      elm.bounds = {minX: get_min(\"minX\",elm.strokes),\n                    maxX: get_max(\"maxX\",elm.strokes),\n                    minY: get_min(\"minY\",elm.strokes),\n                    maxY: get_max(\"maxY\",elm.strokes)}\n      this.elements.push(elm);\n    }\n    console.log(this.groupStrokes(this.state.strokes))\n\n  }\n\n  penMove(e){\n    // console.log(e)\n    // var X,Y\n    // console.log(e.type)\n    // if(e.type == \"mousemove\"){\n    //   X,Y = \n    // }\n\n    // console.log(this.state.pen_down)\n    if(this.state.mode == \"foci\"){\n      this.mouseMove(e)\n      return\n    }\n    if(this.state.pen_down){\n      var strokes = this.state.strokes \n      var stroke = strokes[this.state.n_strokes]\n      var p = [e.clientX,e.clientY]\n      var lp = stroke.points[stroke.points.length-1]\n      if(e.clientX < stroke.bounds.minX){stroke.bounds.minX = e.clientX}\n      if(e.clientX > stroke.bounds.maxX){stroke.bounds.maxX = e.clientX}\n      if(e.clientY < stroke.bounds.minY){stroke.bounds.minY = e.clientY}\n      if(e.clientY > stroke.bounds.maxY){stroke.bounds.maxY = e.clientY}\n      // console.log(\"DIST\", (p[0]-lp[0])**2 + (p[1]-lp[1])**2)\n\n      if( (p[0]-lp[0])**2 + (p[1]-lp[1])**2 >= MIN_DIST*MIN_DIST && stroke.points.length < MAX_STROKE_LENGTH){\n        stroke.points.push(p)\n        stroke.points_str += \" \" + e.clientX.toString()+\",\"+e.clientY.toString()\n        stroke.bezier_splines = this.fitCurve(stroke.points)\n\n\n        this.setState({\"strokes\":strokes})\n        // var evt = e.nativeEvent;\n        // console.log(\"BEZ\",stroke.bezier_splines);  \n      }\n    }\n  }\n\n  mouseMove(e){\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    var id = ele ? ele.id : null\n    this.setState({elmUnderPointID : id})\n  }\n\n  mouseDown(e){\n    console.log(\"MOUSE DOWN\")\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    var id = ele ? ele.id : null\n    this.setState({mouseDownElmID : id,\n                    elmUnderPointID : id})\n  }\n\n  mouseUp(e){\n    console.log(\"MOUSE UP\")\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    var id = ele ? ele.id : null\n    if(ele && id == this.state.mouseDownElmID){\n      var indx = this.current_foci.indexOf(ele)\n      if(indx == -1){\n          this.current_foci.push(ele)\n          this.highlightElement(ele.id,0)\n      }else{\n          this.current_foci.splice(indx,1)\n          this.unhighlightElement(ele.id)\n      }\n    }\n    // console.log(this.current_foci)\n    this.setState({mouseDownElmID : null,\n                    elmUnderPointID : id})\n  }\n\n  getElementUnderPoint(x,y,padding=10){\n    var strokeCandidates = []\n    for (let i=0; i<this.state.n_strokes;i++){\n        var stroke = this.state.strokes[i]\n        // console.log(stroke.bounds.minX,stroke.bounds.minY,stroke.bounds.maxX,stroke.bounds.maxY)\n        if(stroke &&\n           x > stroke.bounds.minX-padding && x < stroke.bounds.maxX+padding &&\n           y > stroke.bounds.minY-padding && y < stroke.bounds.maxY+padding){\n          strokeCandidates.push(stroke)\n        }\n    }\n    if(strokeCandidates.length == 0){return null};\n    var minDist = Number.MAX_VALUE;\n    var minStroke;\n    for(let stroke of strokeCandidates){\n      for(let i=0; i<stroke.points.length;i++){\n        let p = stroke.points[i]\n        var d = (x-p[0])**2 + (y-p[1])**2\n        if(d < minDist){\n          minDist = d\n          minStroke = stroke\n        }\n      }\n    }\n    return minStroke\n\n  }\n\n  undoStroke(e){\n    const strokes = this.state.strokes\n    if(this.state.n_strokes > 0){\n      const last_ev = strokes[this.state.n_strokes-1]['evaluation']\n      if(last_ev == \"INCORRECT\" || last_ev == \"ATTEMPT\" || last_ev == \"START_STATE\"){\n        delete strokes[this.state.n_strokes-1]\n        this.setState({\"strokes\" : strokes, \"n_strokes\" : this.state.n_strokes-1})\n      }\n    }\n\n  }\n\n  getEvaluatable(){\n    let i=0;\n    let L = this.state.n_strokes+this.state.pen_down\n    for (; i<L;i++){\n      let ev = this.state.strokes[i]['evaluation'];\n      if(ev == \"ATTEMPT\" || ev == \"INCORRECT\"){\n          break\n      }\n    }\n    console.log(\"hee\", i)\n    let out = {}\n    for (; i<L;i++){\n      out[i] = this.state.strokes[i]\n    }\n\n    return out\n  }\n\n  evaluate(){\n    let ev_strokes = {};\n    if(this.props.evaluate){\n      ev_strokes = this.props.evaluate(this.getEvaluatable())\n    }else{\n      ev_strokes = this.getEvaluatable()\n      console.log(\"bleep\", ev_strokes)\n      // for (let i=0; i<ev_strokes.length;i++){\n      for(var i in ev_strokes){\n        ev_strokes[i]['evaluation'] = \"INCORRECT\"\n      }\n    }\n    console.log(\"bloop\", ev_strokes)\n    this.setState({strokes: {...this.state.strokes,...ev_strokes}})\n  }\n\n  // resolveCursor(mode,elmUnderPointID){\n    \n    \n  // }\n  // onStartShouldSetResponder (e) {\n  //   return true;\n  // }\n\n  // onMoveShouldSetResponder(e) {\n  //   return true;\n  // }\n\n\n  \n\n\n\n\n\n  // onResponderMove(e) {\n  //   // console.log(e)\n    \n    \n  // }\n\n\n  render() {\n    let svg_content = []\n    // svg_content.push( <Circle cx={300} cy={200} r=\"50\" fill=\"red\" />);\n    for (let i=0; i<this.state.n_strokes+this.state.pen_down;i++){\n\n        var stroke = this.state.strokes[i]\n        // if(this.state.mode != \"debug\"){\n                 \n        // }else{\n        var strokeWidth = this.state.mode == \"debug\" ? \".5\" :(stroke.id == this.state.elmUnderPointID ?  \"4\": \"3\")\n        if(stroke.highlight != null){\n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={this.where_colors[stroke.highlight]}\n            strokeWidth={strokeWidth*3 +1}\n            strokeOpacity={0.15}\n          />);   \n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={this.where_colors[stroke.highlight]}\n            strokeWidth={strokeWidth*2}\n            strokeOpacity={0.4}\n          />);   \n        }\n\n        if(stroke.points.length > 1){\n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={pen_color_map[stroke['evaluation']] || pen_color_map[\"DEFAULT\"]}\n            strokeWidth={strokeWidth}\n          />);   \n        }else{\n          svg_content.push(<Circle\n            cx= {stroke.points[0][0]}\n            cy= {stroke.points[0][1]}\n            r={strokeWidth}\n            fill = {pen_color_map[stroke['evaluation']] || pen_color_map[\"DEFAULT\"]}\n          />);   \n        }\n        \n        // var curve_str = \"\";\n        if(this.state.mode == \"debug\"){\n          var splines = stroke['bezier_splines'] || [];\n          var circles = []\n          for (let j=0; j<splines.length;j++){\n            var b = splines[j];\n          // for (const b of splines){\n            var curve_str = \"M\"+b[0]+\" \"+b[1]+\" C\"+b[2]+\" \"+b[3]+\" \"+b[4]+\" \" +b[5]+\" \"+b[6]+\" \"+b[7]+\" \";\n            svg_content.push(<Path\n              d= {curve_str}\n              fill=\"none\"\n              stroke={'blue'}\n              strokeWidth=\"3\"\n            />);\n\n            circles.push( <Circle cx={b[0]+\"\"} cy={b[1]+\"\"} r=\"3\" fill=\"red\" />);\n          }\n          \n          var points = stroke['points'] || [];\n          for (let j=0; j<points.length;j++){\n            var p = points[j];\n            circles.push( <Circle cx={p[0]+\"\"} cy={p[1]+\"\"} r=\"1\" fill=\"red\" />);\n          }\n          svg_content = svg_content.concat(circles);   \n\n          var elems = this.elements || [];\n          for (let j=0; j<elems.length;j++){\n             var b = elems[j].bounds;\n              svg_content.push( <Rect x={b.minX} y={b.minY} width={b.maxX-b.minX} height={b.maxY-b.minY}\n                                  stroke='orange' strokeWidth=\".5\" fill='none'/> ); \n          }\n        }\n    }\n\n\n\n    let check_button_callback\n    if(this.state.mode == \"set_start_state\"){\n      check_button_callback = this.setStartState\n    }else{\n      check_button_callback = this.evaluate\n    }\n    \n    \n    var cursor;\n    if(this.state.mode == \"foci\"){\n      cursor = this.state.elmUnderPointID == null ? \"default\" : \"pointer\"\n    }else{\n      cursor = cursor_map[this.state.mode] || \"crosshair\"\n    }\n\n    return (\n\n      <TouchableWithoutFeedback\n        /*onStartShouldSetResponder = {(e) => true}\n        onMoveShouldSetResponder = {(e) => true}*/\n        onMouseDown = {this.penDown}\n        onMouseUp = {this.penUp}\n        onMouseLeave = {this.penUp}\n        onMouseMove = {this.penMove}\n        style={{height:\"100%\", width:\"100%\" }}\n        /*onResponderStart = {this.penDown.bind(this)}\n        onResponderRelease = {this.penUp.bind(this)}\n        onResponderMove = {this.penMove.bind(this)}*/\n        >\n      \n      <View\n        style={[\n          StyleSheet.absoluteFill,\n          {  justifyContent: 'center', height:\"100%\", width:\"100%\" },\n        ]}>\n        \n        \n        <Svg className=\"svg_canvas\" style ={{\"cursor\" : cursor}} height=\"100%\" width=\"100%\" >\n         <Defs>\n            {/*<Filter\n                id=\"a\"\n                filterUnits=\"userSpaceOnUse\"\n                x={0}\n                y={0}\n                width={200}\n                height={120}\n            >\n                <FEGaussianBlur\n                    in=\"SourceAlpha\"\n                    stdDeviation={4}\n                    result=\"blur\"\n                />\n                <FEOffset in=\"blur\" dx={4} dy={4} result=\"offsetBlur\" />\n                <FEMerge>\n                    <FEMergeNode in=\"offsetBlur\" />\n                    <FEMergeNode in=\"SourceGraphic\" />\n                </FEMerge>\n            </Filter>*/}\n        </Defs>\n          {svg_content}\n        </Svg>\n\n        {this.state.mode != \"foci\" &&\n          <View>\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.undo_button]}\n              onPress = {this.undoStroke}>\n              <Text style={styles.undo_button_text}>{'\\u21B6'}</Text>\n            </TouchableHighlight>\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.check_button]}\n              onPress = {check_button_callback}>\n              <Text style={styles.check_button_text}>{'\\u2713'}</Text>\n            </TouchableHighlight>\n          </View>\n        }\n\n      </View>\n      </TouchableWithoutFeedback>\n\n      \n    );\n  }\n}\n\nconst pen_color_map = { \n  'DEFAULT' : 'black',\n  'ATTEMPT' : 'slategray',\n  'TUTOR' : 'black',\n  'START_STATE' : 'teal',\n  'CORRECT' : 'limegreen', \n  'INCORRECT' : 'crimson', //Crimson better than red since looks same as limegreen for people w/ deuteranopia \n}\n\nvar cursor_map = {\n    \"debug\" : \"crosshair\",\n    \"foci\" : \"pointer\",\n    \"set_start_state\" : \"crosshair\",\n    null : \"progress\"\n  }\n\nconst styles = StyleSheet.create({\n  circle_buttons: {\n    position : \"absolute\",\n    backgroundColor : \"gray\",\n    borderRadius:60,\n    height:60,\n    width:60,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n    shadowColor: '#000',\n    shadowOffset: { width: 2, height: 2 },\n    shadowOpacity: 0.8,\n    shadowRadius: 2\n  },\n  undo_button: {\n    bottom : 50,\n    right : 120,\n  },\n  undo_button_text: {\n    fontSize: 40\n  },\n  check_button: {\n    bottom : 50,\n    right: 50,\n  },\n  check_button_text: {\n    fontSize: 40\n  }\n\n\n\n})","import c_BezierFit from './build/js_glue';\n\n\nclass BezierFit {\n  constructor(max_stroke_length = 512){\n    this.promise = c_BezierFit().then((Module)=> {\n      console.log(\"Module\", Module); \n\n      var HEAPF64 = Module.HEAPF64;\n      var HEAP32  = Module.HEAP32;\n\n      \n      this.input_ptr = Module._malloc((max_stroke_length * 2)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const input_ptr = this.input_ptr\n\n      \n      this.output_ptr = Module._malloc((max_stroke_length * 2)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const output_ptr = this.output_ptr\n\n      \n      this.ml_ptr = Module._malloc((max_stroke_length * 9)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const ml_ptr = this.ml_ptr\n\n      const input_buffer = new Float64Array(HEAPF64.buffer, input_ptr, max_stroke_length * 2)\n      const output_buffer = new Float64Array(HEAPF64.buffer, output_ptr, max_stroke_length * 2)\n      const ml_buffer = new Float64Array(HEAPF64.buffer, ml_ptr, max_stroke_length * 9)\n\n\n      this.c_module = Module\n      this.fitCurve = (points,error=6.0) => {\n        points = points.flat()\n        var nPts = points.length / 2\n        input_buffer.set(points.flat())\n        var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        var out = []\n        var it = output_buffer.entries()\n        const nxt = () => Math.round(it.next().value[1])\n        for (var i=0; i < n_curves; i++){\n          out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n          // console.log(\"Bezier: \", i, out[i])\n        }\n        return out;\n      }\n\n      this.groupStrokes = (strokes) => {\n        strokes = Object.values(strokes)\n        const len_ptr = Module._malloc(strokes.length*HEAP32.BYTES_PER_ELEMENT);\n        const len_buffer = new Int32Array(HEAP32.buffer, len_ptr, strokes.length);\n        // var total = 0;\n        var lens = [];\n        var points = [];\n        for(var i=0;i < strokes.length;i++){\n          var stroke =strokes[i];\n          // total += stroke.points.length;\n          lens.push(stroke.points.length);\n          points = points.concat(stroke.points);\n        } \n        // console.log(points,lens, strokes.length)\n        len_buffer.set(lens);\n        const stroke_ptr = Module._malloc(2*points.length*HEAPF64.BYTES_PER_ELEMENT);\n        const stroke_buffer = new Float64Array(HEAPF64.buffer, stroke_ptr, points.length*2); \n        stroke_buffer.set(points.flat())\n\n        const out_ptr = Module._malloc(2*strokes.length*HEAP32.BYTES_PER_ELEMENT);\n        const out_buffer = new Int32Array(HEAP32.buffer, out_ptr, 2*strokes.length); \n        var nGroups = Module._c_GroupStrokes(stroke_ptr,len_ptr,strokes.length,out_ptr,.1,.5,50.0);\n        // console.log(\"NGRPS\",nGroups,strokes.length)\n        var out = [];\n        var it = out_buffer.entries()\n        const nxt = () => it.next().value[1]\n        for(var i=0;i < nGroups;i++){\n          var L = nxt();\n          var grp = [];\n          for(var j=0;j < L;j++){\n            grp.push(strokes[nxt()].id)\n          }\n          out.push(grp);\n        }\n        // console.log(\"OUT\", out)\n\n        Module._free(stroke_ptr);\n        Module._free(len_ptr);\n        Module._free(out_ptr);\n        return out;\n        // const len_ptr = Module._malloc(2*total*HEAPF64.BYTES_PER_ELEMENT);\n        // input_buffer.set(points.flat())\n        // var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        // Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        // var out = []\n        // var it = output_buffer.entries()\n        // const nxt = () => Math.round(it.next().value[1])\n        // for (var i=0; i < n_curves; i++){\n        //   out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n        //   // console.log(\"Bezier: \", i, out[i])\n        // }\n        // console.log(out)\n        // return out\n      }\n    });\n  }\n}\n\nexport default BezierFit;\n// const BezierFit = (function () => {\n//   var promise = new Promise((resolve,reject) => {\n//     var JS_Module = {}\n//     c_BezierFit().then(function(Module) {\n//       console.log(\"Module\", Module); \n\n//       var HEAPF64 = Module.HEAPF64;\n\n//       const input_ptr = Module._malloc(1024 * \n//                            HEAPF64.BYTES_PER_ELEMENT); // 1\n\n//       const output_ptr = Module._malloc(1024 * \n//                            HEAPF64.BYTES_PER_ELEMENT); // 1\n\n//       const input_buffer = new Float64Array(HEAPF64.buffer,input_ptr,1024)\n//       const output_buffer = new Float64Array(HEAPF64.buffer,output_ptr,1024)\n\n//       JS_Module.c_module = Module\n//       JS_Module.FitCurve = (points) => {\n//         input_buffer.set(points)\n//         var n_curves = Module._c_FitCurve(input_ptr,3,4.0,output_ptr)\n//         var out = []\n//         var it = output_buffer.entries()\n//         const nxt = () => it.next().value[1]\n//         for (var i=0; i < n_curves; i++){\n//           out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n//           console.log(\"Bezier: \", i, out[i])\n//         }\n//         console.log(out)\n//         return out\n//       }\n//       // sumUp([1.0, 2.0, 3.0, 4.0, 5.0, 6.0])\n//      resolve(JS_Module)\n//     });\n//   })\n//   return promise\n// });\n// export default BezierFit;","/* eslint no-unused-expressions:0 no-restricted-globals:0 */\n\nvar c_BezierFit = (function() {\n  var _scriptDir = '/react_interface/src/tutors/Stylus/c_modules/bezier_fit/build/';\n  \n  return (\nfunction(c_BezierFit) {\n  c_BezierFit = c_BezierFit || {};\n\n// Copyright 2010 The Emscripten Authors.  All rights reserved.\n// Emscripten is available under two separate licenses, the MIT license and the\n// University of Illinois/NCSA Open Source License.  Both these licenses can be\n// found in the LICENSE file.\n\n// The Module object: Our interface to the outside world. We import\n// and export values on it. There are various ways Module can be used:\n// 1. Not defined. We create it here\n// 2. A function parameter, function(Module) { ..generated code.. }\n// 3. pre-run appended it, var Module = {}; ..generated code..\n// 4. External script tag defines var Module.\n// We need to check if Module already exists (e.g. case 3 above).\n// Substitution will be replaced with actual code on later stage of the build,\n// this way Closure Compiler will not mangle it (e.g. case 4. above).\n// Note that if you want to run closure, and also to use Module\n// after the generated code, you will need to define   var Module = {};\n// before the code. Then that object will be used in the code, and you\n// can continue to use Module afterwards as well.\nvar Module = typeof c_BezierFit !== 'undefined' ? c_BezierFit : {};\n\n// --pre-jses are emitted after the Module integration code, so that they can\n// refer to Module (if they choose; they can also define Module)\n// {{PRE_JSES}}\n\n// Sometimes an existing Module object exists with properties\n// meant to overwrite the default module functionality. Here\n// we collect those properties and reapply _after_ we configure\n// the current environment's defaults to avoid having to be so\n// defensive during initialization.\nvar moduleOverrides = {};\nvar key;\nfor (key in Module) {\n  if (Module.hasOwnProperty(key)) {\n    moduleOverrides[key] = Module[key];\n  }\n}\n\nvar arguments_ = [];\nvar thisProgram = './this.program';\nvar quit_ = function(status, toThrow) {\n  throw toThrow;\n};\n\n// Determine the runtime environment we are in. You can customize this by\n// setting the ENVIRONMENT setting at compile time (see settings.js).\n\nvar ENVIRONMENT_IS_WEB = true;\nvar ENVIRONMENT_IS_WORKER = false;\nvar ENVIRONMENT_IS_NODE = false;\nvar ENVIRONMENT_HAS_NODE = ENVIRONMENT_IS_NODE;\nvar ENVIRONMENT_IS_SHELL = false;\n\nif (Module['ENVIRONMENT']) {\n  throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)');\n}\n\n\n\n// `/` should be present at the end if `scriptDirectory` is not empty\nvar scriptDirectory = '';\nfunction locateFile(path) {\n  if (Module['locateFile']) {\n    return Module['locateFile'](path, scriptDirectory);\n  }\n  return scriptDirectory + path;\n}\n\n// Hooks that are implemented differently in different runtime environments.\nvar read_,\n    readAsync,\n    readBinary,\n    setWindowTitle;\n\n\n// Note that this includes Node.js workers when relevant (pthreads is enabled).\n// Node.js workers are detected as a combination of ENVIRONMENT_IS_WORKER and\n// ENVIRONMENT_HAS_NODE.\nif (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n  if (ENVIRONMENT_IS_WORKER) { // Check worker, not web, since window could be polyfilled\n    scriptDirectory = self.location.href;\n  } else if (document.currentScript) { // web\n    scriptDirectory = document.currentScript.src;\n  }\n  // When MODULARIZE (and not _INSTANCE), this JS may be executed later, after document.currentScript\n  // is gone, so we saved it, and we use it here instead of any other info.\n  if (_scriptDir) {\n    scriptDirectory = _scriptDir;\n  }\n  // blob urls look like blob:http://site.com/etc/etc and we cannot infer anything from them.\n  // otherwise, slice off the final part of the url to find the script directory.\n  // if scriptDirectory does not contain a slash, lastIndexOf will return -1,\n  // and scriptDirectory will correctly be replaced with an empty string.\n  if (scriptDirectory.indexOf('blob:') !== 0) {\n    scriptDirectory = scriptDirectory.substr(0, scriptDirectory.lastIndexOf('/')+1);\n  } else {\n    scriptDirectory = '';\n  }\n\n  if (!(typeof window === 'object' || typeof importScripts === 'function')) throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  // Differentiate the Web Worker from the Node Worker case, as reading must\n  // be done differently.\n  {\n\n\n  read_ = function shell_read(url) {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, false);\n      xhr.send(null);\n      return xhr.responseText;\n  };\n\n  if (ENVIRONMENT_IS_WORKER) {\n    readBinary = function readBinary(url) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url, false);\n        xhr.responseType = 'arraybuffer';\n        xhr.send(null);\n        return new Uint8Array(xhr.response);\n    };\n  }\n\n  readAsync = function readAsync(url, onload, onerror) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'arraybuffer';\n    xhr.onload = function xhr_onload() {\n      if (xhr.status == 200 || (xhr.status == 0 && xhr.response)) { // file URLs can return 0\n        onload(xhr.response);\n        return;\n      }\n      onerror();\n    };\n    xhr.onerror = onerror;\n    xhr.send(null);\n  };\n\n\n\n\n  }\n\n  setWindowTitle = function(title) { document.title = title };\n} else\n{\n  throw new Error('environment detection error');\n}\n\n\n// Set up the out() and err() hooks, which are how we can print to stdout or\n// stderr, respectively.\nvar out = Module['print'] || console.log.bind(console);\nvar err = Module['printErr'] || console.warn.bind(console);\n\n// Merge back in the overrides\nfor (key in moduleOverrides) {\n  if (moduleOverrides.hasOwnProperty(key)) {\n    Module[key] = moduleOverrides[key];\n  }\n}\n// Free the object hierarchy contained in the overrides, this lets the GC\n// reclaim data used e.g. in memoryInitializerRequest, which is a large typed array.\nmoduleOverrides = null;\n\n// Emit code to handle expected values on the Module object. This applies Module.x\n// to the proper local x. This has two benefits: first, we only emit it if it is\n// expected to arrive, and second, by using a local everywhere else that can be\n// minified.\nif (Module['arguments']) arguments_ = Module['arguments'];if (!Object.getOwnPropertyDescriptor(Module, 'arguments')) Object.defineProperty(Module, 'arguments', { configurable: true, get: function() { abort('Module.arguments has been replaced with plain arguments_') } });\nif (Module['thisProgram']) thisProgram = Module['thisProgram'];if (!Object.getOwnPropertyDescriptor(Module, 'thisProgram')) Object.defineProperty(Module, 'thisProgram', { configurable: true, get: function() { abort('Module.thisProgram has been replaced with plain thisProgram') } });\nif (Module['quit']) quit_ = Module['quit'];if (!Object.getOwnPropertyDescriptor(Module, 'quit')) Object.defineProperty(Module, 'quit', { configurable: true, get: function() { abort('Module.quit has been replaced with plain quit_') } });\n\n// perform assertions in shell.js after we set up out() and err(), as otherwise if an assertion fails it cannot print the message\n// Assertions on removed incoming Module JS APIs.\nassert(typeof Module['memoryInitializerPrefixURL'] === 'undefined', 'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['pthreadMainPrefixURL'] === 'undefined', 'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['cdInitializerPrefixURL'] === 'undefined', 'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['filePackagePrefixURL'] === 'undefined', 'Module.filePackagePrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['read'] === 'undefined', 'Module.read option was removed (modify read_ in JS)');\nassert(typeof Module['readAsync'] === 'undefined', 'Module.readAsync option was removed (modify readAsync in JS)');\nassert(typeof Module['readBinary'] === 'undefined', 'Module.readBinary option was removed (modify readBinary in JS)');\nassert(typeof Module['setWindowTitle'] === 'undefined', 'Module.setWindowTitle option was removed (modify setWindowTitle in JS)');\nif (!Object.getOwnPropertyDescriptor(Module, 'read')) Object.defineProperty(Module, 'read', { configurable: true, get: function() { abort('Module.read has been replaced with plain read_') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'readAsync')) Object.defineProperty(Module, 'readAsync', { configurable: true, get: function() { abort('Module.readAsync has been replaced with plain readAsync') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'readBinary')) Object.defineProperty(Module, 'readBinary', { configurable: true, get: function() { abort('Module.readBinary has been replaced with plain readBinary') } });\n// TODO: add when SDL2 is fixed if (!Object.getOwnPropertyDescriptor(Module, 'setWindowTitle')) Object.defineProperty(Module, 'setWindowTitle', { configurable: true, get: function() { abort('Module.setWindowTitle has been replaced with plain setWindowTitle') } });\nvar IDBFS = 'IDBFS is no longer included by default; build with -lidbfs.js';\nvar PROXYFS = 'PROXYFS is no longer included by default; build with -lproxyfs.js';\nvar WORKERFS = 'WORKERFS is no longer included by default; build with -lworkerfs.js';\nvar NODEFS = 'NODEFS is no longer included by default; build with -lnodefs.js';\n\n\n// TODO remove when SDL2 is fixed (also see above)\n\n\n\n// Copyright 2017 The Emscripten Authors.  All rights reserved.\n// Emscripten is available under two separate licenses, the MIT license and the\n// University of Illinois/NCSA Open Source License.  Both these licenses can be\n// found in the LICENSE file.\n\n// {{PREAMBLE_ADDITIONS}}\n\nvar STACK_ALIGN = 16;\n\n// stack management, and other functionality that is provided by the compiled code,\n// should not be used before it is ready\nstackSave = stackRestore = stackAlloc = function() {\n  abort('cannot use the stack before compiled code is ready to run, and has provided stack access');\n};\n\nfunction staticAlloc(size) {\n  abort('staticAlloc is no longer available at runtime; instead, perform static allocations at compile time (using makeStaticAlloc)');\n}\n\nfunction dynamicAlloc(size) {\n  assert(DYNAMICTOP_PTR);\n  var ret = HEAP32[DYNAMICTOP_PTR>>2];\n  var end = (ret + size + 15) & -16;\n  if (end > _emscripten_get_heap_size()) {\n    abort('failure to dynamicAlloc - memory growth etc. is not supported there, call malloc/sbrk directly');\n  }\n  HEAP32[DYNAMICTOP_PTR>>2] = end;\n  return ret;\n}\n\nfunction alignMemory(size, factor) {\n  if (!factor) factor = STACK_ALIGN; // stack alignment (16-byte) by default\n  return Math.ceil(size / factor) * factor;\n}\n\nfunction getNativeTypeSize(type) {\n  switch (type) {\n    case 'i1': case 'i8': return 1;\n    case 'i16': return 2;\n    case 'i32': return 4;\n    case 'i64': return 8;\n    case 'float': return 4;\n    case 'double': return 8;\n    default: {\n      if (type[type.length-1] === '*') {\n        return 4; // A pointer\n      } else if (type[0] === 'i') {\n        var bits = parseInt(type.substr(1));\n        assert(bits % 8 === 0, 'getNativeTypeSize invalid bits ' + bits + ', type ' + type);\n        return bits / 8;\n      } else {\n        return 0;\n      }\n    }\n  }\n}\n\nfunction warnOnce(text) {\n  if (!warnOnce.shown) warnOnce.shown = {};\n  if (!warnOnce.shown[text]) {\n    warnOnce.shown[text] = 1;\n    err(text);\n  }\n}\n\nvar asm2wasmImports = { // special asm2wasm imports\n    \"f64-rem\": function(x, y) {\n        return x % y;\n    },\n    \"debugger\": function() {\n        debugger;\n    }\n};\n\n\n\n\n// Wraps a JS function as a wasm function with a given signature.\nfunction convertJsFunctionToWasm(func, sig) {\n\n  // If the type reflection proposal is available, use the new\n  // \"WebAssembly.Function\" constructor.\n  // Otherwise, construct a minimal wasm module importing the JS function and\n  // re-exporting it.\n  if (typeof WebAssembly.Function === \"function\") {\n    var typeNames = {\n      'i': 'i32',\n      'j': 'i64',\n      'f': 'f32',\n      'd': 'f64'\n    };\n    var type = {\n      parameters: [],\n      results: sig[0] == 'v' ? [] : [typeNames[sig[0]]]\n    };\n    for (var i = 1; i < sig.length; ++i) {\n      type.parameters.push(typeNames[sig[i]]);\n    }\n    return new WebAssembly.Function(type, func);\n  }\n\n  // The module is static, with the exception of the type section, which is\n  // generated based on the signature passed in.\n  var typeSection = [\n    0x01, // id: section,\n    0x00, // length: 0 (placeholder)\n    0x01, // count: 1\n    0x60, // form: func\n  ];\n  var sigRet = sig.slice(0, 1);\n  var sigParam = sig.slice(1);\n  var typeCodes = {\n    'i': 0x7f, // i32\n    'j': 0x7e, // i64\n    'f': 0x7d, // f32\n    'd': 0x7c, // f64\n  };\n\n  // Parameters, length + signatures\n  typeSection.push(sigParam.length);\n  for (var i = 0; i < sigParam.length; ++i) {\n    typeSection.push(typeCodes[sigParam[i]]);\n  }\n\n  // Return values, length + signatures\n  // With no multi-return in MVP, either 0 (void) or 1 (anything else)\n  if (sigRet == 'v') {\n    typeSection.push(0x00);\n  } else {\n    typeSection = typeSection.concat([0x01, typeCodes[sigRet]]);\n  }\n\n  // Write the overall length of the type section back into the section header\n  // (excepting the 2 bytes for the section id and length)\n  typeSection[1] = typeSection.length - 2;\n\n  // Rest of the module is static\n  var bytes = new Uint8Array([\n    0x00, 0x61, 0x73, 0x6d, // magic (\"\\0asm\")\n    0x01, 0x00, 0x00, 0x00, // version: 1\n  ].concat(typeSection, [\n    0x02, 0x07, // import section\n      // (import \"e\" \"f\" (func 0 (type 0)))\n      0x01, 0x01, 0x65, 0x01, 0x66, 0x00, 0x00,\n    0x07, 0x05, // export section\n      // (export \"f\" (func 0 (type 0)))\n      0x01, 0x01, 0x66, 0x00, 0x00,\n  ]));\n\n   // We can compile this wasm module synchronously because it is very small.\n  // This accepts an import (at \"e.f\"), that it reroutes to an export (at \"f\")\n  var module = new WebAssembly.Module(bytes);\n  var instance = new WebAssembly.Instance(module, {\n    'e': {\n      'f': func\n    }\n  });\n  var wrappedFunc = instance.exports['f'];\n  return wrappedFunc;\n}\n\n// Add a wasm function to the table.\nfunction addFunctionWasm(func, sig) {\n  var table = wasmTable;\n  var ret = table.length;\n\n  // Grow the table\n  try {\n    table.grow(1);\n  } catch (err) {\n    if (!err instanceof RangeError) {\n      throw err;\n    }\n    throw 'Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH.';\n  }\n\n  // Insert new element\n  try {\n    // Attempting to call this with JS function will cause of table.set() to fail\n    table.set(ret, func);\n  } catch (err) {\n    if (!err instanceof TypeError) {\n      throw err;\n    }\n    assert(typeof sig !== 'undefined', 'Missing signature argument to addFunction');\n    var wrapped = convertJsFunctionToWasm(func, sig);\n    table.set(ret, wrapped);\n  }\n\n  return ret;\n}\n\nfunction removeFunctionWasm(index) {\n  // TODO(sbc): Look into implementing this to allow re-using of table slots\n}\n\n// 'sig' parameter is required for the llvm backend but only when func is not\n// already a WebAssembly function.\nfunction addFunction(func, sig) {\n  assert(typeof func !== 'undefined');\n\n  return addFunctionWasm(func, sig);\n}\n\nfunction removeFunction(index) {\n  removeFunctionWasm(index);\n}\n\nvar funcWrappers = {};\n\nfunction getFuncWrapper(func, sig) {\n  if (!func) return; // on null pointer, return undefined\n  assert(sig);\n  if (!funcWrappers[sig]) {\n    funcWrappers[sig] = {};\n  }\n  var sigCache = funcWrappers[sig];\n  if (!sigCache[func]) {\n    // optimize away arguments usage in common cases\n    if (sig.length === 1) {\n      sigCache[func] = function dynCall_wrapper() {\n        return dynCall(sig, func);\n      };\n    } else if (sig.length === 2) {\n      sigCache[func] = function dynCall_wrapper(arg) {\n        return dynCall(sig, func, [arg]);\n      };\n    } else {\n      // general case\n      sigCache[func] = function dynCall_wrapper() {\n        return dynCall(sig, func, Array.prototype.slice.call(arguments));\n      };\n    }\n  }\n  return sigCache[func];\n}\n\n\nfunction makeBigInt(low, high, unsigned) {\n  return unsigned ? ((+((low>>>0)))+((+((high>>>0)))*4294967296.0)) : ((+((low>>>0)))+((+((high|0)))*4294967296.0));\n}\n\nfunction dynCall(sig, ptr, args) {\n  if (args && args.length) {\n    assert(args.length == sig.length-1);\n    assert(('dynCall_' + sig) in Module, 'bad function pointer type - no table for sig \\'' + sig + '\\'');\n    return Module['dynCall_' + sig].apply(null, [ptr].concat(args));\n  } else {\n    assert(sig.length == 1);\n    assert(('dynCall_' + sig) in Module, 'bad function pointer type - no table for sig \\'' + sig + '\\'');\n    return Module['dynCall_' + sig].call(null, ptr);\n  }\n}\n\nvar tempRet0 = 0;\n\nvar setTempRet0 = function(value) {\n  tempRet0 = value;\n};\n\nvar getTempRet0 = function() {\n  return tempRet0;\n};\n\nfunction getCompilerSetting(name) {\n  throw 'You must build with -s RETAIN_COMPILER_SETTINGS=1 for getCompilerSetting or emscripten_get_compiler_setting to work';\n}\n\nvar Runtime = {\n  // helpful errors\n  getTempRet0: function() { abort('getTempRet0() is now a top-level function, after removing the Runtime object. Remove \"Runtime.\"') },\n  staticAlloc: function() { abort('staticAlloc() is now a top-level function, after removing the Runtime object. Remove \"Runtime.\"') },\n  stackAlloc: function() { abort('stackAlloc() is now a top-level function, after removing the Runtime object. Remove \"Runtime.\"') },\n};\n\n// The address globals begin at. Very low in memory, for code size and optimization opportunities.\n// Above 0 is static memory, starting with globals.\n// Then the stack.\n// Then 'dynamic' memory for sbrk.\nvar GLOBAL_BASE = 1024;\n\n\n\n\n// === Preamble library stuff ===\n\n// Documentation for the public APIs defined in this file must be updated in:\n//    site/source/docs/api_reference/preamble.js.rst\n// A prebuilt local version of the documentation is available at:\n//    site/build/text/docs/api_reference/preamble.js.txt\n// You can also build docs locally as HTML or other formats in site/\n// An online HTML version (which may be of a different version of Emscripten)\n//    is up at http://kripken.github.io/emscripten-site/docs/api_reference/preamble.js.html\n\n\nvar wasmBinary;if (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];if (!Object.getOwnPropertyDescriptor(Module, 'wasmBinary')) Object.defineProperty(Module, 'wasmBinary', { configurable: true, get: function() { abort('Module.wasmBinary has been replaced with plain wasmBinary') } });\nvar noExitRuntime;if (Module['noExitRuntime']) noExitRuntime = Module['noExitRuntime'];if (!Object.getOwnPropertyDescriptor(Module, 'noExitRuntime')) Object.defineProperty(Module, 'noExitRuntime', { configurable: true, get: function() { abort('Module.noExitRuntime has been replaced with plain noExitRuntime') } });\n\n\nif (typeof WebAssembly !== 'object') {\n  abort('No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.');\n}\n\n\n// In MINIMAL_RUNTIME, setValue() and getValue() are only available when building with safe heap enabled, for heap safety checking.\n// In traditional runtime, setValue() and getValue() are always available (although their use is highly discouraged due to perf penalties)\n\n/** @type {function(number, number, string, boolean=)} */\nfunction setValue(ptr, value, type, noSafe) {\n  type = type || 'i8';\n  if (type.charAt(type.length-1) === '*') type = 'i32'; // pointers are 32-bit\n    switch(type) {\n      case 'i1': HEAP8[((ptr)>>0)]=value; break;\n      case 'i8': HEAP8[((ptr)>>0)]=value; break;\n      case 'i16': HEAP16[((ptr)>>1)]=value; break;\n      case 'i32': HEAP32[((ptr)>>2)]=value; break;\n      case 'i64': (tempI64 = [value>>>0,(tempDouble=value,(+(Math_abs(tempDouble))) >= 1.0 ? (tempDouble > 0.0 ? ((Math_min((+(Math_floor((tempDouble)/4294967296.0))), 4294967295.0))|0)>>>0 : (~~((+(Math_ceil((tempDouble - +(((~~(tempDouble)))>>>0))/4294967296.0)))))>>>0) : 0)],HEAP32[((ptr)>>2)]=tempI64[0],HEAP32[(((ptr)+(4))>>2)]=tempI64[1]); break;\n      case 'float': HEAPF32[((ptr)>>2)]=value; break;\n      case 'double': HEAPF64[((ptr)>>3)]=value; break;\n      default: abort('invalid type for setValue: ' + type);\n    }\n}\n\n/** @type {function(number, string, boolean=)} */\nfunction getValue(ptr, type, noSafe) {\n  type = type || 'i8';\n  if (type.charAt(type.length-1) === '*') type = 'i32'; // pointers are 32-bit\n    switch(type) {\n      case 'i1': return HEAP8[((ptr)>>0)];\n      case 'i8': return HEAP8[((ptr)>>0)];\n      case 'i16': return HEAP16[((ptr)>>1)];\n      case 'i32': return HEAP32[((ptr)>>2)];\n      case 'i64': return HEAP32[((ptr)>>2)];\n      case 'float': return HEAPF32[((ptr)>>2)];\n      case 'double': return HEAPF64[((ptr)>>3)];\n      default: abort('invalid type for getValue: ' + type);\n    }\n  return null;\n}\n\n\n\n\n\n// Wasm globals\n\nvar wasmMemory;\n\n// In fastcomp asm.js, we don't need a wasm Table at all.\n// In the wasm backend, we polyfill the WebAssembly object,\n// so this creates a (non-native-wasm) table for us.\nvar wasmTable = new WebAssembly.Table({\n  'initial': 354,\n  'maximum': 354 + 0,\n  'element': 'anyfunc'\n});\n\n\n//========================================\n// Runtime essentials\n//========================================\n\n// whether we are quitting the application. no code should run after this.\n// set in exit() and abort()\nvar ABORT = false;\n\n// set by exit() and abort().  Passed to 'onExit' handler.\n// NOTE: This is also used as the process return code code in shell environments\n// but only when noExitRuntime is false.\nvar EXITSTATUS = 0;\n\n/** @type {function(*, string=)} */\nfunction assert(condition, text) {\n  if (!condition) {\n    abort('Assertion failed: ' + text);\n  }\n}\n\n// Returns the C function with a specified identifier (for C++, you need to do manual name mangling)\nfunction getCFunc(ident) {\n  var func = Module['_' + ident]; // closure exported function\n  assert(func, 'Cannot call unknown function ' + ident + ', make sure it is exported');\n  return func;\n}\n\n// C calling interface.\nfunction ccall(ident, returnType, argTypes, args, opts) {\n  // For fast lookup of conversion functions\n  var toC = {\n    'string': function(str) {\n      var ret = 0;\n      if (str !== null && str !== undefined && str !== 0) { // null string\n        // at most 4 bytes per UTF-8 code point, +1 for the trailing '\\0'\n        var len = (str.length << 2) + 1;\n        ret = stackAlloc(len);\n        stringToUTF8(str, ret, len);\n      }\n      return ret;\n    },\n    'array': function(arr) {\n      var ret = stackAlloc(arr.length);\n      writeArrayToMemory(arr, ret);\n      return ret;\n    }\n  };\n\n  function convertReturnValue(ret) {\n    if (returnType === 'string') return UTF8ToString(ret);\n    if (returnType === 'boolean') return Boolean(ret);\n    return ret;\n  }\n\n  var func = getCFunc(ident);\n  var cArgs = [];\n  var stack = 0;\n  assert(returnType !== 'array', 'Return type should not be \"array\".');\n  if (args) {\n    for (var i = 0; i < args.length; i++) {\n      var converter = toC[argTypes[i]];\n      if (converter) {\n        if (stack === 0) stack = stackSave();\n        cArgs[i] = converter(args[i]);\n      } else {\n        cArgs[i] = args[i];\n      }\n    }\n  }\n  var ret = func.apply(null, cArgs);\n\n  ret = convertReturnValue(ret);\n  if (stack !== 0) stackRestore(stack);\n  return ret;\n}\n\nfunction cwrap(ident, returnType, argTypes, opts) {\n  return function() {\n    return ccall(ident, returnType, argTypes, arguments, opts);\n  }\n}\n\nvar ALLOC_NORMAL = 0; // Tries to use _malloc()\nvar ALLOC_STACK = 1; // Lives for the duration of the current function call\nvar ALLOC_DYNAMIC = 2; // Cannot be freed except through sbrk\nvar ALLOC_NONE = 3; // Do not allocate\n\n// allocate(): This is for internal use. You can use it yourself as well, but the interface\n//             is a little tricky (see docs right below). The reason is that it is optimized\n//             for multiple syntaxes to save space in generated code. So you should\n//             normally not use allocate(), and instead allocate memory using _malloc(),\n//             initialize it with setValue(), and so forth.\n// @slab: An array of data, or a number. If a number, then the size of the block to allocate,\n//        in *bytes* (note that this is sometimes confusing: the next parameter does not\n//        affect this!)\n// @types: Either an array of types, one for each byte (or 0 if no type at that position),\n//         or a single type which is used for the entire block. This only matters if there\n//         is initial data - if @slab is a number, then this does not matter at all and is\n//         ignored.\n// @allocator: How to allocate memory, see ALLOC_*\n/** @type {function((TypedArray|Array<number>|number), string, number, number=)} */\nfunction allocate(slab, types, allocator, ptr) {\n  var zeroinit, size;\n  if (typeof slab === 'number') {\n    zeroinit = true;\n    size = slab;\n  } else {\n    zeroinit = false;\n    size = slab.length;\n  }\n\n  var singleType = typeof types === 'string' ? types : null;\n\n  var ret;\n  if (allocator == ALLOC_NONE) {\n    ret = ptr;\n  } else {\n    ret = [_malloc,\n    stackAlloc,\n    dynamicAlloc][allocator](Math.max(size, singleType ? 1 : types.length));\n  }\n\n  if (zeroinit) {\n    var stop;\n    ptr = ret;\n    assert((ret & 3) == 0);\n    stop = ret + (size & ~3);\n    for (; ptr < stop; ptr += 4) {\n      HEAP32[((ptr)>>2)]=0;\n    }\n    stop = ret + size;\n    while (ptr < stop) {\n      HEAP8[((ptr++)>>0)]=0;\n    }\n    return ret;\n  }\n\n  if (singleType === 'i8') {\n    if (slab.subarray || slab.slice) {\n      HEAPU8.set(/** @type {!Uint8Array} */ (slab), ret);\n    } else {\n      HEAPU8.set(new Uint8Array(slab), ret);\n    }\n    return ret;\n  }\n\n  var i = 0, type, typeSize, previousType;\n  while (i < size) {\n    var curr = slab[i];\n\n    type = singleType || types[i];\n    if (type === 0) {\n      i++;\n      continue;\n    }\n    assert(type, 'Must know what type to store in allocate!');\n\n    if (type == 'i64') type = 'i32'; // special case: we have one i32 here, and one i32 later\n\n    setValue(ret+i, curr, type);\n\n    // no need to look up size unless type changes, so cache it\n    if (previousType !== type) {\n      typeSize = getNativeTypeSize(type);\n      previousType = type;\n    }\n    i += typeSize;\n  }\n\n  return ret;\n}\n\n// Allocate memory during any stage of startup - static memory early on, dynamic memory later, malloc when ready\nfunction getMemory(size) {\n  if (!runtimeInitialized) return dynamicAlloc(size);\n  return _malloc(size);\n}\n\n\n\n\n/** @type {function(number, number=)} */\nfunction Pointer_stringify(ptr, length) {\n  abort(\"this function has been removed - you should use UTF8ToString(ptr, maxBytesToRead) instead!\");\n}\n\n// Given a pointer 'ptr' to a null-terminated ASCII-encoded string in the emscripten HEAP, returns\n// a copy of that string as a Javascript String object.\n\nfunction AsciiToString(ptr) {\n  var str = '';\n  while (1) {\n    var ch = HEAPU8[((ptr++)>>0)];\n    if (!ch) return str;\n    str += String.fromCharCode(ch);\n  }\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in ASCII form. The copy will require at most str.length+1 bytes of space in the HEAP.\n\nfunction stringToAscii(str, outPtr) {\n  return writeAsciiToMemory(str, outPtr, false);\n}\n\n\n// Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the given array that contains uint8 values, returns\n// a copy of that string as a Javascript String object.\n\nvar UTF8Decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder('utf8') : undefined;\n\n/**\n * @param {number} idx\n * @param {number=} maxBytesToRead\n * @return {string}\n */\nfunction UTF8ArrayToString(u8Array, idx, maxBytesToRead) {\n  var endIdx = idx + maxBytesToRead;\n  var endPtr = idx;\n  // TextDecoder needs to know the byte length in advance, it doesn't stop on null terminator by itself.\n  // Also, use the length info to avoid running tiny strings through TextDecoder, since .subarray() allocates garbage.\n  // (As a tiny code save trick, compare endPtr against endIdx using a negation, so that undefined means Infinity)\n  while (u8Array[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n\n  if (endPtr - idx > 16 && u8Array.subarray && UTF8Decoder) {\n    return UTF8Decoder.decode(u8Array.subarray(idx, endPtr));\n  } else {\n    var str = '';\n    // If building with TextDecoder, we have already computed the string length above, so test loop end condition against that\n    while (idx < endPtr) {\n      // For UTF8 byte structure, see:\n      // http://en.wikipedia.org/wiki/UTF-8#Description\n      // https://www.ietf.org/rfc/rfc2279.txt\n      // https://tools.ietf.org/html/rfc3629\n      var u0 = u8Array[idx++];\n      if (!(u0 & 0x80)) { str += String.fromCharCode(u0); continue; }\n      var u1 = u8Array[idx++] & 63;\n      if ((u0 & 0xE0) == 0xC0) { str += String.fromCharCode(((u0 & 31) << 6) | u1); continue; }\n      var u2 = u8Array[idx++] & 63;\n      if ((u0 & 0xF0) == 0xE0) {\n        u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n      } else {\n        if ((u0 & 0xF8) != 0xF0) warnOnce('Invalid UTF-8 leading byte 0x' + u0.toString(16) + ' encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!');\n        u0 = ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (u8Array[idx++] & 63);\n      }\n\n      if (u0 < 0x10000) {\n        str += String.fromCharCode(u0);\n      } else {\n        var ch = u0 - 0x10000;\n        str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n      }\n    }\n  }\n  return str;\n}\n\n// Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the emscripten HEAP, returns a\n// copy of that string as a Javascript String object.\n// maxBytesToRead: an optional length that specifies the maximum number of bytes to read. You can omit\n//                 this parameter to scan the string until the first \\0 byte. If maxBytesToRead is\n//                 passed, and the string at [ptr, ptr+maxBytesToReadr[ contains a null byte in the\n//                 middle, then the string will cut short at that byte index (i.e. maxBytesToRead will\n//                 not produce a string of exact length [ptr, ptr+maxBytesToRead[)\n//                 N.B. mixing frequent uses of UTF8ToString() with and without maxBytesToRead may\n//                 throw JS JIT optimizations off, so it is worth to consider consistently using one\n//                 style or the other.\n/**\n * @param {number} ptr\n * @param {number=} maxBytesToRead\n * @return {string}\n */\nfunction UTF8ToString(ptr, maxBytesToRead) {\n  return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n}\n\n// Copies the given Javascript String object 'str' to the given byte array at address 'outIdx',\n// encoded in UTF8 form and null-terminated. The copy will require at most str.length*4+1 bytes of space in the HEAP.\n// Use the function lengthBytesUTF8 to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   outU8Array: the array to copy to. Each index in this array is assumed to be one 8-byte element.\n//   outIdx: The starting offset in the array to begin the copying.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array.\n//                    This count should include the null terminator,\n//                    i.e. if maxBytesToWrite=1, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite=0 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF8Array(str, outU8Array, outIdx, maxBytesToWrite) {\n  if (!(maxBytesToWrite > 0)) // Parameter maxBytesToWrite is not optional. Negative values, 0, null, undefined and false each don't write out any bytes.\n    return 0;\n\n  var startIdx = outIdx;\n  var endIdx = outIdx + maxBytesToWrite - 1; // -1 for string null terminator.\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description and https://www.ietf.org/rfc/rfc2279.txt and https://tools.ietf.org/html/rfc3629\n    var u = str.charCodeAt(i); // possibly a lead surrogate\n    if (u >= 0xD800 && u <= 0xDFFF) {\n      var u1 = str.charCodeAt(++i);\n      u = 0x10000 + ((u & 0x3FF) << 10) | (u1 & 0x3FF);\n    }\n    if (u <= 0x7F) {\n      if (outIdx >= endIdx) break;\n      outU8Array[outIdx++] = u;\n    } else if (u <= 0x7FF) {\n      if (outIdx + 1 >= endIdx) break;\n      outU8Array[outIdx++] = 0xC0 | (u >> 6);\n      outU8Array[outIdx++] = 0x80 | (u & 63);\n    } else if (u <= 0xFFFF) {\n      if (outIdx + 2 >= endIdx) break;\n      outU8Array[outIdx++] = 0xE0 | (u >> 12);\n      outU8Array[outIdx++] = 0x80 | ((u >> 6) & 63);\n      outU8Array[outIdx++] = 0x80 | (u & 63);\n    } else {\n      if (outIdx + 3 >= endIdx) break;\n      if (u >= 0x200000) warnOnce('Invalid Unicode code point 0x' + u.toString(16) + ' encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF).');\n      outU8Array[outIdx++] = 0xF0 | (u >> 18);\n      outU8Array[outIdx++] = 0x80 | ((u >> 12) & 63);\n      outU8Array[outIdx++] = 0x80 | ((u >> 6) & 63);\n      outU8Array[outIdx++] = 0x80 | (u & 63);\n    }\n  }\n  // Null-terminate the pointer to the buffer.\n  outU8Array[outIdx] = 0;\n  return outIdx - startIdx;\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF8 form. The copy will require at most str.length*4+1 bytes of space in the HEAP.\n// Use the function lengthBytesUTF8 to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF8(str, outPtr, maxBytesToWrite) {\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  return stringToUTF8Array(str, HEAPU8,outPtr, maxBytesToWrite);\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF8 byte array, EXCLUDING the null terminator byte.\nfunction lengthBytesUTF8(str) {\n  var len = 0;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var u = str.charCodeAt(i); // possibly a lead surrogate\n    if (u >= 0xD800 && u <= 0xDFFF) u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt(++i) & 0x3FF);\n    if (u <= 0x7F) ++len;\n    else if (u <= 0x7FF) len += 2;\n    else if (u <= 0xFFFF) len += 3;\n    else len += 4;\n  }\n  return len;\n}\n\n\n// Given a pointer 'ptr' to a null-terminated UTF16LE-encoded string in the emscripten HEAP, returns\n// a copy of that string as a Javascript String object.\n\nvar UTF16Decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-16le') : undefined;\nfunction UTF16ToString(ptr) {\n  assert(ptr % 2 == 0, 'Pointer passed to UTF16ToString must be aligned to two bytes!');\n  var endPtr = ptr;\n  // TextDecoder needs to know the byte length in advance, it doesn't stop on null terminator by itself.\n  // Also, use the length info to avoid running tiny strings through TextDecoder, since .subarray() allocates garbage.\n  var idx = endPtr >> 1;\n  while (HEAP16[idx]) ++idx;\n  endPtr = idx << 1;\n\n  if (endPtr - ptr > 32 && UTF16Decoder) {\n    return UTF16Decoder.decode(HEAPU8.subarray(ptr, endPtr));\n  } else {\n    var i = 0;\n\n    var str = '';\n    while (1) {\n      var codeUnit = HEAP16[(((ptr)+(i*2))>>1)];\n      if (codeUnit == 0) return str;\n      ++i;\n      // fromCharCode constructs a character from a UTF-16 code unit, so we can pass the UTF16 string right through.\n      str += String.fromCharCode(codeUnit);\n    }\n  }\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF16 form. The copy will require at most str.length*4+2 bytes of space in the HEAP.\n// Use the function lengthBytesUTF16() to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   outPtr: Byte address in Emscripten HEAP where to write the string to.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array. This count should include the null\n//                    terminator, i.e. if maxBytesToWrite=2, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite<2 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF16(str, outPtr, maxBytesToWrite) {\n  assert(outPtr % 2 == 0, 'Pointer passed to stringToUTF16 must be aligned to two bytes!');\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n  if (maxBytesToWrite === undefined) {\n    maxBytesToWrite = 0x7FFFFFFF;\n  }\n  if (maxBytesToWrite < 2) return 0;\n  maxBytesToWrite -= 2; // Null terminator.\n  var startPtr = outPtr;\n  var numCharsToWrite = (maxBytesToWrite < str.length*2) ? (maxBytesToWrite / 2) : str.length;\n  for (var i = 0; i < numCharsToWrite; ++i) {\n    // charCodeAt returns a UTF-16 encoded code unit, so it can be directly written to the HEAP.\n    var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n    HEAP16[((outPtr)>>1)]=codeUnit;\n    outPtr += 2;\n  }\n  // Null-terminate the pointer to the HEAP.\n  HEAP16[((outPtr)>>1)]=0;\n  return outPtr - startPtr;\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF16 byte array, EXCLUDING the null terminator byte.\n\nfunction lengthBytesUTF16(str) {\n  return str.length*2;\n}\n\nfunction UTF32ToString(ptr) {\n  assert(ptr % 4 == 0, 'Pointer passed to UTF32ToString must be aligned to four bytes!');\n  var i = 0;\n\n  var str = '';\n  while (1) {\n    var utf32 = HEAP32[(((ptr)+(i*4))>>2)];\n    if (utf32 == 0)\n      return str;\n    ++i;\n    // Gotcha: fromCharCode constructs a character from a UTF-16 encoded code (pair), not from a Unicode code point! So encode the code point to UTF-16 for constructing.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    if (utf32 >= 0x10000) {\n      var ch = utf32 - 0x10000;\n      str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n    } else {\n      str += String.fromCharCode(utf32);\n    }\n  }\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF32 form. The copy will require at most str.length*4+4 bytes of space in the HEAP.\n// Use the function lengthBytesUTF32() to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   outPtr: Byte address in Emscripten HEAP where to write the string to.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array. This count should include the null\n//                    terminator, i.e. if maxBytesToWrite=4, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite<4 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF32(str, outPtr, maxBytesToWrite) {\n  assert(outPtr % 4 == 0, 'Pointer passed to stringToUTF32 must be aligned to four bytes!');\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n  if (maxBytesToWrite === undefined) {\n    maxBytesToWrite = 0x7FFFFFFF;\n  }\n  if (maxBytesToWrite < 4) return 0;\n  var startPtr = outPtr;\n  var endPtr = startPtr + maxBytesToWrite - 4;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n    if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) {\n      var trailSurrogate = str.charCodeAt(++i);\n      codeUnit = 0x10000 + ((codeUnit & 0x3FF) << 10) | (trailSurrogate & 0x3FF);\n    }\n    HEAP32[((outPtr)>>2)]=codeUnit;\n    outPtr += 4;\n    if (outPtr + 4 > endPtr) break;\n  }\n  // Null-terminate the pointer to the HEAP.\n  HEAP32[((outPtr)>>2)]=0;\n  return outPtr - startPtr;\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF16 byte array, EXCLUDING the null terminator byte.\n\nfunction lengthBytesUTF32(str) {\n  var len = 0;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var codeUnit = str.charCodeAt(i);\n    if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) ++i; // possibly a lead surrogate, so skip over the tail surrogate.\n    len += 4;\n  }\n\n  return len;\n}\n\n// Allocate heap space for a JS string, and write it there.\n// It is the responsibility of the caller to free() that memory.\nfunction allocateUTF8(str) {\n  var size = lengthBytesUTF8(str) + 1;\n  var ret = _malloc(size);\n  if (ret) stringToUTF8Array(str, HEAP8, ret, size);\n  return ret;\n}\n\n// Allocate stack space for a JS string, and write it there.\nfunction allocateUTF8OnStack(str) {\n  var size = lengthBytesUTF8(str) + 1;\n  var ret = stackAlloc(size);\n  stringToUTF8Array(str, HEAP8, ret, size);\n  return ret;\n}\n\n// Deprecated: This function should not be called because it is unsafe and does not provide\n// a maximum length limit of how many bytes it is allowed to write. Prefer calling the\n// function stringToUTF8Array() instead, which takes in a maximum length that can be used\n// to be secure from out of bounds writes.\n/** @deprecated */\nfunction writeStringToMemory(string, buffer, dontAddNull) {\n  warnOnce('writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!');\n\n  var /** @type {number} */ lastChar, /** @type {number} */ end;\n  if (dontAddNull) {\n    // stringToUTF8Array always appends null. If we don't want to do that, remember the\n    // character that existed at the location where the null will be placed, and restore\n    // that after the write (below).\n    end = buffer + lengthBytesUTF8(string);\n    lastChar = HEAP8[end];\n  }\n  stringToUTF8(string, buffer, Infinity);\n  if (dontAddNull) HEAP8[end] = lastChar; // Restore the value under the null character.\n}\n\nfunction writeArrayToMemory(array, buffer) {\n  assert(array.length >= 0, 'writeArrayToMemory array must have a length (should be an array or typed array)')\n  HEAP8.set(array, buffer);\n}\n\nfunction writeAsciiToMemory(str, buffer, dontAddNull) {\n  for (var i = 0; i < str.length; ++i) {\n    assert(str.charCodeAt(i) === str.charCodeAt(i)&0xff);\n    HEAP8[((buffer++)>>0)]=str.charCodeAt(i);\n  }\n  // Null-terminate the pointer to the HEAP.\n  if (!dontAddNull) HEAP8[((buffer)>>0)]=0;\n}\n\n\n\n\n// Memory management\n\nvar PAGE_SIZE = 16384;\nvar WASM_PAGE_SIZE = 65536;\nvar ASMJS_PAGE_SIZE = 16777216;\n\nfunction alignUp(x, multiple) {\n  if (x % multiple > 0) {\n    x += multiple - (x % multiple);\n  }\n  return x;\n}\n\nvar HEAP,\n/** @type {ArrayBuffer} */\n  buffer,\n/** @type {Int8Array} */\n  HEAP8,\n/** @type {Uint8Array} */\n  HEAPU8,\n/** @type {Int16Array} */\n  HEAP16,\n/** @type {Uint16Array} */\n  HEAPU16,\n/** @type {Int32Array} */\n  HEAP32,\n/** @type {Uint32Array} */\n  HEAPU32,\n/** @type {Float32Array} */\n  HEAPF32,\n/** @type {Float64Array} */\n  HEAPF64;\n\nfunction updateGlobalBufferAndViews(buf) {\n  buffer = buf;\n  Module['HEAP8'] = HEAP8 = new Int8Array(buf);\n  Module['HEAP16'] = HEAP16 = new Int16Array(buf);\n  Module['HEAP32'] = HEAP32 = new Int32Array(buf);\n  Module['HEAPU8'] = HEAPU8 = new Uint8Array(buf);\n  Module['HEAPU16'] = HEAPU16 = new Uint16Array(buf);\n  Module['HEAPU32'] = HEAPU32 = new Uint32Array(buf);\n  Module['HEAPF32'] = HEAPF32 = new Float32Array(buf);\n  Module['HEAPF64'] = HEAPF64 = new Float64Array(buf);\n}\n\nvar STATIC_BASE = 1024,\n    STACK_BASE = 5264496,\n    STACKTOP = STACK_BASE,\n    STACK_MAX = 21616,\n    DYNAMIC_BASE = 5264496,\n    DYNAMICTOP_PTR = 21456;\n\nassert(STACK_BASE % 16 === 0, 'stack must start aligned');\nassert(DYNAMIC_BASE % 16 === 0, 'heap must start aligned');\n\n\n\nvar TOTAL_STACK = 5242880;\nif (Module['TOTAL_STACK']) assert(TOTAL_STACK === Module['TOTAL_STACK'], 'the stack size can no longer be determined at runtime')\n\nvar INITIAL_TOTAL_MEMORY = Module['TOTAL_MEMORY'] || 16777216;if (!Object.getOwnPropertyDescriptor(Module, 'TOTAL_MEMORY')) Object.defineProperty(Module, 'TOTAL_MEMORY', { configurable: true, get: function() { abort('Module.TOTAL_MEMORY has been replaced with plain INITIAL_TOTAL_MEMORY') } });\n\nassert(INITIAL_TOTAL_MEMORY >= TOTAL_STACK, 'TOTAL_MEMORY should be larger than TOTAL_STACK, was ' + INITIAL_TOTAL_MEMORY + '! (TOTAL_STACK=' + TOTAL_STACK + ')');\n\n// check for full engine support (use string 'subarray' to avoid closure compiler confusion)\nassert(typeof Int32Array !== 'undefined' && typeof Float64Array !== 'undefined' && Int32Array.prototype.subarray !== undefined && Int32Array.prototype.set !== undefined,\n       'JS engine does not provide full typed array support');\n\n\n\n\n\n\n// In standalone mode, the wasm creates the memory, and the user can't provide it.\n// In non-standalone/normal mode, we create the memory here.\n\n// Create the main memory. (Note: this isn't used in STANDALONE_WASM mode since the wasm\n// memory is created in the wasm, not in JS.)\n\n  if (Module['wasmMemory']) {\n    wasmMemory = Module['wasmMemory'];\n  } else\n  {\n    wasmMemory = new WebAssembly.Memory({\n      'initial': INITIAL_TOTAL_MEMORY / WASM_PAGE_SIZE\n      ,\n      'maximum': INITIAL_TOTAL_MEMORY / WASM_PAGE_SIZE\n    });\n  }\n\n\nif (wasmMemory) {\n  buffer = wasmMemory.buffer;\n}\n\n// If the user provides an incorrect length, just use that length instead rather than providing the user to\n// specifically provide the memory length with Module['TOTAL_MEMORY'].\nINITIAL_TOTAL_MEMORY = buffer.byteLength;\nassert(INITIAL_TOTAL_MEMORY % WASM_PAGE_SIZE === 0);\nupdateGlobalBufferAndViews(buffer);\n\nHEAP32[DYNAMICTOP_PTR>>2] = DYNAMIC_BASE;\n\n\n\n\n// Initializes the stack cookie. Called at the startup of main and at the startup of each thread in pthreads mode.\nfunction writeStackCookie() {\n  assert((STACK_MAX & 3) == 0);\n  // The stack grows downwards\n  HEAPU32[(STACK_MAX >> 2)+1] = 0x02135467;\n  HEAPU32[(STACK_MAX >> 2)+2] = 0x89BACDFE;\n  // Also test the global address 0 for integrity.\n  // We don't do this with ASan because ASan does its own checks for this.\n  HEAP32[0] = 0x63736d65; /* 'emsc' */\n}\n\nfunction checkStackCookie() {\n  var cookie1 = HEAPU32[(STACK_MAX >> 2)+1];\n  var cookie2 = HEAPU32[(STACK_MAX >> 2)+2];\n  if (cookie1 != 0x02135467 || cookie2 != 0x89BACDFE) {\n    abort('Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x' + cookie2.toString(16) + ' ' + cookie1.toString(16));\n  }\n  // Also test the global address 0 for integrity.\n  // We don't do this with ASan because ASan does its own checks for this.\n  if (HEAP32[0] !== 0x63736d65 /* 'emsc' */) abort('Runtime error: The application has corrupted its heap memory area (address zero)!');\n}\n\nfunction abortStackOverflow(allocSize) {\n  abort('Stack overflow! Attempted to allocate ' + allocSize + ' bytes on the stack, but stack has only ' + (STACK_MAX - stackSave() + allocSize) + ' bytes available!');\n}\n\n\n\n\n// Endianness check (note: assumes compiler arch was little-endian)\n(function() {\n  var h16 = new Int16Array(1);\n  var h8 = new Int8Array(h16.buffer);\n  h16[0] = 0x6373;\n  if (h8[0] !== 0x73 || h8[1] !== 0x63) throw 'Runtime error: expected the system to be little-endian!';\n})();\n\nfunction abortFnPtrError(ptr, sig) {\n\tabort(\"Invalid function pointer \" + ptr + \" called with signature '\" + sig + \"'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this). Build with ASSERTIONS=2 for more info.\");\n}\n\n\n\nfunction callRuntimeCallbacks(callbacks) {\n  while(callbacks.length > 0) {\n    var callback = callbacks.shift();\n    if (typeof callback == 'function') {\n      callback();\n      continue;\n    }\n    var func = callback.func;\n    if (typeof func === 'number') {\n      if (callback.arg === undefined) {\n        Module['dynCall_v'](func);\n      } else {\n        Module['dynCall_vi'](func, callback.arg);\n      }\n    } else {\n      func(callback.arg === undefined ? null : callback.arg);\n    }\n  }\n}\n\nvar __ATPRERUN__  = []; // functions called before the runtime is initialized\nvar __ATINIT__    = []; // functions called during startup\nvar __ATMAIN__    = []; // functions called when main() is to be run\nvar __ATEXIT__    = []; // functions called during shutdown\nvar __ATPOSTRUN__ = []; // functions called after the main() is called\n\nvar runtimeInitialized = false;\nvar runtimeExited = false;\n\n\nfunction preRun() {\n\n  if (Module['preRun']) {\n    if (typeof Module['preRun'] == 'function') Module['preRun'] = [Module['preRun']];\n    while (Module['preRun'].length) {\n      addOnPreRun(Module['preRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPRERUN__);\n}\n\nfunction initRuntime() {\n  checkStackCookie();\n  assert(!runtimeInitialized);\n  runtimeInitialized = true;\n  \n  callRuntimeCallbacks(__ATINIT__);\n}\n\nfunction preMain() {\n  checkStackCookie();\n  \n  callRuntimeCallbacks(__ATMAIN__);\n}\n\nfunction exitRuntime() {\n  checkStackCookie();\n  runtimeExited = true;\n}\n\nfunction postRun() {\n  checkStackCookie();\n\n  if (Module['postRun']) {\n    if (typeof Module['postRun'] == 'function') Module['postRun'] = [Module['postRun']];\n    while (Module['postRun'].length) {\n      addOnPostRun(Module['postRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPOSTRUN__);\n}\n\nfunction addOnPreRun(cb) {\n  __ATPRERUN__.unshift(cb);\n}\n\nfunction addOnInit(cb) {\n  __ATINIT__.unshift(cb);\n}\n\nfunction addOnPreMain(cb) {\n  __ATMAIN__.unshift(cb);\n}\n\nfunction addOnExit(cb) {\n}\n\nfunction addOnPostRun(cb) {\n  __ATPOSTRUN__.unshift(cb);\n}\n\nfunction unSign(value, bits, ignore) {\n  if (value >= 0) {\n    return value;\n  }\n  return bits <= 32 ? 2*Math.abs(1 << (bits-1)) + value // Need some trickery, since if bits == 32, we are right at the limit of the bits JS uses in bitshifts\n                    : Math.pow(2, bits)         + value;\n}\nfunction reSign(value, bits, ignore) {\n  if (value <= 0) {\n    return value;\n  }\n  var half = bits <= 32 ? Math.abs(1 << (bits-1)) // abs is needed if bits == 32\n                        : Math.pow(2, bits-1);\n  if (value >= half && (bits <= 32 || value > half)) { // for huge values, we can hit the precision limit and always get true here. so don't do that\n                                                       // but, in general there is no perfect solution here. With 64-bit ints, we get rounding and errors\n                                                       // TODO: In i64 mode 1, resign the two parts separately and safely\n    value = -2*half + value; // Cannot bitshift half, as it may be at the limit of the bits JS uses in bitshifts\n  }\n  return value;\n}\n\n\nassert(Math.imul, 'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.fround, 'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.clz32, 'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.trunc, 'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\n\nvar Math_abs = Math.abs;\nvar Math_cos = Math.cos;\nvar Math_sin = Math.sin;\nvar Math_tan = Math.tan;\nvar Math_acos = Math.acos;\nvar Math_asin = Math.asin;\nvar Math_atan = Math.atan;\nvar Math_atan2 = Math.atan2;\nvar Math_exp = Math.exp;\nvar Math_log = Math.log;\nvar Math_sqrt = Math.sqrt;\nvar Math_ceil = Math.ceil;\nvar Math_floor = Math.floor;\nvar Math_pow = Math.pow;\nvar Math_imul = Math.imul;\nvar Math_fround = Math.fround;\nvar Math_round = Math.round;\nvar Math_min = Math.min;\nvar Math_max = Math.max;\nvar Math_clz32 = Math.clz32;\nvar Math_trunc = Math.trunc;\n\n\n\n// A counter of dependencies for calling run(). If we need to\n// do asynchronous work before running, increment this and\n// decrement it. Incrementing must happen in a place like\n// Module.preRun (used by emcc to add file preloading).\n// Note that you can add dependencies in preRun, even though\n// it happens right before run - run will be postponed until\n// the dependencies are met.\nvar runDependencies = 0;\nvar runDependencyWatcher = null;\nvar dependenciesFulfilled = null; // overridden to take different actions when all run dependencies are fulfilled\nvar runDependencyTracking = {};\n\nfunction getUniqueRunDependency(id) {\n  var orig = id;\n  while (1) {\n    if (!runDependencyTracking[id]) return id;\n    id = orig + Math.random();\n  }\n  return id;\n}\n\nfunction addRunDependency(id) {\n  runDependencies++;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(!runDependencyTracking[id]);\n    runDependencyTracking[id] = 1;\n    if (runDependencyWatcher === null && typeof setInterval !== 'undefined') {\n      // Check for missing dependencies every few seconds\n      runDependencyWatcher = setInterval(function() {\n        if (ABORT) {\n          clearInterval(runDependencyWatcher);\n          runDependencyWatcher = null;\n          return;\n        }\n        var shown = false;\n        for (var dep in runDependencyTracking) {\n          if (!shown) {\n            shown = true;\n            err('still waiting on run dependencies:');\n          }\n          err('dependency: ' + dep);\n        }\n        if (shown) {\n          err('(end of list)');\n        }\n      }, 10000);\n    }\n  } else {\n    err('warning: run dependency added without ID');\n  }\n}\n\nfunction removeRunDependency(id) {\n  runDependencies--;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(runDependencyTracking[id]);\n    delete runDependencyTracking[id];\n  } else {\n    err('warning: run dependency removed without ID');\n  }\n  if (runDependencies == 0) {\n    if (runDependencyWatcher !== null) {\n      clearInterval(runDependencyWatcher);\n      runDependencyWatcher = null;\n    }\n    if (dependenciesFulfilled) {\n      var callback = dependenciesFulfilled;\n      dependenciesFulfilled = null;\n      callback(); // can add another dependenciesFulfilled\n    }\n  }\n}\n\nModule[\"preloadedImages\"] = {}; // maps url to image data\nModule[\"preloadedAudios\"] = {}; // maps url to audio data\n\n\nfunction abort(what) {\n  if (Module['onAbort']) {\n    Module['onAbort'](what);\n  }\n\n  what += '';\n  out(what);\n  err(what);\n\n  ABORT = true;\n  EXITSTATUS = 1;\n\n  var output = 'abort(' + what + ') at ' + stackTrace();\n  what = output;\n\n  // Throw a wasm runtime error, because a JS error might be seen as a foreign\n  // exception, which means we'd run destructors on it. We need the error to\n  // simply make the program stop.\n  throw new WebAssembly.RuntimeError(what);\n}\n\n\nvar memoryInitializer = null;\n\n\n\n\n// show errors on likely calls to FS when it was not included\nvar FS = {\n  error: function() {\n    abort('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1');\n  },\n  init: function() { FS.error() },\n  createDataFile: function() { FS.error() },\n  createPreloadedFile: function() { FS.error() },\n  createLazyFile: function() { FS.error() },\n  open: function() { FS.error() },\n  mkdev: function() { FS.error() },\n  registerDevice: function() { FS.error() },\n  analyzePath: function() { FS.error() },\n  loadFilesFromDB: function() { FS.error() },\n\n  ErrnoError: function ErrnoError() { FS.error() },\n};\nModule['FS_createDataFile'] = FS.createDataFile;\nModule['FS_createPreloadedFile'] = FS.createPreloadedFile;\n\n\n\n// Copyright 2017 The Emscripten Authors.  All rights reserved.\n// Emscripten is available under two separate licenses, the MIT license and the\n// University of Illinois/NCSA Open Source License.  Both these licenses can be\n// found in the LICENSE file.\n\n// Prefix of data URIs emitted by SINGLE_FILE and related options.\nvar dataURIPrefix = 'data:application/octet-stream;base64,';\n\n// Indicates whether filename is a base64 data URI.\nfunction isDataURI(filename) {\n  return String.prototype.startsWith ?\n      filename.startsWith(dataURIPrefix) :\n      filename.indexOf(dataURIPrefix) === 0;\n}\n\n\n\n\nvar wasmBinaryFile = 'bezier_fit.wasm';\nif (!isDataURI(wasmBinaryFile)) {\n  wasmBinaryFile = locateFile(wasmBinaryFile);\n}\n\nfunction getBinary() {\n  try {\n    if (wasmBinary) {\n      return new Uint8Array(wasmBinary);\n    }\n\n    if (readBinary) {\n      return readBinary(wasmBinaryFile);\n    } else {\n      throw \"both async and sync fetching of the wasm failed\";\n    }\n  }\n  catch (err) {\n    abort(err);\n  }\n}\n\nfunction getBinaryPromise() {\n  // if we don't have the binary yet, and have the Fetch api, use that\n  // in some environments, like Electron's render process, Fetch api may be present, but have a different context than expected, let's only use it on the Web\n  if (!wasmBinary && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) && typeof fetch === 'function') {\n    return fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(function(response) {\n      if (!response['ok']) {\n        throw \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\";\n      }\n      return response['arrayBuffer']();\n    }).catch(function () {\n      return getBinary();\n    });\n  }\n  // Otherwise, getBinary should be able to get it synchronously\n  return new Promise(function(resolve, reject) {\n    resolve(getBinary());\n  });\n}\n\n\n\n// Create the wasm instance.\n// Receives the wasm imports, returns the exports.\nfunction createWasm() {\n  // prepare imports\n  var info = {\n    'env': asmLibraryArg,\n    'wasi_snapshot_preview1': asmLibraryArg\n  };\n  // Load the wasm module and create an instance of using native support in the JS engine.\n  // handle a generated wasm instance, receiving its exports and\n  // performing other necessary setup\n  function receiveInstance(instance, module) {\n    var exports = instance.exports;\n    Module['asm'] = exports;\n    removeRunDependency('wasm-instantiate');\n  }\n   // we can't run yet (except in a pthread, where we have a custom sync instantiator)\n  addRunDependency('wasm-instantiate');\n\n\n  // Async compilation can be confusing when an error on the page overwrites Module\n  // (for example, if the order of elements is wrong, and the one defining Module is\n  // later), so we save Module and check it later.\n  var trueModule = Module;\n  function receiveInstantiatedSource(output) {\n    // 'output' is a WebAssemblyInstantiatedSource object which has both the module and instance.\n    // receiveInstance() will swap in the exports (to Module.asm) so they can be called\n    assert(Module === trueModule, 'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?');\n    trueModule = null;\n      // TODO: Due to Closure regression https://github.com/google/closure-compiler/issues/3193, the above line no longer optimizes out down to the following line.\n      // When the regression is fixed, can restore the above USE_PTHREADS-enabled path.\n    receiveInstance(output['instance']);\n  }\n\n\n  function instantiateArrayBuffer(receiver) {\n    return getBinaryPromise().then(function(binary) {\n      return WebAssembly.instantiate(binary, info);\n    }).then(receiver, function(reason) {\n      err('failed to asynchronously prepare wasm: ' + reason);\n      abort(reason);\n    });\n  }\n\n  // Prefer streaming instantiation if available.\n  function instantiateAsync() {\n    if (!wasmBinary &&\n        typeof WebAssembly.instantiateStreaming === 'function' &&\n        !isDataURI(wasmBinaryFile) &&\n        typeof fetch === 'function') {\n      fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(function (response) {\n        var result = WebAssembly.instantiateStreaming(response, info);\n        return result.then(receiveInstantiatedSource, function(reason) {\n            // We expect the most common failure cause to be a bad MIME type for the binary,\n            // in which case falling back to ArrayBuffer instantiation should work.\n            err('wasm streaming compile failed: ' + reason);\n            err('falling back to ArrayBuffer instantiation');\n            instantiateArrayBuffer(receiveInstantiatedSource);\n          });\n      });\n    } else {\n      return instantiateArrayBuffer(receiveInstantiatedSource);\n    }\n  }\n  // User shell pages can write their own Module.instantiateWasm = function(imports, successCallback) callback\n  // to manually instantiate the Wasm module themselves. This allows pages to run the instantiation parallel\n  // to any other async startup actions they are performing.\n  if (Module['instantiateWasm']) {\n    try {\n      var exports = Module['instantiateWasm'](info, receiveInstance);\n      return exports;\n    } catch(e) {\n      err('Module.instantiateWasm callback failed with error: ' + e);\n      return false;\n    }\n  }\n\n  instantiateAsync();\n  return {}; // no exports yet; we'll fill them in later\n}\n\n\n// Globals used by JS i64 conversions\nvar tempDouble;\nvar tempI64;\n\n// === Body ===\n\nvar ASM_CONSTS = {\n  \n};\n\n\n\n\n// STATICTOP = STATIC_BASE + 20592;\n/* global initializers */  __ATINIT__.push({ func: function() { ___wasm_call_ctors() } });\n\n\n\n\n/* no memory initializer */\n// {{PRE_LIBRARY}}\n\n\n  function demangle(func) {\n      warnOnce('warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling');\n      return func;\n    }\n\n  function demangleAll(text) {\n      var regex =\n        /\\b_Z[\\w\\d_]+/g;\n      return text.replace(regex,\n        function(x) {\n          var y = demangle(x);\n          return x === y ? x : (y + ' [' + x + ']');\n        });\n    }\n\n  function jsStackTrace() {\n      var err = new Error();\n      if (!err.stack) {\n        // IE10+ special cases: It does have callstack info, but it is only populated if an Error object is thrown,\n        // so try that as a special-case.\n        try {\n          throw new Error(0);\n        } catch(e) {\n          err = e;\n        }\n        if (!err.stack) {\n          return '(no stack trace available)';\n        }\n      }\n      return err.stack.toString();\n    }\n\n  function stackTrace() {\n      var js = jsStackTrace();\n      if (Module['extraStackTrace']) js += '\\n' + Module['extraStackTrace']();\n      return demangleAll(js);\n    }\n\n  function ___cxa_allocate_exception(size) {\n      return _malloc(size);\n    }\n\n  \n  function _atexit(func, arg) {\n      warnOnce('atexit() called, but EXIT_RUNTIME is not set, so atexits() will not be called. set EXIT_RUNTIME to 1 (see the FAQ)');\n      __ATEXIT__.unshift({ func: func, arg: arg });\n    }function ___cxa_atexit(\n  ) {\n  return _atexit.apply(null, arguments)\n  }\n\n  \n  var ___exception_infos={};\n  \n  var ___exception_last=0;function ___cxa_throw(ptr, type, destructor) {\n      ___exception_infos[ptr] = {\n        ptr: ptr,\n        adjusted: [ptr],\n        type: type,\n        destructor: destructor,\n        refcount: 0,\n        caught: false,\n        rethrown: false\n      };\n      ___exception_last = ptr;\n      if (!(\"uncaught_exception\" in __ZSt18uncaught_exceptionv)) {\n        __ZSt18uncaught_exceptionv.uncaught_exceptions = 1;\n      } else {\n        __ZSt18uncaught_exceptionv.uncaught_exceptions++;\n      }\n      throw ptr + \" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.\";\n    }\n\n  function ___handle_stack_overflow() {\n      abort('stack overflow')\n    }\n\n  function ___lock() {}\n\n  \n  function ___setErrNo(value) {\n      if (Module['___errno_location']) HEAP32[((Module['___errno_location']())>>2)]=value;\n      else err('failed to set errno from JS');\n      return value;\n    }function ___map_file(pathname, size) {\n      ___setErrNo(63);\n      return -1;\n    }\n\n  \n  \n  \n  var PATH={splitPath:function(filename) {\n        var splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\n        return splitPathRe.exec(filename).slice(1);\n      },normalizeArray:function(parts, allowAboveRoot) {\n        // if the path tries to go above the root, `up` ends up > 0\n        var up = 0;\n        for (var i = parts.length - 1; i >= 0; i--) {\n          var last = parts[i];\n          if (last === '.') {\n            parts.splice(i, 1);\n          } else if (last === '..') {\n            parts.splice(i, 1);\n            up++;\n          } else if (up) {\n            parts.splice(i, 1);\n            up--;\n          }\n        }\n        // if the path is allowed to go above the root, restore leading ..s\n        if (allowAboveRoot) {\n          for (; up; up--) {\n            parts.unshift('..');\n          }\n        }\n        return parts;\n      },normalize:function(path) {\n        var isAbsolute = path.charAt(0) === '/',\n            trailingSlash = path.substr(-1) === '/';\n        // Normalize the path\n        path = PATH.normalizeArray(path.split('/').filter(function(p) {\n          return !!p;\n        }), !isAbsolute).join('/');\n        if (!path && !isAbsolute) {\n          path = '.';\n        }\n        if (path && trailingSlash) {\n          path += '/';\n        }\n        return (isAbsolute ? '/' : '') + path;\n      },dirname:function(path) {\n        var result = PATH.splitPath(path),\n            root = result[0],\n            dir = result[1];\n        if (!root && !dir) {\n          // No dirname whatsoever\n          return '.';\n        }\n        if (dir) {\n          // It has a dirname, strip trailing slash\n          dir = dir.substr(0, dir.length - 1);\n        }\n        return root + dir;\n      },basename:function(path) {\n        // EMSCRIPTEN return '/'' for '/', not an empty string\n        if (path === '/') return '/';\n        var lastSlash = path.lastIndexOf('/');\n        if (lastSlash === -1) return path;\n        return path.substr(lastSlash+1);\n      },extname:function(path) {\n        return PATH.splitPath(path)[3];\n      },join:function() {\n        var paths = Array.prototype.slice.call(arguments, 0);\n        return PATH.normalize(paths.join('/'));\n      },join2:function(l, r) {\n        return PATH.normalize(l + '/' + r);\n      }};var SYSCALLS={buffers:[null,[],[]],printChar:function(stream, curr) {\n        var buffer = SYSCALLS.buffers[stream];\n        assert(buffer);\n        if (curr === 0 || curr === 10) {\n          (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n          buffer.length = 0;\n        } else {\n          buffer.push(curr);\n        }\n      },varargs:0,get:function(varargs) {\n        SYSCALLS.varargs += 4;\n        var ret = HEAP32[(((SYSCALLS.varargs)-(4))>>2)];\n        return ret;\n      },getStr:function() {\n        var ret = UTF8ToString(SYSCALLS.get());\n        return ret;\n      },get64:function() {\n        var low = SYSCALLS.get(), high = SYSCALLS.get();\n        if (low >= 0) assert(high === 0);\n        else assert(high === -1);\n        return low;\n      },getZero:function() {\n        assert(SYSCALLS.get() === 0);\n      }};function __emscripten_syscall_munmap(addr, len) {\n      if (addr === -1 || len === 0) {\n        return -28;\n      }\n      // TODO: support unmmap'ing parts of allocations\n      var info = SYSCALLS.mappings[addr];\n      if (!info) return 0;\n      if (len === info.len) {\n        var stream = FS.getStream(info.fd);\n        SYSCALLS.doMsync(addr, stream, len, info.flags);\n        FS.munmap(stream);\n        SYSCALLS.mappings[addr] = null;\n        if (info.allocated) {\n          _free(info.malloc);\n        }\n      }\n      return 0;\n    }function ___syscall91(which, varargs) {SYSCALLS.varargs = varargs;\n  try {\n   // munmap\n      var addr = SYSCALLS.get(), len = SYSCALLS.get();\n      return __emscripten_syscall_munmap(addr, len);\n    } catch (e) {\n    if (typeof FS === 'undefined' || !(e instanceof FS.ErrnoError)) abort(e);\n    return -e.errno;\n  }\n  }\n\n  function ___unlock() {}\n\n  function _abort() {\n      abort();\n    }\n\n  \n  function _emscripten_get_now() { abort() }\n  \n  function _emscripten_get_now_is_monotonic() {\n      // return whether emscripten_get_now is guaranteed monotonic; the Date.now\n      // implementation is not :(\n      return (0\n  \n        // Modern environment where performance.now() is supported: (rely on minifier to return true unconditionally from this function)\n        || 1\n  \n        );\n    }function _clock_gettime(clk_id, tp) {\n      // int clock_gettime(clockid_t clk_id, struct timespec *tp);\n      var now;\n      if (clk_id === 0) {\n        now = Date.now();\n      } else if (clk_id === 1 && _emscripten_get_now_is_monotonic()) {\n        now = _emscripten_get_now();\n      } else {\n        ___setErrNo(28);\n        return -1;\n      }\n      HEAP32[((tp)>>2)]=(now/1000)|0; // seconds\n      HEAP32[(((tp)+(4))>>2)]=((now % 1000)*1000*1000)|0; // nanoseconds\n      return 0;\n    }\n\n  function _emscripten_get_heap_size() {\n      return HEAP8.length;\n    }\n\n  function _emscripten_get_sbrk_ptr() {\n      return 21456;\n    }\n\n  function _emscripten_memcpy_big(dest, src, num) {\n      HEAPU8.set(HEAPU8.subarray(src, src+num), dest);\n    }\n\n  \n  function abortOnCannotGrowMemory(requestedSize) {\n      abort('Cannot enlarge memory arrays to size ' + requestedSize + ' bytes (OOM). Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value ' + HEAP8.length + ', (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ');\n    }function _emscripten_resize_heap(requestedSize) {\n      abortOnCannotGrowMemory(requestedSize);\n    }\n\n  \n  \n  var ENV={};function _emscripten_get_environ() {\n      if (!_emscripten_get_environ.strings) {\n        // Default values.\n        var env = {\n          'USER': 'web_user',\n          'LOGNAME': 'web_user',\n          'PATH': '/',\n          'PWD': '/',\n          'HOME': '/home/web_user',\n          // Browser language detection #8751\n          'LANG': ((typeof navigator === 'object' && navigator.languages && navigator.languages[0]) || 'C').replace('-', '_') + '.UTF-8',\n          '_': thisProgram\n        };\n        // Apply the user-provided values, if any.\n        for (var x in ENV) {\n          env[x] = ENV[x];\n        }\n        var strings = [];\n        for (var x in env) {\n          strings.push(x + '=' + env[x]);\n        }\n        _emscripten_get_environ.strings = strings;\n      }\n      return _emscripten_get_environ.strings;\n    }function _environ_get(__environ, environ_buf) {\n      var strings = _emscripten_get_environ();\n      var bufSize = 0;\n      strings.forEach(function(string, i) {\n        var ptr = environ_buf + bufSize;\n        HEAP32[(((__environ)+(i * 4))>>2)]=ptr;\n        writeAsciiToMemory(string, ptr);\n        bufSize += string.length + 1;\n      });\n      return 0;\n    }\n\n  function _environ_sizes_get(penviron_count, penviron_buf_size) {\n      var strings = _emscripten_get_environ();\n      HEAP32[((penviron_count)>>2)]=strings.length;\n      var bufSize = 0;\n      strings.forEach(function(string) {\n        bufSize += string.length + 1;\n      });\n      HEAP32[((penviron_buf_size)>>2)]=bufSize;\n      return 0;\n    }\n\n  function _fd_close(fd) {try {\n  \n      abort('it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM');\n      return 0;\n    } catch (e) {\n    if (typeof FS === 'undefined' || !(e instanceof FS.ErrnoError)) abort(e);\n    return e.errno;\n  }\n  }\n\n  function _fd_read(fd, iov, iovcnt, pnum) {try {\n  \n      var stream = SYSCALLS.getStreamFromFD(fd);\n      var num = SYSCALLS.doReadv(stream, iov, iovcnt);\n      HEAP32[((pnum)>>2)]=num\n      return 0;\n    } catch (e) {\n    if (typeof FS === 'undefined' || !(e instanceof FS.ErrnoError)) abort(e);\n    return e.errno;\n  }\n  }\n\n  function _fd_seek(fd, offset_low, offset_high, whence, newOffset) {try {\n  \n      abort('it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM');\n      return 0;\n    } catch (e) {\n    if (typeof FS === 'undefined' || !(e instanceof FS.ErrnoError)) abort(e);\n    return e.errno;\n  }\n  }\n\n  \n  function flush_NO_FILESYSTEM() {\n      // flush anything remaining in the buffers during shutdown\n      var fflush = Module[\"_fflush\"];\n      if (fflush) fflush(0);\n      var buffers = SYSCALLS.buffers;\n      if (buffers[1].length) SYSCALLS.printChar(1, 10);\n      if (buffers[2].length) SYSCALLS.printChar(2, 10);\n    }function _fd_write(fd, iov, iovcnt, pnum) {try {\n  \n      // hack to support printf in SYSCALLS_REQUIRE_FILESYSTEM=0\n      var num = 0;\n      for (var i = 0; i < iovcnt; i++) {\n        var ptr = HEAP32[(((iov)+(i*8))>>2)];\n        var len = HEAP32[(((iov)+(i*8 + 4))>>2)];\n        for (var j = 0; j < len; j++) {\n          SYSCALLS.printChar(fd, HEAPU8[ptr+j]);\n        }\n        num += len;\n      }\n      HEAP32[((pnum)>>2)]=num\n      return 0;\n    } catch (e) {\n    if (typeof FS === 'undefined' || !(e instanceof FS.ErrnoError)) abort(e);\n    return e.errno;\n  }\n  }\n\n  \n  function _memcpy(dest, src, num) {\n      dest = dest|0; src = src|0; num = num|0;\n      var ret = 0;\n      var aligned_dest_end = 0;\n      var block_aligned_dest_end = 0;\n      var dest_end = 0;\n      // Test against a benchmarked cutoff limit for when HEAPU8.set() becomes faster to use.\n      if ((num|0) >= 8192) {\n        _emscripten_memcpy_big(dest|0, src|0, num|0)|0;\n        return dest|0;\n      }\n  \n      ret = dest|0;\n      dest_end = (dest + num)|0;\n      if ((dest&3) == (src&3)) {\n        // The initial unaligned < 4-byte front.\n        while (dest & 3) {\n          if ((num|0) == 0) return ret|0;\n          HEAP8[((dest)>>0)]=((HEAP8[((src)>>0)])|0);\n          dest = (dest+1)|0;\n          src = (src+1)|0;\n          num = (num-1)|0;\n        }\n        aligned_dest_end = (dest_end & -4)|0;\n        block_aligned_dest_end = (aligned_dest_end - 64)|0;\n        while ((dest|0) <= (block_aligned_dest_end|0) ) {\n          HEAP32[((dest)>>2)]=((HEAP32[((src)>>2)])|0);\n          HEAP32[(((dest)+(4))>>2)]=((HEAP32[(((src)+(4))>>2)])|0);\n          HEAP32[(((dest)+(8))>>2)]=((HEAP32[(((src)+(8))>>2)])|0);\n          HEAP32[(((dest)+(12))>>2)]=((HEAP32[(((src)+(12))>>2)])|0);\n          HEAP32[(((dest)+(16))>>2)]=((HEAP32[(((src)+(16))>>2)])|0);\n          HEAP32[(((dest)+(20))>>2)]=((HEAP32[(((src)+(20))>>2)])|0);\n          HEAP32[(((dest)+(24))>>2)]=((HEAP32[(((src)+(24))>>2)])|0);\n          HEAP32[(((dest)+(28))>>2)]=((HEAP32[(((src)+(28))>>2)])|0);\n          HEAP32[(((dest)+(32))>>2)]=((HEAP32[(((src)+(32))>>2)])|0);\n          HEAP32[(((dest)+(36))>>2)]=((HEAP32[(((src)+(36))>>2)])|0);\n          HEAP32[(((dest)+(40))>>2)]=((HEAP32[(((src)+(40))>>2)])|0);\n          HEAP32[(((dest)+(44))>>2)]=((HEAP32[(((src)+(44))>>2)])|0);\n          HEAP32[(((dest)+(48))>>2)]=((HEAP32[(((src)+(48))>>2)])|0);\n          HEAP32[(((dest)+(52))>>2)]=((HEAP32[(((src)+(52))>>2)])|0);\n          HEAP32[(((dest)+(56))>>2)]=((HEAP32[(((src)+(56))>>2)])|0);\n          HEAP32[(((dest)+(60))>>2)]=((HEAP32[(((src)+(60))>>2)])|0);\n          dest = (dest+64)|0;\n          src = (src+64)|0;\n        }\n        while ((dest|0) < (aligned_dest_end|0) ) {\n          HEAP32[((dest)>>2)]=((HEAP32[((src)>>2)])|0);\n          dest = (dest+4)|0;\n          src = (src+4)|0;\n        }\n      } else {\n        // In the unaligned copy case, unroll a bit as well.\n        aligned_dest_end = (dest_end - 4)|0;\n        while ((dest|0) < (aligned_dest_end|0) ) {\n          HEAP8[((dest)>>0)]=((HEAP8[((src)>>0)])|0);\n          HEAP8[(((dest)+(1))>>0)]=((HEAP8[(((src)+(1))>>0)])|0);\n          HEAP8[(((dest)+(2))>>0)]=((HEAP8[(((src)+(2))>>0)])|0);\n          HEAP8[(((dest)+(3))>>0)]=((HEAP8[(((src)+(3))>>0)])|0);\n          dest = (dest+4)|0;\n          src = (src+4)|0;\n        }\n      }\n      // The remaining unaligned < 4 byte tail.\n      while ((dest|0) < (dest_end|0)) {\n        HEAP8[((dest)>>0)]=((HEAP8[((src)>>0)])|0);\n        dest = (dest+1)|0;\n        src = (src+1)|0;\n      }\n      return ret|0;\n    }\n\n  function _memset(ptr, value, num) {\n      ptr = ptr|0; value = value|0; num = num|0;\n      var end = 0, aligned_end = 0, block_aligned_end = 0, value4 = 0;\n      end = (ptr + num)|0;\n  \n      value = value & 0xff;\n      if ((num|0) >= 67 /* 64 bytes for an unrolled loop + 3 bytes for unaligned head*/) {\n        while ((ptr&3) != 0) {\n          HEAP8[((ptr)>>0)]=value;\n          ptr = (ptr+1)|0;\n        }\n  \n        aligned_end = (end & -4)|0;\n        value4 = value | (value << 8) | (value << 16) | (value << 24);\n  \n        block_aligned_end = (aligned_end - 64)|0;\n  \n        while((ptr|0) <= (block_aligned_end|0)) {\n          HEAP32[((ptr)>>2)]=value4;\n          HEAP32[(((ptr)+(4))>>2)]=value4;\n          HEAP32[(((ptr)+(8))>>2)]=value4;\n          HEAP32[(((ptr)+(12))>>2)]=value4;\n          HEAP32[(((ptr)+(16))>>2)]=value4;\n          HEAP32[(((ptr)+(20))>>2)]=value4;\n          HEAP32[(((ptr)+(24))>>2)]=value4;\n          HEAP32[(((ptr)+(28))>>2)]=value4;\n          HEAP32[(((ptr)+(32))>>2)]=value4;\n          HEAP32[(((ptr)+(36))>>2)]=value4;\n          HEAP32[(((ptr)+(40))>>2)]=value4;\n          HEAP32[(((ptr)+(44))>>2)]=value4;\n          HEAP32[(((ptr)+(48))>>2)]=value4;\n          HEAP32[(((ptr)+(52))>>2)]=value4;\n          HEAP32[(((ptr)+(56))>>2)]=value4;\n          HEAP32[(((ptr)+(60))>>2)]=value4;\n          ptr = (ptr + 64)|0;\n        }\n  \n        while ((ptr|0) < (aligned_end|0) ) {\n          HEAP32[((ptr)>>2)]=value4;\n          ptr = (ptr+4)|0;\n        }\n      }\n      // The remaining bytes.\n      while ((ptr|0) < (end|0)) {\n        HEAP8[((ptr)>>0)]=value;\n        ptr = (ptr+1)|0;\n      }\n      return (end-num)|0;\n    }\n\n  function _setTempRet0($i) {\n      setTempRet0(($i) | 0);\n    }\n\n  \n  \n  function __isLeapYear(year) {\n        return year%4 === 0 && (year%100 !== 0 || year%400 === 0);\n    }\n  \n  function __arraySum(array, index) {\n      var sum = 0;\n      for (var i = 0; i <= index; sum += array[i++]);\n      return sum;\n    }\n  \n  \n  var __MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31];\n  \n  var __MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function __addDays(date, days) {\n      var newDate = new Date(date.getTime());\n      while(days > 0) {\n        var leap = __isLeapYear(newDate.getFullYear());\n        var currentMonth = newDate.getMonth();\n        var daysInCurrentMonth = (leap ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR)[currentMonth];\n  \n        if (days > daysInCurrentMonth-newDate.getDate()) {\n          // we spill over to next month\n          days -= (daysInCurrentMonth-newDate.getDate()+1);\n          newDate.setDate(1);\n          if (currentMonth < 11) {\n            newDate.setMonth(currentMonth+1)\n          } else {\n            newDate.setMonth(0);\n            newDate.setFullYear(newDate.getFullYear()+1);\n          }\n        } else {\n          // we stay in current month\n          newDate.setDate(newDate.getDate()+days);\n          return newDate;\n        }\n      }\n  \n      return newDate;\n    }function _strftime(s, maxsize, format, tm) {\n      // size_t strftime(char *restrict s, size_t maxsize, const char *restrict format, const struct tm *restrict timeptr);\n      // http://pubs.opengroup.org/onlinepubs/009695399/functions/strftime.html\n  \n      var tm_zone = HEAP32[(((tm)+(40))>>2)];\n  \n      var date = {\n        tm_sec: HEAP32[((tm)>>2)],\n        tm_min: HEAP32[(((tm)+(4))>>2)],\n        tm_hour: HEAP32[(((tm)+(8))>>2)],\n        tm_mday: HEAP32[(((tm)+(12))>>2)],\n        tm_mon: HEAP32[(((tm)+(16))>>2)],\n        tm_year: HEAP32[(((tm)+(20))>>2)],\n        tm_wday: HEAP32[(((tm)+(24))>>2)],\n        tm_yday: HEAP32[(((tm)+(28))>>2)],\n        tm_isdst: HEAP32[(((tm)+(32))>>2)],\n        tm_gmtoff: HEAP32[(((tm)+(36))>>2)],\n        tm_zone: tm_zone ? UTF8ToString(tm_zone) : ''\n      };\n  \n      var pattern = UTF8ToString(format);\n  \n      // expand format\n      var EXPANSION_RULES_1 = {\n        '%c': '%a %b %d %H:%M:%S %Y',     // Replaced by the locale's appropriate date and time representation - e.g., Mon Aug  3 14:02:01 2013\n        '%D': '%m/%d/%y',                 // Equivalent to %m / %d / %y\n        '%F': '%Y-%m-%d',                 // Equivalent to %Y - %m - %d\n        '%h': '%b',                       // Equivalent to %b\n        '%r': '%I:%M:%S %p',              // Replaced by the time in a.m. and p.m. notation\n        '%R': '%H:%M',                    // Replaced by the time in 24-hour notation\n        '%T': '%H:%M:%S',                 // Replaced by the time\n        '%x': '%m/%d/%y',                 // Replaced by the locale's appropriate date representation\n        '%X': '%H:%M:%S',                 // Replaced by the locale's appropriate time representation\n        // Modified Conversion Specifiers\n        '%Ec': '%c',                      // Replaced by the locale's alternative appropriate date and time representation.\n        '%EC': '%C',                      // Replaced by the name of the base year (period) in the locale's alternative representation.\n        '%Ex': '%m/%d/%y',                // Replaced by the locale's alternative date representation.\n        '%EX': '%H:%M:%S',                // Replaced by the locale's alternative time representation.\n        '%Ey': '%y',                      // Replaced by the offset from %EC (year only) in the locale's alternative representation.\n        '%EY': '%Y',                      // Replaced by the full alternative year representation.\n        '%Od': '%d',                      // Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading zeros if there is any alternative symbol for zero; otherwise, with leading <space> characters.\n        '%Oe': '%e',                      // Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading <space> characters.\n        '%OH': '%H',                      // Replaced by the hour (24-hour clock) using the locale's alternative numeric symbols.\n        '%OI': '%I',                      // Replaced by the hour (12-hour clock) using the locale's alternative numeric symbols.\n        '%Om': '%m',                      // Replaced by the month using the locale's alternative numeric symbols.\n        '%OM': '%M',                      // Replaced by the minutes using the locale's alternative numeric symbols.\n        '%OS': '%S',                      // Replaced by the seconds using the locale's alternative numeric symbols.\n        '%Ou': '%u',                      // Replaced by the weekday as a number in the locale's alternative representation (Monday=1).\n        '%OU': '%U',                      // Replaced by the week number of the year (Sunday as the first day of the week, rules corresponding to %U ) using the locale's alternative numeric symbols.\n        '%OV': '%V',                      // Replaced by the week number of the year (Monday as the first day of the week, rules corresponding to %V ) using the locale's alternative numeric symbols.\n        '%Ow': '%w',                      // Replaced by the number of the weekday (Sunday=0) using the locale's alternative numeric symbols.\n        '%OW': '%W',                      // Replaced by the week number of the year (Monday as the first day of the week) using the locale's alternative numeric symbols.\n        '%Oy': '%y',                      // Replaced by the year (offset from %C ) using the locale's alternative numeric symbols.\n      };\n      for (var rule in EXPANSION_RULES_1) {\n        pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_1[rule]);\n      }\n  \n      var WEEKDAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n      var MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  \n      function leadingSomething(value, digits, character) {\n        var str = typeof value === 'number' ? value.toString() : (value || '');\n        while (str.length < digits) {\n          str = character[0]+str;\n        }\n        return str;\n      }\n  \n      function leadingNulls(value, digits) {\n        return leadingSomething(value, digits, '0');\n      }\n  \n      function compareByDay(date1, date2) {\n        function sgn(value) {\n          return value < 0 ? -1 : (value > 0 ? 1 : 0);\n        }\n  \n        var compare;\n        if ((compare = sgn(date1.getFullYear()-date2.getFullYear())) === 0) {\n          if ((compare = sgn(date1.getMonth()-date2.getMonth())) === 0) {\n            compare = sgn(date1.getDate()-date2.getDate());\n          }\n        }\n        return compare;\n      }\n  \n      function getFirstWeekStartDate(janFourth) {\n          switch (janFourth.getDay()) {\n            case 0: // Sunday\n              return new Date(janFourth.getFullYear()-1, 11, 29);\n            case 1: // Monday\n              return janFourth;\n            case 2: // Tuesday\n              return new Date(janFourth.getFullYear(), 0, 3);\n            case 3: // Wednesday\n              return new Date(janFourth.getFullYear(), 0, 2);\n            case 4: // Thursday\n              return new Date(janFourth.getFullYear(), 0, 1);\n            case 5: // Friday\n              return new Date(janFourth.getFullYear()-1, 11, 31);\n            case 6: // Saturday\n              return new Date(janFourth.getFullYear()-1, 11, 30);\n          }\n      }\n  \n      function getWeekBasedYear(date) {\n          var thisDate = __addDays(new Date(date.tm_year+1900, 0, 1), date.tm_yday);\n  \n          var janFourthThisYear = new Date(thisDate.getFullYear(), 0, 4);\n          var janFourthNextYear = new Date(thisDate.getFullYear()+1, 0, 4);\n  \n          var firstWeekStartThisYear = getFirstWeekStartDate(janFourthThisYear);\n          var firstWeekStartNextYear = getFirstWeekStartDate(janFourthNextYear);\n  \n          if (compareByDay(firstWeekStartThisYear, thisDate) <= 0) {\n            // this date is after the start of the first week of this year\n            if (compareByDay(firstWeekStartNextYear, thisDate) <= 0) {\n              return thisDate.getFullYear()+1;\n            } else {\n              return thisDate.getFullYear();\n            }\n          } else {\n            return thisDate.getFullYear()-1;\n          }\n      }\n  \n      var EXPANSION_RULES_2 = {\n        '%a': function(date) {\n          return WEEKDAYS[date.tm_wday].substring(0,3);\n        },\n        '%A': function(date) {\n          return WEEKDAYS[date.tm_wday];\n        },\n        '%b': function(date) {\n          return MONTHS[date.tm_mon].substring(0,3);\n        },\n        '%B': function(date) {\n          return MONTHS[date.tm_mon];\n        },\n        '%C': function(date) {\n          var year = date.tm_year+1900;\n          return leadingNulls((year/100)|0,2);\n        },\n        '%d': function(date) {\n          return leadingNulls(date.tm_mday, 2);\n        },\n        '%e': function(date) {\n          return leadingSomething(date.tm_mday, 2, ' ');\n        },\n        '%g': function(date) {\n          // %g, %G, and %V give values according to the ISO 8601:2000 standard week-based year.\n          // In this system, weeks begin on a Monday and week 1 of the year is the week that includes\n          // January 4th, which is also the week that includes the first Thursday of the year, and\n          // is also the first week that contains at least four days in the year.\n          // If the first Monday of January is the 2nd, 3rd, or 4th, the preceding days are part of\n          // the last week of the preceding year; thus, for Saturday 2nd January 1999,\n          // %G is replaced by 1998 and %V is replaced by 53. If December 29th, 30th,\n          // or 31st is a Monday, it and any following days are part of week 1 of the following year.\n          // Thus, for Tuesday 30th December 1997, %G is replaced by 1998 and %V is replaced by 01.\n  \n          return getWeekBasedYear(date).toString().substring(2);\n        },\n        '%G': function(date) {\n          return getWeekBasedYear(date);\n        },\n        '%H': function(date) {\n          return leadingNulls(date.tm_hour, 2);\n        },\n        '%I': function(date) {\n          var twelveHour = date.tm_hour;\n          if (twelveHour == 0) twelveHour = 12;\n          else if (twelveHour > 12) twelveHour -= 12;\n          return leadingNulls(twelveHour, 2);\n        },\n        '%j': function(date) {\n          // Day of the year (001-366)\n          return leadingNulls(date.tm_mday+__arraySum(__isLeapYear(date.tm_year+1900) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, date.tm_mon-1), 3);\n        },\n        '%m': function(date) {\n          return leadingNulls(date.tm_mon+1, 2);\n        },\n        '%M': function(date) {\n          return leadingNulls(date.tm_min, 2);\n        },\n        '%n': function() {\n          return '\\n';\n        },\n        '%p': function(date) {\n          if (date.tm_hour >= 0 && date.tm_hour < 12) {\n            return 'AM';\n          } else {\n            return 'PM';\n          }\n        },\n        '%S': function(date) {\n          return leadingNulls(date.tm_sec, 2);\n        },\n        '%t': function() {\n          return '\\t';\n        },\n        '%u': function(date) {\n          return date.tm_wday || 7;\n        },\n        '%U': function(date) {\n          // Replaced by the week number of the year as a decimal number [00,53].\n          // The first Sunday of January is the first day of week 1;\n          // days in the new year before this are in week 0. [ tm_year, tm_wday, tm_yday]\n          var janFirst = new Date(date.tm_year+1900, 0, 1);\n          var firstSunday = janFirst.getDay() === 0 ? janFirst : __addDays(janFirst, 7-janFirst.getDay());\n          var endDate = new Date(date.tm_year+1900, date.tm_mon, date.tm_mday);\n  \n          // is target date after the first Sunday?\n          if (compareByDay(firstSunday, endDate) < 0) {\n            // calculate difference in days between first Sunday and endDate\n            var februaryFirstUntilEndMonth = __arraySum(__isLeapYear(endDate.getFullYear()) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, endDate.getMonth()-1)-31;\n            var firstSundayUntilEndJanuary = 31-firstSunday.getDate();\n            var days = firstSundayUntilEndJanuary+februaryFirstUntilEndMonth+endDate.getDate();\n            return leadingNulls(Math.ceil(days/7), 2);\n          }\n  \n          return compareByDay(firstSunday, janFirst) === 0 ? '01': '00';\n        },\n        '%V': function(date) {\n          // Replaced by the week number of the year (Monday as the first day of the week)\n          // as a decimal number [01,53]. If the week containing 1 January has four\n          // or more days in the new year, then it is considered week 1.\n          // Otherwise, it is the last week of the previous year, and the next week is week 1.\n          // Both January 4th and the first Thursday of January are always in week 1. [ tm_year, tm_wday, tm_yday]\n          var janFourthThisYear = new Date(date.tm_year+1900, 0, 4);\n          var janFourthNextYear = new Date(date.tm_year+1901, 0, 4);\n  \n          var firstWeekStartThisYear = getFirstWeekStartDate(janFourthThisYear);\n          var firstWeekStartNextYear = getFirstWeekStartDate(janFourthNextYear);\n  \n          var endDate = __addDays(new Date(date.tm_year+1900, 0, 1), date.tm_yday);\n  \n          if (compareByDay(endDate, firstWeekStartThisYear) < 0) {\n            // if given date is before this years first week, then it belongs to the 53rd week of last year\n            return '53';\n          }\n  \n          if (compareByDay(firstWeekStartNextYear, endDate) <= 0) {\n            // if given date is after next years first week, then it belongs to the 01th week of next year\n            return '01';\n          }\n  \n          // given date is in between CW 01..53 of this calendar year\n          var daysDifference;\n          if (firstWeekStartThisYear.getFullYear() < date.tm_year+1900) {\n            // first CW of this year starts last year\n            daysDifference = date.tm_yday+32-firstWeekStartThisYear.getDate()\n          } else {\n            // first CW of this year starts this year\n            daysDifference = date.tm_yday+1-firstWeekStartThisYear.getDate();\n          }\n          return leadingNulls(Math.ceil(daysDifference/7), 2);\n        },\n        '%w': function(date) {\n          return date.tm_wday;\n        },\n        '%W': function(date) {\n          // Replaced by the week number of the year as a decimal number [00,53].\n          // The first Monday of January is the first day of week 1;\n          // days in the new year before this are in week 0. [ tm_year, tm_wday, tm_yday]\n          var janFirst = new Date(date.tm_year, 0, 1);\n          var firstMonday = janFirst.getDay() === 1 ? janFirst : __addDays(janFirst, janFirst.getDay() === 0 ? 1 : 7-janFirst.getDay()+1);\n          var endDate = new Date(date.tm_year+1900, date.tm_mon, date.tm_mday);\n  \n          // is target date after the first Monday?\n          if (compareByDay(firstMonday, endDate) < 0) {\n            var februaryFirstUntilEndMonth = __arraySum(__isLeapYear(endDate.getFullYear()) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, endDate.getMonth()-1)-31;\n            var firstMondayUntilEndJanuary = 31-firstMonday.getDate();\n            var days = firstMondayUntilEndJanuary+februaryFirstUntilEndMonth+endDate.getDate();\n            return leadingNulls(Math.ceil(days/7), 2);\n          }\n          return compareByDay(firstMonday, janFirst) === 0 ? '01': '00';\n        },\n        '%y': function(date) {\n          // Replaced by the last two digits of the year as a decimal number [00,99]. [ tm_year]\n          return (date.tm_year+1900).toString().substring(2);\n        },\n        '%Y': function(date) {\n          // Replaced by the year as a decimal number (for example, 1997). [ tm_year]\n          return date.tm_year+1900;\n        },\n        '%z': function(date) {\n          // Replaced by the offset from UTC in the ISO 8601:2000 standard format ( +hhmm or -hhmm ).\n          // For example, \"-0430\" means 4 hours 30 minutes behind UTC (west of Greenwich).\n          var off = date.tm_gmtoff;\n          var ahead = off >= 0;\n          off = Math.abs(off) / 60;\n          // convert from minutes into hhmm format (which means 60 minutes = 100 units)\n          off = (off / 60)*100 + (off % 60);\n          return (ahead ? '+' : '-') + String(\"0000\" + off).slice(-4);\n        },\n        '%Z': function(date) {\n          return date.tm_zone;\n        },\n        '%%': function() {\n          return '%';\n        }\n      };\n      for (var rule in EXPANSION_RULES_2) {\n        if (pattern.indexOf(rule) >= 0) {\n          pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_2[rule](date));\n        }\n      }\n  \n      var bytes = intArrayFromString(pattern, false);\n      if (bytes.length > maxsize) {\n        return 0;\n      }\n  \n      writeArrayToMemory(bytes, s);\n      return bytes.length-1;\n    }function _strftime_l(s, maxsize, format, tm) {\n      return _strftime(s, maxsize, format, tm); // no locale support yet\n    }\n_emscripten_get_now = function() { return performance['now'](); };\n  ;\nvar ASSERTIONS = true;\n\n// Copyright 2017 The Emscripten Authors.  All rights reserved.\n// Emscripten is available under two separate licenses, the MIT license and the\n// University of Illinois/NCSA Open Source License.  Both these licenses can be\n// found in the LICENSE file.\n\n/** @type {function(string, boolean=, number=)} */\nfunction intArrayFromString(stringy, dontAddNull, length) {\n  var len = length > 0 ? length : lengthBytesUTF8(stringy)+1;\n  var u8array = new Array(len);\n  var numBytesWritten = stringToUTF8Array(stringy, u8array, 0, u8array.length);\n  if (dontAddNull) u8array.length = numBytesWritten;\n  return u8array;\n}\n\nfunction intArrayToString(array) {\n  var ret = [];\n  for (var i = 0; i < array.length; i++) {\n    var chr = array[i];\n    if (chr > 0xFF) {\n      if (ASSERTIONS) {\n        assert(false, 'Character code ' + chr + ' (' + String.fromCharCode(chr) + ')  at offset ' + i + ' not in 0x00-0xFF.');\n      }\n      chr &= 0xFF;\n    }\n    ret.push(String.fromCharCode(chr));\n  }\n  return ret.join('');\n}\n\n\n// ASM_LIBRARY EXTERN PRIMITIVES: Int8Array,Int32Array\n\nvar asmGlobalArg = {};\nvar asmLibraryArg = { \"__cxa_allocate_exception\": ___cxa_allocate_exception, \"__cxa_atexit\": ___cxa_atexit, \"__cxa_throw\": ___cxa_throw, \"__handle_stack_overflow\": ___handle_stack_overflow, \"__lock\": ___lock, \"__map_file\": ___map_file, \"__syscall91\": ___syscall91, \"__unlock\": ___unlock, \"abort\": _abort, \"clock_gettime\": _clock_gettime, \"emscripten_get_sbrk_ptr\": _emscripten_get_sbrk_ptr, \"emscripten_memcpy_big\": _emscripten_memcpy_big, \"emscripten_resize_heap\": _emscripten_resize_heap, \"environ_get\": _environ_get, \"environ_sizes_get\": _environ_sizes_get, \"fd_close\": _fd_close, \"fd_read\": _fd_read, \"fd_seek\": _fd_seek, \"fd_write\": _fd_write, \"memory\": wasmMemory, \"setTempRet0\": _setTempRet0, \"strftime_l\": _strftime_l, \"table\": wasmTable };\nvar asm = createWasm();\nvar real____wasm_call_ctors = asm[\"__wasm_call_ctors\"];\nasm[\"__wasm_call_ctors\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real____wasm_call_ctors.apply(null, arguments);\n};\n\nvar real__malloc = asm[\"malloc\"];\nasm[\"malloc\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real__malloc.apply(null, arguments);\n};\n\nvar real__free = asm[\"free\"];\nasm[\"free\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real__free.apply(null, arguments);\n};\n\nvar real__c_GroupStrokes = asm[\"c_GroupStrokes\"];\nasm[\"c_GroupStrokes\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real__c_GroupStrokes.apply(null, arguments);\n};\n\nvar real__c_FitCurve = asm[\"c_FitCurve\"];\nasm[\"c_FitCurve\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real__c_FitCurve.apply(null, arguments);\n};\n\nvar real__c_ML_EncodeCurves = asm[\"c_ML_EncodeCurves\"];\nasm[\"c_ML_EncodeCurves\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real__c_ML_EncodeCurves.apply(null, arguments);\n};\n\nvar real__setThrew = asm[\"setThrew\"];\nasm[\"setThrew\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real__setThrew.apply(null, arguments);\n};\n\nvar real___ZSt18uncaught_exceptionv = asm[\"_ZSt18uncaught_exceptionv\"];\nasm[\"_ZSt18uncaught_exceptionv\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real___ZSt18uncaught_exceptionv.apply(null, arguments);\n};\n\nvar real____set_stack_limit = asm[\"__set_stack_limit\"];\nasm[\"__set_stack_limit\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real____set_stack_limit.apply(null, arguments);\n};\n\nvar real_stackSave = asm[\"stackSave\"];\nasm[\"stackSave\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_stackSave.apply(null, arguments);\n};\n\nvar real_stackAlloc = asm[\"stackAlloc\"];\nasm[\"stackAlloc\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_stackAlloc.apply(null, arguments);\n};\n\nvar real_stackRestore = asm[\"stackRestore\"];\nasm[\"stackRestore\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_stackRestore.apply(null, arguments);\n};\n\nvar real___growWasmMemory = asm[\"__growWasmMemory\"];\nasm[\"__growWasmMemory\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real___growWasmMemory.apply(null, arguments);\n};\n\nvar real_dynCall_iii = asm[\"dynCall_iii\"];\nasm[\"dynCall_iii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iii.apply(null, arguments);\n};\n\nvar real_dynCall_ii = asm[\"dynCall_ii\"];\nasm[\"dynCall_ii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_ii.apply(null, arguments);\n};\n\nvar real_dynCall_iiii = asm[\"dynCall_iiii\"];\nasm[\"dynCall_iiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiii.apply(null, arguments);\n};\n\nvar real_dynCall_jiji = asm[\"dynCall_jiji\"];\nasm[\"dynCall_jiji\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_jiji.apply(null, arguments);\n};\n\nvar real_dynCall_iidiiii = asm[\"dynCall_iidiiii\"];\nasm[\"dynCall_iidiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iidiiii.apply(null, arguments);\n};\n\nvar real_dynCall_vii = asm[\"dynCall_vii\"];\nasm[\"dynCall_vii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_vii.apply(null, arguments);\n};\n\nvar real_dynCall_vi = asm[\"dynCall_vi\"];\nasm[\"dynCall_vi\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_vi.apply(null, arguments);\n};\n\nvar real_dynCall_viijii = asm[\"dynCall_viijii\"];\nasm[\"dynCall_viijii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_viijii.apply(null, arguments);\n};\n\nvar real_dynCall_viiii = asm[\"dynCall_viiii\"];\nasm[\"dynCall_viiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_viiii.apply(null, arguments);\n};\n\nvar real_dynCall_iiiii = asm[\"dynCall_iiiii\"];\nasm[\"dynCall_iiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiii.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiii = asm[\"dynCall_iiiiii\"];\nasm[\"dynCall_iiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiii.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiiiiii = asm[\"dynCall_iiiiiiiii\"];\nasm[\"dynCall_iiiiiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiiiiii.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiiii = asm[\"dynCall_iiiiiii\"];\nasm[\"dynCall_iiiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiiii.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiij = asm[\"dynCall_iiiiij\"];\nasm[\"dynCall_iiiiij\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiij.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiid = asm[\"dynCall_iiiiid\"];\nasm[\"dynCall_iiiiid\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiid.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiijj = asm[\"dynCall_iiiiijj\"];\nasm[\"dynCall_iiiiijj\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiijj.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiiiii = asm[\"dynCall_iiiiiiii\"];\nasm[\"dynCall_iiiiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiiiii.apply(null, arguments);\n};\n\nvar real_dynCall_iiiiiijj = asm[\"dynCall_iiiiiijj\"];\nasm[\"dynCall_iiiiiijj\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_iiiiiijj.apply(null, arguments);\n};\n\nvar real_dynCall_viiiiii = asm[\"dynCall_viiiiii\"];\nasm[\"dynCall_viiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_viiiiii.apply(null, arguments);\n};\n\nvar real_dynCall_v = asm[\"dynCall_v\"];\nasm[\"dynCall_v\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_v.apply(null, arguments);\n};\n\nvar real_dynCall_viiiii = asm[\"dynCall_viiiii\"];\nasm[\"dynCall_viiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return real_dynCall_viiiii.apply(null, arguments);\n};\n\nModule[\"asm\"] = asm;\nvar ___wasm_call_ctors = Module[\"___wasm_call_ctors\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"__wasm_call_ctors\"].apply(null, arguments)\n};\n\nvar _malloc = Module[\"_malloc\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"malloc\"].apply(null, arguments)\n};\n\nvar _free = Module[\"_free\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"free\"].apply(null, arguments)\n};\n\nvar _c_GroupStrokes = Module[\"_c_GroupStrokes\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"c_GroupStrokes\"].apply(null, arguments)\n};\n\nvar _c_FitCurve = Module[\"_c_FitCurve\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"c_FitCurve\"].apply(null, arguments)\n};\n\nvar _c_ML_EncodeCurves = Module[\"_c_ML_EncodeCurves\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"c_ML_EncodeCurves\"].apply(null, arguments)\n};\n\nvar _setThrew = Module[\"_setThrew\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"setThrew\"].apply(null, arguments)\n};\n\nvar __ZSt18uncaught_exceptionv = Module[\"__ZSt18uncaught_exceptionv\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"_ZSt18uncaught_exceptionv\"].apply(null, arguments)\n};\n\nvar ___set_stack_limit = Module[\"___set_stack_limit\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"__set_stack_limit\"].apply(null, arguments)\n};\n\nvar stackSave = Module[\"stackSave\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"stackSave\"].apply(null, arguments)\n};\n\nvar stackAlloc = Module[\"stackAlloc\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"stackAlloc\"].apply(null, arguments)\n};\n\nvar stackRestore = Module[\"stackRestore\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"stackRestore\"].apply(null, arguments)\n};\n\nvar __growWasmMemory = Module[\"__growWasmMemory\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"__growWasmMemory\"].apply(null, arguments)\n};\n\nvar dynCall_iii = Module[\"dynCall_iii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iii\"].apply(null, arguments)\n};\n\nvar dynCall_ii = Module[\"dynCall_ii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_ii\"].apply(null, arguments)\n};\n\nvar dynCall_iiii = Module[\"dynCall_iiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiii\"].apply(null, arguments)\n};\n\nvar dynCall_jiji = Module[\"dynCall_jiji\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_jiji\"].apply(null, arguments)\n};\n\nvar dynCall_iidiiii = Module[\"dynCall_iidiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iidiiii\"].apply(null, arguments)\n};\n\nvar dynCall_vii = Module[\"dynCall_vii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_vii\"].apply(null, arguments)\n};\n\nvar dynCall_vi = Module[\"dynCall_vi\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_vi\"].apply(null, arguments)\n};\n\nvar dynCall_viijii = Module[\"dynCall_viijii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_viijii\"].apply(null, arguments)\n};\n\nvar dynCall_viiii = Module[\"dynCall_viiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_viiii\"].apply(null, arguments)\n};\n\nvar dynCall_iiiii = Module[\"dynCall_iiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiii\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiii = Module[\"dynCall_iiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiii\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiiiiii = Module[\"dynCall_iiiiiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiiiiii\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiiii = Module[\"dynCall_iiiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiiii\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiij = Module[\"dynCall_iiiiij\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiij\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiid = Module[\"dynCall_iiiiid\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiid\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiijj = Module[\"dynCall_iiiiijj\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiijj\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiiiii = Module[\"dynCall_iiiiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiiiii\"].apply(null, arguments)\n};\n\nvar dynCall_iiiiiijj = Module[\"dynCall_iiiiiijj\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_iiiiiijj\"].apply(null, arguments)\n};\n\nvar dynCall_viiiiii = Module[\"dynCall_viiiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_viiiiii\"].apply(null, arguments)\n};\n\nvar dynCall_v = Module[\"dynCall_v\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_v\"].apply(null, arguments)\n};\n\nvar dynCall_viiiii = Module[\"dynCall_viiiii\"] = function() {\n  assert(runtimeInitialized, 'you need to wait for the runtime to be ready (e.g. wait for main() to be called)');\n  assert(!runtimeExited, 'the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n  return Module[\"asm\"][\"dynCall_viiiii\"].apply(null, arguments)\n};\n\n\n\n\n// === Auto-generated postamble setup entry stuff ===\n\nModule['asm'] = asm;\n\nif (!Object.getOwnPropertyDescriptor(Module, \"intArrayFromString\")) Module[\"intArrayFromString\"] = function() { abort(\"'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"intArrayToString\")) Module[\"intArrayToString\"] = function() { abort(\"'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ccall\")) Module[\"ccall\"] = function() { abort(\"'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"cwrap\")) Module[\"cwrap\"] = function() { abort(\"'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setValue\")) Module[\"setValue\"] = function() { abort(\"'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getValue\")) Module[\"getValue\"] = function() { abort(\"'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocate\")) Module[\"allocate\"] = function() { abort(\"'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getMemory\")) Module[\"getMemory\"] = function() { abort(\"'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"AsciiToString\")) Module[\"AsciiToString\"] = function() { abort(\"'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToAscii\")) Module[\"stringToAscii\"] = function() { abort(\"'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF8ArrayToString\")) Module[\"UTF8ArrayToString\"] = function() { abort(\"'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF8ToString\")) Module[\"UTF8ToString\"] = function() { abort(\"'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF8Array\")) Module[\"stringToUTF8Array\"] = function() { abort(\"'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF8\")) Module[\"stringToUTF8\"] = function() { abort(\"'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF8\")) Module[\"lengthBytesUTF8\"] = function() { abort(\"'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF16ToString\")) Module[\"UTF16ToString\"] = function() { abort(\"'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF16\")) Module[\"stringToUTF16\"] = function() { abort(\"'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF16\")) Module[\"lengthBytesUTF16\"] = function() { abort(\"'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF32ToString\")) Module[\"UTF32ToString\"] = function() { abort(\"'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF32\")) Module[\"stringToUTF32\"] = function() { abort(\"'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF32\")) Module[\"lengthBytesUTF32\"] = function() { abort(\"'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocateUTF8\")) Module[\"allocateUTF8\"] = function() { abort(\"'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackTrace\")) Module[\"stackTrace\"] = function() { abort(\"'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPreRun\")) Module[\"addOnPreRun\"] = function() { abort(\"'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnInit\")) Module[\"addOnInit\"] = function() { abort(\"'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPreMain\")) Module[\"addOnPreMain\"] = function() { abort(\"'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnExit\")) Module[\"addOnExit\"] = function() { abort(\"'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPostRun\")) Module[\"addOnPostRun\"] = function() { abort(\"'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeStringToMemory\")) Module[\"writeStringToMemory\"] = function() { abort(\"'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeArrayToMemory\")) Module[\"writeArrayToMemory\"] = function() { abort(\"'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeAsciiToMemory\")) Module[\"writeAsciiToMemory\"] = function() { abort(\"'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addRunDependency\")) Module[\"addRunDependency\"] = function() { abort(\"'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"removeRunDependency\")) Module[\"removeRunDependency\"] = function() { abort(\"'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ENV\")) Module[\"ENV\"] = function() { abort(\"'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS\")) Module[\"FS\"] = function() { abort(\"'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createFolder\")) Module[\"FS_createFolder\"] = function() { abort(\"'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createPath\")) Module[\"FS_createPath\"] = function() { abort(\"'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createDataFile\")) Module[\"FS_createDataFile\"] = function() { abort(\"'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createPreloadedFile\")) Module[\"FS_createPreloadedFile\"] = function() { abort(\"'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createLazyFile\")) Module[\"FS_createLazyFile\"] = function() { abort(\"'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createLink\")) Module[\"FS_createLink\"] = function() { abort(\"'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createDevice\")) Module[\"FS_createDevice\"] = function() { abort(\"'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_unlink\")) Module[\"FS_unlink\"] = function() { abort(\"'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GL\")) Module[\"GL\"] = function() { abort(\"'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"dynamicAlloc\")) Module[\"dynamicAlloc\"] = function() { abort(\"'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"loadDynamicLibrary\")) Module[\"loadDynamicLibrary\"] = function() { abort(\"'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"loadWebAssemblyModule\")) Module[\"loadWebAssemblyModule\"] = function() { abort(\"'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getLEB\")) Module[\"getLEB\"] = function() { abort(\"'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getFunctionTables\")) Module[\"getFunctionTables\"] = function() { abort(\"'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"alignFunctionTables\")) Module[\"alignFunctionTables\"] = function() { abort(\"'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"registerFunctions\")) Module[\"registerFunctions\"] = function() { abort(\"'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addFunction\")) Module[\"addFunction\"] = function() { abort(\"'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"removeFunction\")) Module[\"removeFunction\"] = function() { abort(\"'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getFuncWrapper\")) Module[\"getFuncWrapper\"] = function() { abort(\"'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"prettyPrint\")) Module[\"prettyPrint\"] = function() { abort(\"'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"makeBigInt\")) Module[\"makeBigInt\"] = function() { abort(\"'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"dynCall\")) Module[\"dynCall\"] = function() { abort(\"'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getCompilerSetting\")) Module[\"getCompilerSetting\"] = function() { abort(\"'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"print\")) Module[\"print\"] = function() { abort(\"'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"printErr\")) Module[\"printErr\"] = function() { abort(\"'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getTempRet0\")) Module[\"getTempRet0\"] = function() { abort(\"'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setTempRet0\")) Module[\"setTempRet0\"] = function() { abort(\"'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"callMain\")) Module[\"callMain\"] = function() { abort(\"'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"abort\")) Module[\"abort\"] = function() { abort(\"'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"Pointer_stringify\")) Module[\"Pointer_stringify\"] = function() { abort(\"'Pointer_stringify' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"warnOnce\")) Module[\"warnOnce\"] = function() { abort(\"'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackSave\")) Module[\"stackSave\"] = function() { abort(\"'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackRestore\")) Module[\"stackRestore\"] = function() { abort(\"'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackAlloc\")) Module[\"stackAlloc\"] = function() { abort(\"'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"establishStackSpace\")) Module[\"establishStackSpace\"] = function() { abort(\"'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nModule[\"writeStackCookie\"] = writeStackCookie;\nModule[\"checkStackCookie\"] = checkStackCookie;\nModule[\"abortStackOverflow\"] = abortStackOverflow;if (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_NORMAL\")) Object.defineProperty(Module, \"ALLOC_NORMAL\", { configurable: true, get: function() { abort(\"'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_STACK\")) Object.defineProperty(Module, \"ALLOC_STACK\", { configurable: true, get: function() { abort(\"'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_DYNAMIC\")) Object.defineProperty(Module, \"ALLOC_DYNAMIC\", { configurable: true, get: function() { abort(\"'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_NONE\")) Object.defineProperty(Module, \"ALLOC_NONE\", { configurable: true, get: function() { abort(\"'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"calledRun\")) Object.defineProperty(Module, \"calledRun\", { configurable: true, get: function() { abort(\"'calledRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") } });\n\n\n\nvar calledRun;\n\n// Modularize mode returns a function, which can be called to\n// create instances. The instances provide a then() method,\n// must like a Promise, that receives a callback. The callback\n// is called when the module is ready to run, with the module\n// as a parameter. (Like a Promise, it also returns the module\n// so you can use the output of .then(..)).\nModule['then'] = function(func) {\n  // We may already be ready to run code at this time. if\n  // so, just queue a call to the callback.\n  if (calledRun) {\n    func(Module);\n  } else {\n    // we are not ready to call then() yet. we must call it\n    // at the same time we would call onRuntimeInitialized.\n    var old = Module['onRuntimeInitialized'];\n    Module['onRuntimeInitialized'] = function() {\n      if (old) old();\n      func(Module);\n    };\n  }\n  return Module;\n};\n\n/**\n * @constructor\n * @this {ExitStatus}\n */\nfunction ExitStatus(status) {\n  this.name = \"ExitStatus\";\n  this.message = \"Program terminated with exit(\" + status + \")\";\n  this.status = status;\n}\n\nvar calledMain = false;\n\n\ndependenciesFulfilled = function runCaller() {\n  // If run has never been called, and we should call run (INVOKE_RUN is true, and Module.noInitialRun is not false)\n  if (!calledRun) run();\n  if (!calledRun) dependenciesFulfilled = runCaller; // try this again later, after new deps are fulfilled\n};\n\n\n\n\n\n/** @type {function(Array=)} */\nfunction run(args) {\n  args = args || arguments_;\n\n  if (runDependencies > 0) {\n    return;\n  }\n\n  writeStackCookie();\n\n  preRun();\n\n  if (runDependencies > 0) return; // a preRun added a dependency, run will be called later\n\n  function doRun() {\n    // run may have just been called through dependencies being fulfilled just in this very frame,\n    // or while the async setStatus time below was happening\n    if (calledRun) return;\n    calledRun = true;\n\n    if (ABORT) return;\n\n    initRuntime();\n\n    preMain();\n\n    if (Module['onRuntimeInitialized']) Module['onRuntimeInitialized']();\n\n    assert(!Module['_main'], 'compiled without a main, but one is present. if you added it from JS, use Module[\"onRuntimeInitialized\"]');\n\n    postRun();\n  }\n\n  if (Module['setStatus']) {\n    Module['setStatus']('Running...');\n    setTimeout(function() {\n      setTimeout(function() {\n        Module['setStatus']('');\n      }, 1);\n      doRun();\n    }, 1);\n  } else\n  {\n    doRun();\n  }\n  checkStackCookie();\n}\nModule['run'] = run;\n\nfunction checkUnflushedContent() {\n  // Compiler settings do not allow exiting the runtime, so flushing\n  // the streams is not possible. but in ASSERTIONS mode we check\n  // if there was something to flush, and if so tell the user they\n  // should request that the runtime be exitable.\n  // Normally we would not even include flush() at all, but in ASSERTIONS\n  // builds we do so just for this check, and here we see if there is any\n  // content to flush, that is, we check if there would have been\n  // something a non-ASSERTIONS build would have not seen.\n  // How we flush the streams depends on whether we are in SYSCALLS_REQUIRE_FILESYSTEM=0\n  // mode (which has its own special function for this; otherwise, all\n  // the code is inside libc)\n  var print = out;\n  var printErr = err;\n  var has = false;\n  out = err = function(x) {\n    has = true;\n  }\n  try { // it doesn't matter if it fails\n    var flush = flush_NO_FILESYSTEM;\n    if (flush) flush(0);\n  } catch(e) {}\n  out = print;\n  err = printErr;\n  if (has) {\n    warnOnce('stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.');\n    warnOnce('(this may also be due to not including full filesystem support - try building with -s FORCE_FILESYSTEM=1)');\n  }\n}\n\nfunction exit(status, implicit) {\n  checkUnflushedContent();\n\n  // if this is just main exit-ing implicitly, and the status is 0, then we\n  // don't need to do anything here and can just leave. if the status is\n  // non-zero, though, then we need to report it.\n  // (we may have warned about this earlier, if a situation justifies doing so)\n  if (implicit && noExitRuntime && status === 0) {\n    return;\n  }\n\n  if (noExitRuntime) {\n    // if exit() was called, we may warn the user if the runtime isn't actually being shut down\n    if (!implicit) {\n      err('program exited (with status: ' + status + '), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)');\n    }\n  } else {\n\n    ABORT = true;\n    EXITSTATUS = status;\n\n    exitRuntime();\n\n    if (Module['onExit']) Module['onExit'](status);\n  }\n\n  quit_(status, new ExitStatus(status));\n}\n\nif (Module['preInit']) {\n  if (typeof Module['preInit'] == 'function') Module['preInit'] = [Module['preInit']];\n  while (Module['preInit'].length > 0) {\n    Module['preInit'].pop()();\n  }\n}\n\n\n  noExitRuntime = true;\n\nrun();\n\n\n\n\n\n// {{MODULE_ADDITIONS}}\n\n\n\n\n\n  return c_BezierFit\n}\n);\n})();\nexport default c_BezierFit;","// import Accordion from 'react-native-collapsible/Accordion';\n// import { CollapsingToolbar }  from 'react-native-collapsingtoolbar';\n// import CollapsibleList from './collapsible_list.js'\nimport SkillPanel from './components/skill_panel.js'\nimport Buttons from './components/buttons';\n// import { vw, vh, vmin, vmax } from 'react-native-expo-viewport-units';\n// import ButtonsMachine from './interactions.js'\nimport {build_interactions_sm} from './interactions.js'\nimport {build_training_sm} from './training_handler.js'\nimport NetworkLayer from './network_layer.js'\nimport { interpret } from 'xstate';\nimport autobind from 'class-autobind';\n\n\n// \nimport React from 'react';\n// import { View, Text, StyleSheet } from \"react-native\";\n// import logo from './logo.svg';\n// import './App.css';\n\nimport { TouchableHighlight,ScrollView,View, Text, Platform, StyleSheet,SectionList,AppRegistry } from \"react-native\";\n\n\n// const instructions = Platform.select({\n//   ios: \"Press Cmd+R to reload,\\n\" + \"Cmd+D or shake for dev menu\",\n//   android:\n//     \"Double tap R on your keyboard to reload,\\n\" +\n//     \"Shake or press menu button for dev menu\",\n//   web: \"Your browser will automatically refresh as soon as you save the file.\"\n// });\n// var state_machine = ButtonsMachine.initialState\n// var state_machine_service = interpret(ButtonsMachine)\n// state_machine_service.start()\n\n// var NonInteractive_SM = build_SM_NonInteractive()\n// var ctat_state_machine = NonInteractive_SM.initialState\n// var ctat_state_machine_service = interpret(NonInteractive_SM)\n// ctat_state_machine_service.start()\n// window.ctat_state_machine = ctat_state_machine\n// window.ctat_state_machine_service = ctat_state_machine_service\n\n// var urlParams = new URLSearchParams(window.location.search);\n// var AL_URL = urlParams.get('al_url');\n// var HOST_URL = window.location.origin\n// window.network_layer = new NetworkLayer(AL_URL,HOST_URL)\n\n// ctat_state_machine_service.onTr\n\n// ctat_state_machine_service.onTransition(current => {\n//     setButtonsState(current,window.debugmode)\n    \n//     // this.setState({ current : current })\n//     }\n//   );\nfunction shallow_diff(o1,o2,keys=null){\n  console.log(keys)\n  let diff = Object.keys(o2).reduce((diff, key) => {\n      if (o1[key] !== o2[key] && (keys == null || keys.includes(key))){\n        diff[key] = o2[key]\n      }\n      return diff\n    }, {})\n  return diff\n}\n\n\n\nexport default class ALReactInterface extends React.Component {\n  constructor(props){\n    super(props);\n    autobind(this);\n    this.onInteractionTransition = this.onInteractionTransition.bind(this)\n    // this.urlParams = new URLSearchParams(window.location.search);\n\n    // this.AL_URL = this.urlParams.get('al_url');\n    // this.HOST_URL = window.location.origin\n    // console.log(this.AL_URL + '/create/',this.HOST_URL)\n    this.network_layer = new NetworkLayer(props.AL_URL,props.HOST_URL)\n    \n    // this.training_file = this.urlParams.get('training');\n    // this.interactive = this.urlParams.get('interactive') == \"true\";\n    // this.use_foci = this.urlParams.get('use_foci') == \"true\";\n\n    // var working_dir = this.urlParams.get('wd')\n    if(props.working_dir == null && props.training_file != null){\n        var match = props.training_file.match(/(.*)[\\/\\\\]/)\n        props.working_dir =  !!match ? match[1] : ''; //The directory of the training.json\n    }\n    this.tutor = React.createRef()\n    this.skill_panel = React.createRef()\n    this.buttons = React.createRef()\n\n    this.state = {\n      default_props: {},\n      buttons_props: {app: this},\n      tutor_props: this.props.tutor_props || {},\n      skill_panel_props: {},\n      \"training_description\" : \"????\",\n      \"agent_description\" : \"????\",\n      \"problem_description\" : \"????\",\n\n      \"interactive\" : this.props.interactive,\n      \"free_author\" : this.props.free_author,\n      \"tutor_mode\" : this.props.tutor_mode,\n    }\n    // this.state = {prob_obj : null};\n  }\n\n  onInteractionTransition(current){\n    console.log(\"#\",current.value, \":\", current.context, current)\n\n    var standard_props = {interactions_state: current,\n                          interactions_service : this.interactions_service}\n    this.setState({\n      default_props : standard_props\n      // buttons_props: standard_props,\n      // tutor_props: standard_props,\n      // skill_panel_props: standard_props,\n    })\n  }\n\n  onTrainingTransition(current){\n    var c = current.context\n    console.log(\"&\", \"HEY THIS IS THIS THING\")\n    if(!c.interactive){\n      this.setState({\n        training_description : c.training_description || \"???\",\n        agent_description : c.agent_description || \"???\",\n        problem_description : c.problem_description || \"???\"\n      })  \n    }\n    \n\n  }\n\n  changeInteractionMode(d){\n    this.setState(d)\n  }\n\n  componentDidUpdate(prevProps,prevState){\n\n    //Update from changeInteractionMode\n    var d = shallow_diff(prevState,this.state,[\"interactive\",\"free_author\",\"tutor_mode\"])\n    if(Object.keys(d).length > 0){\n      console.log(\"componentDidUpdate\", d)\n      this.training_service.send({\n        type : \"CHANGE_INTERACTION_MODE\",\n        data : d,\n      })  \n    }\n  }\n\n  componentDidMount(){\n    console.log(\"MOUNTED\")\n    var tutor, nl, wd,tf\n    [tutor, nl, wd,tf] = [this.tutor.current,this.network_layer,this.props.working_dir,this.props.training_file]\n    \n\n    // this.setState({\n     \n    // })\n    this.interactions_sm = build_interactions_sm(this,\n                                                 this.props.interactive,\n                                                 this.props.free_author,\n                                                 this.props.tutor_mode)  \n    this.interactions_service = null //Will be spawned in training_sm \n\n    this.training_machine = build_training_sm(this,this.interactions_sm, tf, wd)\n    this.training_service = interpret(this.training_machine)\n    this.training_service.onTransition(this.onTrainingTransition)\n    this.training_service.start()\n\n    const sub = this.training_service.subscribe(state => {\n      console.log(\"SUBSCRIBE:\",state);\n    });\n    console.log(\"T MACHINE!\", this.training_service)\n\n    window.setTutorMode = (x) => {\n      this.changeInteractionMode({\"tutor_mode\" : x})\n    }\n\n    window.setInteractive = (x) => {\n      this.changeInteractionMode({\"interactive\" : x})\n    }\n\n    window.setFreeAuthor = (x) => {\n      this.changeInteractionMode({\"free_author\" : x})\n    }\n\n    //TODO MOVE TO NW_LAYER\n    window.generateBehaviorProfile = this.generateBehaviorProfile\n\n\n  }\n\n  generateBehaviorProfile(ground_truth_path=\"/ground_truth.json\",out_dir=\"\"){\n    // window.generateBehaviorProfile = (ground_truth_path,out_dir=\"\") => {\n    let f = this.network_layer.generateBehaviorProfile\n\n    let t_context = this.training_service._state.context\n    // let i_context = this.training_service.context\n    if(ground_truth_path != null){\n\n      let to_json_list = (in_list) => {\n        let out = []\n        for (let line of in_list){\n          if(line != \"\"){\n            let json = JSON.parse(line)\n            out.push(json)\n          }\n        }\n        return out;\n      }\n      // let rq_h = this.network_layer.return\n      // let path =  ground_truth_path\n      if(ground_truth_path[0] != \"/\"){\n        ground_truth_path = (t_context.working_dir|| \"/\") + ground_truth_path\n      }\n      return fetch(ground_truth_path)\n        .then((resp) => resp.text())\n        .then((text) => text.split(\"\\n\"))\n        .then((split) => to_json_list(split))\n        .then((resps) => f(t_context,{data:{requests:resps,out_dir: out_dir}}))\n\n    }else{\n      return f(t_context)  \n    }\n      \n  }\n\n  render(){\n    const Tutor = this.props.tutorClass\n\n    var lower_display;\n    var use_prompt = false\n    if(!this.state.interactive){\n      use_prompt = true\n      var prompt_text\n      // if(this.state.tutor_mode == true){\n      //   prompt_text = \"TUTOR MODE\\n\"\n      // }else if(!this.state.interactive){\n      prompt_text = \n        this.state.training_description + \"\\n\" +\n        this.state.agent_description + \"\\n\" +\n        this.state.problem_description + \"\\n\"\n\n      lower_display = \n      <View style={styles.prompt}>\n        <Text>\n        {prompt_text}\n        </Text>\n      </View>\n    }else{\n      lower_display = \n      <View style={styles.controls}>\n        {!this.state.tutor_mode &&\n        <View style={styles.skill_panel}>\n          <SkillPanel ref={this.skill_panel}\n          {...this.state.default_props}\n          {...this.state.skill_panel_props}/>\n        </View>\n        }\n        <View style={styles.buttons}>\n          <Buttons ref={this.buttons}\n          {...this.state.default_props}\n          {...this.state.buttons_props}\n          {...{tutor_mode: this.state.tutor_mode}}/>\n        </View>\n      </View>\n    }\n\n    return (\n  \t<View style={styles.container}>\n  \t\t<View style={styles.ctat_tutor}>\n  \t\t\t<Tutor\n          //tutor_props = {this.state.prob_obj}\n          ref={this.tutor}//{function(tutor) {window.tutor = tutor; console.log(\"TUTOR IS:\",tutor)}}\n          id=\"tutor_iframe\"\n          //current_state={ctat_state_machine}\n          //sm_service={ctat_state_machine_service}\n          interactive={false}\n          {...this.state.default_props}\n          {...this.state.tutor_props}\n        />\n  \t\t</View>\n  \t\t{lower_display}\n  \t</View>\n    );\n  }\n}\n\n//current={state_machine}\n//service={state_machine_service}\n//debugmode={true}\n//callbacks={window.button_callbacks}\n//nools_callback={window.nools_callback}/>\n\nconst styles = StyleSheet.create({\n\t     container : {\n        // justifyContent: \"stretch\",\n        // padding: 20,\n        // alignItems:'center',\n        // backgroundColor: \"blue\",\n        flex: 1,\n        flexDirection: \"column\",\n        // flexWrap: \"wrap\"\n      },\n      ctat_tutor: {\n\n      \t// backgroundColor: 'powderblue',\n      \t\n      \t// flexGrow: 1,\n      \t// height : \"65%\",\n      \t// width : \"100%\",\n        // width:800,\n        // height: vh(64),\n        // flexGrow: 100,\n        margin: 4,\n        flexBasis: \"65%\",\n        flex: 1,\n        \n\n      },\n      prompt : {\n        flex: 1,\n        textAlign : \"center\"\n      },\n      controls :{\n\n      \t// flexGrow: 1,\n      \t// flexBasis: 300,\n        // display: \"flex\",\n        // height : \"35%\",\n        flex: 1,\n        flexBasis: \"35%\",\n        flexDirection: \"row\",\n        // flexWrap: \"wrap\",\n        // width : 600,\n        // flexGrow: 1,\n        // flexBasis:  600,\n        // height: vh(35),\n        // justifyContent: \"center\",\n      },\n      \n      skill_panel : {\n      \t// width: \"65%\",\n      \t// height: 300,\n        // height: vh(35),\n        flex : 1,\n        flexBasis: \"60%\",\n        // flexGrow : 0\n        // flexDirection: \"row\",\n        // flexShrink: 1,\n        // flexBasis: 1\n        /*height: 320px*/\n\n      },\n      \n\n      buttons : {\n        flexGrow: 1,\n        // display: \"flex\",\n        // width : 1000,\n        // flexBasis: 2,\n        flexDirection: \"column\",\n        // height: vh(35),\n        // width: \"35%\",\n        flexBasis : \"40%\",\n        /*width:300px;*/\n        // flexWrap: \"wrap\",\n        justifySelf : \"space-around\",\n        \n        // flexBasis: 32,\n        /*justify-self:  start;*/\n        /*align-self:  ;*/\n        /*padding: 60px,*/\n        // justifyContent: \"auto\",\n        \n        // alignContent: \"center\"\n        \n      }\n\n});","import { Machine,assign,interpret } from 'xstate';\nimport RJSON from 'relaxed-json'\nimport {build_interactions_sm} from './interactions.js'\nvar fs = require(\"fs\")\n// const path = require(\"path\")\n\n\nconst CTATGuid = {s4:function s4() {\n  return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);\n}, guid:function guid() {\n  return this.s4() + this.s4() + \"-\" + this.s4() + \"-\" + this.s4() + \"-\" + this.s4() + \"-\" + this.s4() + this.s4() + this.s4();\n}};\n\nfunction load_training_file (context,event){\n\tconsole.log(\"TRAINING JSON:\", context.training_file)\n\treturn fetch(context.training_file)\n\t\t\t.then((response) => response.text())//response.json())\n\t\t\t.then((response) => RJSON.parse(response))//response.json())\n\t\t\t.then((response) => Object.entries(response))\n\t\t\t.then((response) => {return {updateContext : {training_iterator : response}}})\n\t// var promise = new Promise((resolve, reject) => {\n\t\t// try{\n\t\t// \tlet file_name = context.training_json\n\t\t// \tlet rawdata = fs.readFileSync(file_name)\n\t\t// \tlet training_json_obj = JSON.parse(rawdata);\n\t\t// \tvar training_iterator = Object.entries(training_json_obj);\t\n\t\t// }catch(error){\n\t\t// \tconsole.error(error)\n\t\t// \treject(error)\n\t\t// }\n\t\t// resolve(training_iterator)\n\t// });\n\t// return promise\n};\n\n\n\nfunction serve_next_training_set (context,event){\n\tvar promise = new Promise((resolve, reject) => {\n\t\tvar training_iterator = context.training_iterator\n\tvar file_params = context.file_params || {};\n\tconsole.log(\"TRAINING ITERATOR\", training_iterator.length);\n\t\tif(training_iterator.length > 0){\n\t\t\tvar out = training_iterator.shift()\n\t\t\tvar name = out[0];\n\n\t        while(name == \"set_params\"){\n\t            file_params = {...file_params, ...out[1]} //join and prefer new one\n\t            out = training_iterator.shift();\n\t            name = out[0];\n\t        }\n\n\t        console.log(\"START TRAINING SET: \", name, file_params);\n\t        var agent_iterator = out[1];        \n\n\t        resolve({\"updateContext\" : {\n\t        \ttraining_iterator : training_iterator,\n\t\t\t\tagent_iterator\t: agent_iterator,        \t\n\t\t\t\tfile_params : file_params,\n\t\t\t\ttraining_description : context.training_file.replace(/^.*[\\\\\\/]/, '') +\" : \" + name,\n\t        }})\n\t\t}else{\n\t\t\tresolve(null)\n\t\t}\n\t});\n\treturn promise\n};\n\nfunction serve_next_agent(context,event){\n    var promise = new Promise((resolve, reject) => {\n    \tvar agent_iterator = context.agent_iterator;\n    \tconsole.log(\"AGENT ITERATOR\", agent_iterator.length);\n\t    if(context.agent_iterator.length > 0){\n\t        var agent_obj = {...(context.file_params['agent'] || {}),...agent_iterator.shift() }\n\t        if(context.file_params['agent'] && context.file_params['agent']['args']){\n\t        \tagent_obj['args'] = {...context.file_params['agent']['args'], ...agent_obj['args']};\n\t        }\n\t        var agent_params = agent_obj[\"set_params\"] || {}\n\t        var agent_description = \"Agent Name: \" + agent_obj[\"agent_name\"] + \"\\nAgent Type: \" + agent_obj[\"agent_type\"] //+\"<br>\"\n\t        var problem_set = agent_obj[\"problem_set\"];\n\t        var prior_knowledge = agent_obj[\"prior_knowledge\"] || [];\n\n\t        var other_data = {...agent_obj}\n\t        delete other_data[\"problem_set\"];\n\t        delete other_data[\"agent_name\"];\n\t        delete other_data[\"agent_type\"];\n\n\t        resolve({\"updateContext\" : {\n\t        \tstart_state_history : [],\n\t        \trequest_history : [],\n\t        \tsession_id : CTATGuid.guid(),\n\t        \tuser_guid : \"Stu_\" + CTATGuid.guid(),\n\n\t        \tagent_params\t: agent_params,    \n\t        \tagent_name : agent_obj[\"agent_name\"],\n\t\t\t\tagent_type\t: agent_obj[\"agent_type\"],        \t\n\t        \tagent_description : agent_description,\n\t        \tother_agent_data : other_data,\n\n\t        \tagent_iterator:  agent_iterator,\n\t        \tproblem_set : problem_set,\n\t        \tprior_knowledge : prior_knowledge,\n\t        \tagent_start_time : new Date(),\n\t        }})\n\t    }else{\n\t        resolve(null)\n\t    }\n\t});\n\treturn promise\n}\n\nfunction handle_prior_knowledge(context,event){\n\tvar promise = new Promise((resolve, reject) => {\n\t\t// console.log(\"WOOP?\")\n\t\tvar prior_knowledge =  context.prior_knowledge;\n\t\twhile(prior_knowledge.length > 0){\n\t\t\tconsole.log(\"CURRENT\", prior_knowledge)\n\t\t\tvar current = prior_knowledge.shift();\n\t\t\t//current.type == \"Pik\" || \n\t\t\tvar type = current.type.toLowerCase().replace(\"_\", \"\")\n\t\t\tif(type == \"bestintersect\"){\n\t\t\t\t\t\t\t\t\n\n\t\t\t}else{\n\n\t\t\t}\n\t\t} \n\n\t\tresolve({\"updateContext\" : {\n\t        \tprior_knowledge : prior_knowledge,       \t\n\t\t\t\tproblem_iterator : context.problem_set,\n\t        }})\n\t});\n\treturn promise\n}\n\n\nfunction _next_prob_obj(problem_iterator,agent_params,file_params){\n    var prob_obj = problem_iterator.shift();\n    // console.log(prob_obj);trz\n    if(!prob_obj){return null;}\n\n\n    while(\"set_params\" in prob_obj){\n        agent_params = {...agent_params,...prob_obj['set_params']};\n        prob_obj = problem_iterator.shift();\n        if(!prob_obj){return null;}\n    }\n    // console.log(prob_obj)\n    var fp_clone = {...file_params}\n    delete fp_clone['agent']\n    prob_obj = {...fp_clone,...agent_params,...prob_obj}\n    console.log(prob_obj,agent_params)\n    return [prob_obj, agent_params]\n}\n\n\n\nfunction serve_next_problem (context,event){\n\tvar promise = new Promise((resolve, reject) => {\n\t\tvar prob_obj = null;\n\t\tvar agent_params = context.agent_params;\n\t\tvar file_params = context.file_params;\n\t\tvar problem_iterator = context.problem_iterator\n\t\tvar nl = context.network_layer\n\t\tvar interactive = context.interactive\n\t\tconsole.log(\"PROBLEM ITERATOR\", problem_iterator.length);\n\t\tif(problem_iterator.length > 0){\n\t        [prob_obj, agent_params] = _next_prob_obj(problem_iterator,agent_params,file_params);\n\t        console.log(prob_obj,agent_params)\n\t        // console.log(\"SLOOOP\")\n\t        // console.log(prob_obj)\n\t        if(prob_obj){\n\t\t        if(\"repetitions\" in prob_obj){\n\t                if(prob_obj[\"repetitions\"] < 0){\n\t                    problem_iterator.unshift({...prob_obj})\n\t                }else if(prob_obj[\"repetitions\"] == 0){\n\t\t                [prob_obj, agent_params] = _next_prob_obj(problem_iterator,agent_params,file_params)                \n\t\t            }else if(prob_obj[\"repetitions\"] >= 2){\n\t\t                prob_obj[\"repetitions\"] -= 1\n\t\t                problem_iterator.unshift({...prob_obj})\n\t\t            }\n\t\t        }\n\n\t\t        var EXAMPLES_ONLY = prob_obj[\"examples_only\"] || false;\n\n\t\t        var problem_description = Object.keys(prob_obj).reduce(\n\t\t        \t\t(s,key) => {return s + key + \": \" + prob_obj[key] +'\\n'},\"\");\n\n\t\t        resolve({\"updateContext\" : {\n\t            \tEXAMPLES_ONLY : EXAMPLES_ONLY,\n\t            \tagent_params : agent_params,\n\t            \tproblem_iterator : problem_iterator,\n\t            \tprob_obj : prob_obj,\n\t            \tproblem_description : problem_description\n\t\t        }})\n\n\t\t    }else{\n\t\t    \tresolve(null)\n\t\t    }\n\t\t}else{\n\t\t\tresolve(null)\n\t\t}\n\t});\n\treturn promise\n};\nfunction load_problem (context,event){\n\treturn context.tutor.loadProblem(context)\n};\nfunction query_outerloop (context,event){\n\n};\n\nfunction iteratorEmpty(context,event){\n\treturn event.data == null;\n}\nfunction AAID(interactions_state_machine){\n\tvar boop = (context,event) => {\n\t\tconsole.log(\"MOOOP\")\n\t\treturn {...interactions_state_machine.context, ...{\"agent_id\": context.agent_id}}\n\t}\n}\n\n// function gerp(event){\n// \tconsole.log(\"GERP\")\n// \treturn event.data['agent_id']\n// }\n\nfunction start_training_interaction(context,event){\n\tconsole.log(\"START TRAINING INTERACTION\")\n\tvar app = context.app\n\n\tvar pass_along_context = {\n\t\t\"agent_id\": context.agent_id,\n\t\t\"interactive\": context.interactive,\n\t\t\"free_author\": context.free_author,\n\t}\n\n\tvar interactions_sm = context.interactions_sm\n\t\t.withContext({...context.interactions_sm.context, ...pass_along_context});\n\tvar interactions_service = interpret(interactions_sm)\n\tcontext.app.interactions_service = interactions_service\n\tinteractions_service.onTransition(app.onInteractionTransition)\n\tinteractions_service.start()\n}\n\nfunction allDone(context,event){\n\tvar nl = context.network_layer\n\tconsole.log(\"ITS ALL DONE!\");\n    nl.kill_this(\"\\n TRAINING FINISHED SUCCESSFULLY! \\n\",'info');\n    // nl.term_print('\\x1b[0;30;47m' + \"TRAINING FINISHED SUCCESSFULLY!\" + '\\x1b[0m');\n}\n\nconst assignInteractionSM = assign({\"interactions_sm\" : (context,event) =>  {\n\tvar d = {...{app:context.app,\n\t\t    \t interactive:context.interactive,\n\t\t    \t free_author:context.free_author,\n\t\t    \t tutor_mode:context.tutor_mode},\n\t\t     ...event.data}\n\tconsole.log(\"assignInteractionSM\", d)\n\tvar sm = build_interactions_sm(d.app, d.interactive, d.free_author, d.tutor_mode)\n\treturn sm\n}})\n\n\n\n\n\n\n// function create_agent(context,event){\n// \tvar nl = context.network_layer;\n\t\n\n// \treturn nl.create_agent(context,event)\n\n// }\n\n\nexport function build_training_sm(app,interactions_sm){\n\t// interactions_state_machine,network_layer,training_file,tutor,working_dir\n\tvar nl = app.network_layer;\n\tconst context = {\n\t\t//Utils\n\t\tapp : app,\n\t\ttutor : app.tutor.current,\n\t\tskill_panel : app.skill_panel.current,\n\t\tbuttons : app.buttons.current,\n\t\tnetwork_layer : app.network_layer,\n\n\t\t//Inherited\n\t\tinteractive : app.props.interactive,\n\t\ttraining_file : app.props.training_file,\n\t\tworking_dir : app.props.working_dir,\n\t\tinteractions_sm : interactions_sm,\n\n\t\t//Dynamic\n\t\tfile_params : null,\n\t\tagent_params : null,\n\t\tprob_obj : null,\n\t\tfree_author : null,\n\t}\n\n\t\n\t\n\tconst sm = Machine({\n\t\tcontext : context,\n\t\tinitial: \"Loading_Training_File\",\n\t\tstates: {\n\t\t\tLoading_Training_File: {\n\t\t\t\tinvoke : {\n\t\t\t\t\tid: \"load_training_file\",\n\t\t\t\t\tsrc: \"load_training_file\",\n\t\t\t\t\tonDone: {target : \"Serving_Training_Sets\", actions: \"updateContext\"},\n\t\t\t\t\tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t}\n\t\t\t},\t\n\t\t\tServing_Training_Sets: {\n\t\t\t\tinvoke : {\n\t\t\t\t\tid: \"serve_next_training_set\",\n\t\t\t\t\tsrc: \"serve_next_training_set\",\n\t\t\t\t\tonDone: [{target : \"All_Done\", cond : \"iteratorEmpty\"},\n\t\t\t\t\t\t\t {target : \"Serving_Agents\", actions: \"updateContext\"}],\n\t\t\t\t\tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t}\n\t\t\t},\n\t\t\tServing_Agents: {\n\t\t\t\tinvoke : {\n\t\t\t\t\tid: \"serve_next_agent\",\n\t\t\t\t\tsrc: \"serve_next_agent\",\n\t\t\t\t\tonDone: [{target : \"Serving_Training_Sets\", cond : \"iteratorEmpty\"},\n\t\t\t\t\t\t\t {target : \"Creating_Agent\",actions: \"updateContext\"}],\n\t\t\t\t\tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t}\n\t\t\t},\n\t\t\tCreating_Agent: {\n\t\t\t\tinvoke : {\n\t\t\t\t\tid: \"create_agent\",\n\t\t\t\t\tsrc: \"create_agent\",\n\t\t\t\t\tonDone: {target : \"Handling_Prior_Knowledge\",actions: \"assignAgentId\" },\n\t\t\t\t\tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t}\n\t\t\t},\n\t\t\tHandling_Prior_Knowledge: {\n\t\t\t\tinvoke : {\n\t\t\t\t\tid: \"handle_prior_knowledge\",\n\t\t\t\t\tsrc: \"handle_prior_knowledge\",\n\t\t\t\t\tonDone: {target : \"Serving_Problems\", actions: \"updateContext\" },\n\t\t\t\t\tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t}\n\t\t\t},\n\t\t\tServing_Problems: {\n\t\t\t\tinvoke : {\n\t\t\t\t\tid: \"serve_next_problem\",\n\t\t\t\t\tsrc: \"serve_next_problem\",\n\t\t\t\t\tonDone: [{target : \"Serving_Agents\", cond : \"iteratorEmpty\"},\n\t\t\t\t\t\t\t {target : \"Waiting_Problem_Load\",  actions: \"updateContext\"}],\n\t\t\t\t\tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t}\n\t\t\t},\n\t\t\tWaiting_Problem_Load:{\n\t\t\t\tinvoke : {\n\t\t\t\t\tid: \"load_problem\",\n\t\t\t\t\tsrc: \"load_problem\",\n\t\t\t\t\tonDone: {target : \"Training\",  actions: \"updateContext\"},\n\t\t\t\t\tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t}\n\t\t\t},\n\t\t\tTraining: {\n\t\t\t\tentry : \"start_training_interaction\",\n\t\t\t\ton : {PROBLEM_DONE : \"Serving_Problems\",\n\t\t\t\t\t  CHANGE_INTERACTION_MODE : {target : \"Serving_Problems\", \"actions\" : \"assignInteractionSM\"}},\n\t\t\t\t// invoke : {\n\t\t\t\t// \tid: \"interactions_state_machine\",\n\t\t\t\t// \tsrc: \"interactions_state_machine\",\n\t\t\t\t// \tdata : (context, event) => ({...interactions_state_machine.context, ...{\"agent_id\": context.agent_id}}),\n\t\t\t\t// \tonDone: \"Serving_Problems\",\n\t\t\t\t// \tonError: {target :'Fail', actions : \"logError\"}\n\t\t\t\t// },\n\t\t\t\t// entry : send({type: \"ASSIGN_AGENT\", \"agent_id\" : agent_id})\n\t\t\t},\n\t\t\tAll_Done : {\n\t\t\t\tentry : \"allDone\",\n\t\t\t\ttype : 'final',\n\t\t\t},\n\t\t\tFail : {\n\t\t\t\tentry : [\"logError\",\"kill_this\"]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tservices : {\n\t\t\t\n\t\t\tload_training_file : load_training_file,\n\t\t\tserve_next_training_set : serve_next_training_set,\n\t\t\tserve_next_agent : serve_next_agent,\n\t\t\tcreate_agent : nl.createAgent,\n\t\t\tserve_next_problem : serve_next_problem,\n\t\t\tload_problem : load_problem,\n\t\t\thandle_prior_knowledge : handle_prior_knowledge,\n\t\t\t\n\t\t\t// interactions_state_machine : interactions_state_machine,\n\t\t\t\n\t\t},\n\t\tactions : {\n\t\t\tstart_training_interaction : start_training_interaction,\n\t\t\tlogError : (context,event) => {console.error(event.data)},\n\t\t\tupdateContext : assign((context, event) => {\n\t\t\t    return event.data.updateContext\n\t\t\t}),\n\t\t\tassignAgentId : assign((context, event) => {\n\t\t\t\treturn {agent_id : event.data['agent_id']}\n\t\t\t}),\n\t\t\tallDone : allDone,\n\t\t\tassignInteractionSM : assignInteractionSM\n\t\t},\n\t\tguards : {\n\t\t\titeratorEmpty : iteratorEmpty,\n\t\t}\n\t});\n\n\t\n\t// console.log(\"JSON MACHINE\",sm)\n\treturn sm\n}","import autobind from 'class-autobind';\nconst AL_RETRY_LIMIT = 3;\nconst TIMEOUT = 100;\n\n// var $ = require('jquery');\n\n// var fetch = require(\"node-fetch\");\n\nfunction sleep (time) {\n  return new Promise((resolve) => setTimeout(resolve, time));\n}\n\nfunction ignoreKeys(key,value){\n    if(key=='matches') return undefined;\n    else return value;\n}\n\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\n//https://dev.to/ycmjason/javascript-fetch-retry-upon-failure-3p6g\nconst fetch_retry = async (url, options, n=AL_RETRY_LIMIT,t=TIMEOUT,exp=true) => {\n    for (let i = 0; i < n; i++) {\n        try {\n            return await fetch(url, options);\n        } catch (err) {\n        \tconsole.log(\"AL ERROR Retrying\",err)\n            const isLastAttempt = i + 1 === n;\n            if (isLastAttempt) throw err;\n            console.log(\"waiting\",exp ? t * Math.pow(2,i) : t)\n        \tawait wait(exp ? t * Math.pow(2,i) : t)\n        }\n    }\n};\n\nconst JSON_HEADERS = {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  }\n\n\nexport default class NetworkLayer {\n\tconstructor(AL_URL,HOST_URL){\n\t\tthis.AL_URL = AL_URL\n\t\tthis.HOST_URL = HOST_URL\n\t\tthis.request_history = []\n\t\tautobind(this)\n\t\t// this.createAgent = this.createAgent.bind(this)\n\t\t// this.sendFeedback = this.sendFeedback.bind(this)\n\t\t// this.sendTrainingData = this.sendTrainingData.bind(this)\n\t\t// this.queryApprentice = this.queryApprentice.bind(this)\n\t\t// this.term_print = this.term_print.bind(this)\n\t\t// this.kill_this = this.kill_this.bind(this)\n\t}\n\n\tcreateAgent(context, event){\n\n\t\tvar data = {\n            'name': context.agent_name,\n            'agent_type': context.agent_type,\n            'project_id': context.project_id\n        }\n    \tdata = {...context.other_agent_data, ...data}\n\n    \tconsole.log(this.AL_URL + '/create/')\n\n    \tthis.request_history = []\n    \treturn fetch_retry(this.AL_URL + '/create/', \n    \t\t{method: \"POST\",\n    \t\t headers: JSON_HEADERS,\n    \t\t body:JSON.stringify(data)}, 6)\n    \t\t .then(res => res.json())\n\t}\n\n\tsendFeedback(context,event){\n\t\tconsole.log(\"sendFeedback\")\n\t\tif (context.staged_SAI === null) {\n\t        console.error('cannot give feedback on no action.');\n\t    }\n\n\t    const skill_applications = context.skill_applications\n\t\tconst feedback_map = context.feedback_map\n\n\t\tvar out \n\t    if(feedback_map && Object.keys(feedback_map).length > 0){\n\t\t\t// var skill_applications_subset = []\n\t\t\t// var rewards = []\n\t\t\tvar d_list = []\n\t\t\tfor (var index in feedback_map){\n\t\t\t\tvar skill_app = skill_applications[index]\n\t\t\t\t// skill_applications_subset.push({\n\t\t\t\tvar data = {\n\t\t\t\t\t\"state\" : context.state,\n\t\t\t\t\t\"rhs_id\" : skill_app[\"rhs_id\"],\n\t                \"mapping\" : skill_app[\"mapping\"],\n\t                \"reward\" : feedback_map[index].toLowerCase() == \"correct\" ? 1 : -1\n\t            }\n\t            if(context.interactive){data['add_skill_info'] = true}\n\t            d_list.push(data)\n\t            // if(out){\n\t            // \tout = out.then((resp)=>this.sendTrainingData(data,context.agent_id))\n\t            // \t\t .then(()=>sleep(10))\n\t            // }else{\n\t            // \tout = this.sendTrainingData(data,context.agent_id)\n\t            // }\n\t\t\t}\n\t\t\tout = this.sendTrainingData(d_list,context.agent_id)\n\n\t\t    // if(data.reward == null && context.reward != null){\n\t\t    // \tdata.reward = context.reward\n\t\t    // }\n\t\t    \n\t\t}else{\n\t\t\tvar skill_app = context.staged_SAI\n\t\t\tvar data = {\n\t\t\t\t\"state\":context.state,\n\t\t\t\t\"selection\" : skill_app[\"selection\"],\n\t\t\t\t\"action\" : skill_app[\"action\"],\n\t\t\t\t\"inputs\" : skill_app[\"inputs\"],\n\t\t\t\t\"foci_of_attention\" : skill_app[\"foci_of_attention\"],\n\t\t\t\t\"rhs_id\" : skill_app[\"rhs_id\"],\n\t\t\t\t\"mapping\" : skill_app[\"mapping\"],\n\t\t\t\t\"reward\" : skill_app[\"reward\"]\n\t\t\t}\n\t\t\tif(context.interactive){data['add_skill_info'] = true}\n\t\t\tout = this.sendTrainingData(data,context.agent_id)   \n\t\t}\n\t    \n\t\treturn out\n\t}\n\n\t// sendFeedbackExplicit(context,event){\n\t// \tconsole.log(\"sendFeedback EXPLICIT\")\n\t// \t// const staged_SAI = context.staged_SAI;\n\t// \t// const agent_id = context.agent_id;\n\t// \tconst state = context.state\n\t// \tconst skill_applications = context.skill_applications\n\t// \tconst feedback_map = context.feedback_map\n\n\t// \tvar skill_applications_subset = []\n\t// \tvar rewards = []\n\t// \tfor (var index in feedback_map){\n\t// \t\tvar skill_app = skill_applications[index]\n\t// \t\tskill_applications_subset.push({\n\t// \t\t\t\"rhs_id\" : skill_app[\"rhs_id\"],\n //                \"mapping\" : skill_app[\"mapping\"]\n\t// \t\t})\n\t// \t\tvar reward = feedback_map[index].toLowerCase() == \"correct\" ? 1 : -1\n\t// \t\trewards.push(reward);\n\t// \t}\n\t// \t// if(!reward){\n\t// \t// \treward = staged_SAI.reward\n\t// \t// }\n\t// \t// var staged_SAI = context.staged_SAI\n\n\t//     // if (staged_SAI === null && context.explanations == null) {\n\t//     //     console.error('cannot give feedback on no action.');\n\t//     // }\n\n\t//     // var reward = \n\n\t//     // staged_SAI.reward = reward\n\t//     // if(!explicit){\n\t//     //     staged_SAI.state = state\n\t        \n\t//     // }\n\t//     // var rewards = context.rewards || [staged_SAI.reward]\n\t//     // var skill_applications = context.skill_applications || [{\n\t//     //                 \"rhs_id\" : staged_SAI[\"rhs_id\"],\n\t//     //                 \"mapping\" : staged_SAI[\"mapping\"]\n\t//     //             }];\n\n\t//     var data = {state: state,\n\t//                 skill_applications: skill_applications_subset,\n\t//                 rewards: rewards,\n\t//                 // selection : staged_SAI.selection,\n\t//                 // reward : rewards[0],\n\t//             \t}\n\t//     console.log(\"EXPLICIT DATA\",data)\n\t//     if(context.interactive){\n\t//         data['kwargs'] = {'add_skill_info':true}\n\t//     }\n\n\t//     return this.sendTrainingData(data,context.agent_id)\n\n\t//     const URL = this.AL_URL + '/train/' + context.agent_id + '/'\n //    \treturn fetch_retry(URL, \n //    \t\t{method: \"POST\",\n //    \t\t headers: JSON_HEADERS,\n //    \t\t body:JSON.stringify(data)})\n //    \t\t .then(res => res.json())\n\t// \t    $.ajax({\n\t// \t        type: 'POST',\n\t// \t        url: AL_URL + '/train/' + agent_id + '/',\n\t// \t        data: JSON.stringify(data),\n\t// \t        contentType: \"application/json; charset=utf-8\",\n\t// \t        retryLimit : AL_RETRY_LIMIT,\n\t// \t        tryCount : 0,\n\t// \t        error: ajax_retry_on_error,\n\n\t// \t        success: (resp) => {on_train_success(data,resp)}\n\t// \t    });\n\t// }\n\t\n\n\tsendTrainingData(data,agent_id) {\n\t\tconsole.log(\"sendTrainingData\")\n\t    // console.log(\"SAI: \", sai_data)\n\n\t    // loggingLibrary.logResponse (transactionID,\"textinput1\",\"UpdateTextField\",\"Hello World\",\"RESULT\",\"CORRECT\",\"You got it!\");\n\t    // console.log(sai_data)\n\t    const URL = this.AL_URL + '/train/' + agent_id + '/'\n\t    return fetch_retry(URL, \n\t    \t\t{method: \"POST\",\n\t    \t\t headers: JSON_HEADERS,\n\t    \t\t body:JSON.stringify(data,ignoreKeys)})\n\t    \t\t.then(response => response.text())\n\t\t\t\t.then(text => {\n\t\t\t\t    try {\n\t\t\t\t        const data = JSON.parse(text);\n\t\t\t\t        return data\n\t\t\t\t        // Do your JSON handling here\n\t\t\t\t    } catch(err) {\n\t\t\t\t    \treturn {}\n\t\t\t\t       // It is text, do you text handling here\n\t\t\t\t    }\n\t\t\t\t});\n\t    \t\t\n\t\t// $.ajax({\n\t //        type: 'POST',\n\t //        url: AL_URL + '/train/' + agent_id + '/',\n\t //        data: JSON.stringify(sai_data,ignoreKeys),\n\t //        contentType: \"application/json; charset=utf-8\",\n\n\t //        // async: true,\n\t //        // timeout: AL_TIMEOUT,\n\t //        retryLimit : AL_RETRY_LIMIT,\n\t //        tryCount : 0,\n\t //        error: ajax_retry_on_error,\n\n\t //        success: (resp) => {on_train_success(sai_data,resp)}\n\t //    });\n\t}\n\n\tqueryApprentice(context,event) {\n\t\tconsole.log(\"queryApprentice\")\n\n\t    var data = {\n\t        'state': context.state\n\t    }\n\t    if(context.interactive){\n\t        data['kwargs'] = {'add_skill_info':true,'n':0}\n\t    }\n\n\t    this.request_history.push(data)\n\n\t    const URL = this.AL_URL + '/request/' + context.agent_id + '/'\n\n\t    return fetch_retry(URL,\n\t    \t\t{method: \"POST\",\n\t    \t\t headers: JSON_HEADERS,\n\t    \t\t body:JSON.stringify(data)})\n\t    \t\t.then(res => res.json())\n\n\t}\n\n\tcheckApprentice(context,event) {\n\t\tconsole.log(\"checkApprentice\")\n\n\t    var data = {\n\t        'state': context.state,\n\t        ...context.staged_SAI \n\t    }\n\n\t    const URL = this.AL_URL + '/check/' + context.agent_id + '/'\n\n\t    return fetch_retry(URL,\n\t    \t\t{method: \"POST\",\n\t    \t\t headers: JSON_HEADERS,\n\t    \t\t body:JSON.stringify(data)})\n\t    \t\t.then(res => res.json())\n\t    \t\t.then(json => (+ json['reward']))\n\n\t}\n\n\n\tterm_print(message,type='default'){\n\t\tvar data = {message : message, type : type}\n\t    return fetch_retry(this.HOST_URL,\n\t\t    \t\t{method: \"PRINT\",\n\t\t    \t\theaders: JSON_HEADERS,\n\t    \t\t \tbody:JSON.stringify(data)})\n\t}\n\n\tkill_this(message,type=\"error\"){\n\t\tvar data = {message : message, type : type}\n\t    return fetch_retry(this.HOST_URL,\n\t\t    \t\t{method: \"QUIT\",\n\t\t    \t\theaders: JSON_HEADERS,\n\t    \t\t \tbody:JSON.stringify(data)})\n\t}\n\n\tgenerate_nools(context,event){\n\t\tconst URL = this.AL_URL + '/get_skills/' + context.agent_id + '/'\n\t\tvar data = {'states':this.request_history.map(x => x['state'])}\n\t    return fetch_retry(URL, \n\t    \t\t{method: \"POST\",\n\t    \t\t headers: JSON_HEADERS,\n\t    \t\t body:JSON.stringify(data,ignoreKeys)})\n\t    \t\t.then(res => res.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tconsole.log(\"NOOLS DIR: \", context.nools_dir)\n\t\t\t\t    var out_data = {\"nools_dir\": context.nools_dir,\n\t\t                \"problems\": context.start_state_history,\n\t\t                \"skills\" : json\n\t\t                }\n\t\t            return fetch(this.HOST_URL, {\n\t\t            \tmethod: \"GEN_NOOLS\",\n\t\t            \theaders: JSON_HEADERS,\n\t\t            \tbody : JSON.stringify(out_data, ignoreKeys)\n\t\t            \t});\n\t\t\t\t});\n\t}\n\n\tgenerateBehaviorProfile(context,event={}) {\n\t    // data = {'states':request_history.map(x => x['state'])}\n\t    // console.log(JSON.stringify(data))\n\n\t    // requests = request_history\n\t    event.data = event.data || {}\n\t    var requests = event.data.requests || this.request_history\n\t    var dir = event.data.out_dir || ((context.working_dir || \".\") + \"/bprofiles\")\n\t    var HOST_URL = this.HOST_URL\n\t    var AL_URL = this.AL_URL\n\t    // requests = ground_truth_requests\n\n\t    // console.log(nools_dir)\n\t    var now = new Date()\n\t    var elapse = ((((now-context.agent_start_time) % 86400000) % 3600000) / 60000)\n\t    var start_data = {\"dir\": dir,\"elapse_minutes\": elapse.toFixed(1)}\n\n\t    var promise = fetch(HOST_URL, {\n\t    \tmethod : \"START_BEHAVIOR_PROFILE\",\n\t    \theaders : JSON_HEADERS,\n\t    \tbody : JSON.stringify(start_data)})\n\t\t.then(async function(whatever) {\n\t\t\tfor(let item of requests){\n\t    \t// requests.forEach(function (item, index) {\n\t    \t\tvar s = item['state']\n                var data = {\n                    'state': s,\n                    'kwargs': {'add_skill_info':true,'n':-1}\n                }\n                var resp = await fetch_retry(AL_URL + '/request/' + context.agent_id + '/',{\n                \tmethod : \"POST\",\n                \theaders : JSON_HEADERS,\n                \tbody: JSON.stringify(data),\n                }).then(res => res.json())\n\n                var responses = []\n                if(\"responses\" in resp){\n\t                resp[\"responses\"].forEach(function (r, index) {\n\t                    var sai = {selection: r['selection'],\n\t                           action: r['action'], \n\t                           inputs: r['inputs'], \n\t                    }\n\t                    console.log(r)\n\t                    console.log(r[\"selection\"])\n\t                    responses.push(sai)\n\t                });\n\t            }\n                var completeness_data = {\n                    'state' : s,\n                    'responses' : responses,\n                    'dir' : dir\n                }\n                await fetch(HOST_URL ,{\n                \tmethod : \"APPEND_BEHAVIOR_PROFILE\",\n\t\t\t    \theaders : JSON_HEADERS,\n\t\t\t    \tbody : JSON.stringify(completeness_data)})\n            }\n        })\n        return promise\n    }\n\n\n\t//     \t})\n\t    \t\n\n\t//     })\n\t//     $.ajax({\n\t//         type: \"START_COMPLETENESS\",\n\t//         url: window.location.origin,\n\t//         data: JSON.stringify(start_data),\n\t//         // contentType: \"application/json; charset=utf-8\",\n\t//         // dataType: 'json',\n\t//         error: ajax_retry_on_error,\n\t//         success: function(whatever) {\n\t//             console.log(\"STARTED\")\n\t//             requests.forEach(function (item, index) {\n\t//                 s = item['state']\n\t//                 var data = {\n\t//                     'state': s,\n\t//                     'kwargs': {'add_skill_info':true,'n':-1}\n\t//                 }\n\t//                 $.ajax({\n\t//                     type: 'POST',\n\t//                     url: AL_URL + '/request/' + agent_id + '/',\n\t//                     crossdomain : true,\n\t//                     data: JSON.stringify(data),\n\t//                     contentType: \"application/json; charset=utf-8\",\n\t//                     dataType: 'json',\n\t//                     context:item,\n\n\n\t//                     error: ajax_retry_on_error,\n\n\t//                     success: function(resp) {\n\t//                         console.log(\"WRITE\")\n\t//                         responses = []\n\t//                         if(\"responses\" in resp){\n\t//                             resp[\"responses\"].forEach(function (r, index) {\n\t//                                 sai = {selection: r['selection'],\n\t//                                        action: r['action'], \n\t//                                        inputs: r['inputs'], \n\t//                                 }\n\t//                                 console.log(r)\n\t//                                 console.log(r[\"selection\"])\n\t//                                 responses.push(sai)\n\t//                             });\n\t//                         }\n\n\t//                         completeness_data = {\n\t//                             'state' : this[\"state\"],\n\t//                             'responses' : responses,\n\t//                             'dir' : nools_dir\n\t//                         }\n\t//                         $.ajax({\n\t//                             type: \"APPEND_COMPLETENESS\",\n\t//                             url: window.location.origin,\n\t//                             data: JSON.stringify(completeness_data),\n\t                            \n\n\t//                             error: ajax_retry_on_error,\n\n\t//                             success : function(){\n\t//                                 console.log(\"WRITTEN\")\n\t//                             }\n\t//                         });\n\t//                     }\n\t//                 });\n\t//             });\n\t//         }\n\t//     });\n\t// }\n\n}\n\t    // console.log(\"STATE\",state);\n\n\t    // console.log(\"QUERY!\");\n\n\t    //!! if(EXAMPLES_ONLY){\n\t    //     if(interactive){\n\t    //         query_user_demonstrate(false);\n\t    //     }else{\n\t    //         post_next_example();    \n\t    //     }\n\t    // }else{\n\t        //!! request_history.push(data);\n\t        // data_str = \n\t        // add_skill_info\n        // $.ajax({\n        //     type: 'POST',\n        //     url: AL_URL + '/request/' + agent_id + '/',\n        //     crossdomain : true,\n        //     data: JSON.stringify(data),\n        //     contentType: \"application/json; charset=utf-8\",\n        //     dataType: 'json',\n\n        //     // async: true,\n        //     // timeout: AL_TIMEOUT,\n        //     retryLimit : AL_RETRY_LIMIT,\n        //     tryCount : 0,\n        //     error: ajax_retry_on_error,\n\n\n\n\t            // success: function(resp) {\n\t            //     // console.log(\"RESP\")\n\t            //     // console.log(resp)\n\t            //     if (jQuery.isEmptyObject(resp)) {\n\t            //     \tevent.service.send()\n\t            //         // console.log(\"RESPONSE EMPTY\")\n\t            //         // if(interactive){\n\t            //         //     setSkillWindowState({})\n\t            //         //     query_user_demonstrate(false);\n\t            //         // }else{\n\t            //         //     post_next_example();    \n\t            //         // }\n\t                    \n\t            //     } else {\n\t                    \n\t            //         applicable_skills = resp['responses']//.map(value=>value['skill_info'])\n\t            //         // console.log(applicable_skills)\n\t            //         if(interactive){\n\t            //             setSkillWindowState({\"Applicable Skills\" : applicable_skills},propose_sai,feedback_queue_change,null,initial_select='first')\n\t            //             feedback_queue = {}    \n\t            //         }\n\t                    \n\n\t            //     \t// staged_SAI = resp;\n\n\t            //         if(verbosity > 0) console.log('action to take!');\n\t            //         console.log(\"RESPONSE: \", resp);\n\t            //         currentElement = iframe_content.document.getElementById(resp.selection);\n\t            //         // console.log(resp)\n\t            //         if(!currentElement){\n\t            //         \tconsole.log(\"Element \" +resp.selection +\" does not exist, providing example instead.\");\n\t            //             alert(\"THIS HAPPENED... SO WE NEED TO ACTUALLY IMPLEMENT THIS.\");\n\t            //             term_print('\\x1b[0;30;47m' + \"ERROR: Selection Not found : \" + resp.selection + '\\x1b[0m');\n\t            //         }else{\n\t            //             // console.log(\"STATE\",state)\n\n\t            //             if(interactive){\n\t            //                 query_user_demonstrate(true)\n\t            //                 propose_sai(resp) \n\t            //             }else{\n\t            //                 currentElement.addEventListener(CTAT_CORRECT, handle_correct);\n\t            //                 currentElement.addEventListener(CTAT_INCORRECT, handle_incorrect);    \n\t            //                 console.log(\"REEEEZ\",resp)\n\t            //                 apply_sai(resp);    \n\t            //             }\n\t                        \n\t                        \n\t            //         }\n\t                    \n\t            //         // query_user_feedback(resp);\n\t            //     }\n\t            // },\n\t            // error: function (resp){\n\t            // \tcreateAgent(queryApprentice);\n\t            // }\n\t        // });\n\t    // }\n\t// }\n\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { TouchableHighlight,ScrollView,View, Text, StyleSheet } from \"react-native\";\nimport Panel from './panel.js'\nvar deep_equal = require('fast-deep-equal');\n\n\n\nfunction cramBtw(arr,sep){\n  return [...arr].map((e, i) => i < arr.length - 1 ? [e, sep] : [e]).reduce((a, b) => a.concat(b))\n}\n\nfunction colorItems(text, items, colors){\n  text = [text]\n  // for(var item in colorMap) {\n  items.forEach(function(item,i) {\n    text = text.map((t,_) => {\n      if(typeof t == 'string'){\n        let splt = t.split(item)\n        if(splt.length > 1){\n         return cramBtw(splt,<Text style={\n            {\"color\":colors[i],'textShadowRadius':3, 'textShadowColor': colors[i]}}>{item}</Text>);\n         // return cramBtw(splt,<Text style={{\"color\":colorMap[item]}}>{item}</Text>);\n        }\n      }\n      return t;\n    }).flat();\n  });\n  return text;\n}\n\nconst skill_text_by_action ={\n  ButtonPressed: function(skill,colors) {\n    return \"Press Button\"\n  },\n  UpdateTextField: function(skill,colors) {\n    return skill['name'] || skill['how'];\n  }\n\n};\n\nconst match_text_by_action = {\n  UpdateTextField: function(match,colors) {\n    let sel = match['mapping']['?sel']\n    let args =  Object.entries(match['mapping']).reduce(\n      function (acc,kv) {if(kv[0] !== \"?sel\") {acc.push(kv[1])}return acc;},[]);\n    // console.log(sel,args)\n    sel = sel.replace(\"?ele-\",\"\")\n    args = args.map(x => x.replace(\"?ele-\",\"\"))\n    let innerHTML = /*String.fromCharCode(8226) +*/ \"(\" + args.join(\", \") + \"): \" + sel + \"->\" + (match['inputs'] && match['inputs']['value']);\n    innerHTML = colorItems(innerHTML,[sel].concat(args), colors); // innerHTML = cramBtw( innerHTML.split(\"A1\"),<Text style={{\"color\":\"red\"}}>A1</Text>);\n    return innerHTML;\n  },\n  ButtonPressed: function(match,colors) {\n    return \"Press: \" + match['mapping']['?sel'].replace(\"?ele-\",\"\");\n  }                          \n}\n\n\nclass SkillPanel extends Component{\n  constructor(props){\n        super(props);\n\n\n        this.s_skill_set = this.structure_skills(props.skill_set)\n        \n        var select = this.starting_selection();\n        // const selected_skill = 0;\n        this.state = {\n          selected_skill: select,\n          selected_match: select,\n          feedback_map:{},\n          s_skill_set : {\"\" : []}\n        };\n      this.handleClickSkillItem = this.handleClickSkillItem.bind(this)\n      this.handleToggleFeedbackButton = this.handleToggleFeedbackButton.bind(this)\n  }\n\n  starting_selection(){\n    if(this.props.initial_select == \"first\"){\n      let first_key = Object.keys(this.s_skill_set)[0];\n      return first_key==null ? null : this.s_skill_set[first_key][0];\n    }\n\n  }\n\n  structure_skills(skill_set){\n    const s_skill_set = {}\n    var id_count = 0;\n    for (var title in skill_set) {\n      let skills = {};\n\n      for (var i in skill_set[title]){\n        var skill = skill_set[title][i]\n        if(!(skill['how'] in skills)){\n          \n          skills[skill['how']] = skill;\n          skills[skill['how']]['matches'] = []\n          // delete skills[skill['how']][\"mapping\"]\n\n        }\n        skill['_id'] = id_count++;\n        skills[skill['how']]['matches'].push(skill);\n\n      // console.log(skills)\n      s_skill_set[title] = Object.keys(skills).map((key,index)=>skills[key]);\n      }\n\n    }\n    return s_skill_set\n    // console.log(skill_set)\n  }\n\t\n\n  selectSkill(skill,match){\n    if(!match){\n      match = skill\n    }\n    this.setState({selected_skill: skill,\n                    selected_match: match})     \n  }\n\n  daisyChain(fnc, rest,callback){\n    return (evt) => {fnc(evt,rest,callback)};\n  }\n  handleClickSkillItem(evt,rest,callback){\n    const [skill,match] = rest;\n    // console.log(title,index,match)\n    // this.selectSkill(this.props.skill_set[title][index],match)\n    this.selectSkill(skill,match)\n    // console.log(this.props.select_callback)\n    if(this.props.select_callback){\n      this.props.interactions_service.send({type :\"STAGE_SAI\",data : match || skill})\n      // this.props.select_callback(match || skill)   \n    }\n    if(callback){\n      callback(rest)\n    }\n    \n  }\n  handleToggleFeedbackButton(evt,rest){\n    const [skill,match,label] = rest;\n    this.props.interactions_service.send(\n        {type: \"TOGGLE_FEEDBACK\",skill:skill, match:match, label:label})\n    // console.log(skill)\n    // console.log(match)\n    // console.log(label)\n    // let match_id = match[\"_id\"];\n    // // console.log(match[\"_id\"])\n    // // console.log(this.state.feedback_map)\n    // let new_label = (this.state.feedback_map[match_id]\n    //        && label === this.state.feedback_map[match_id]) ? null : label;\n    \n    // let new_feedback_map = {...this.state.feedback_map};\n    // if(new_label === null){\n    //   delete new_feedback_map[match_id];\n    // }else{\n    //   new_feedback_map[match_id] = new_label;\n    // }\n  }\n\n  updateFeedbackMap(new_feedback_map){\n    \n    // let was_empty = Object.keys(this.state.feedback_map).length === 0\n    // let now_empty = Object.keys(new_feedback_map).length === 0\n    // if(!was_empty && now_empty){\n    //   console.log(\"EMPTY\")\n    //   this.props.interactions_service.send(\"SKILL_PANEL_FEEDBACK_EMPTY\")\n    // }else if(was_empty && !now_empty){\n    //   console.log(\"NOT EMPTY\")\n    //   this.props.interactions_service.send(\"SKILL_PANEL_FEEDBACK_NONEMPTY\")\n    // }\n\n    this.setState({feedback_map : new_feedback_map});\n\n    console.log(new_feedback_map)\n\n    // if(this.props.correctness_callback){\n    //   this.props.correctness_callback(match || skill,new_label)\n    // }\n  }\n\n  queuedSkillApplicationFeedback(){\n    var feedback_queue = {}\n    let cm = {...this.state.feedback_map}\n    for (var key in cm) {\n      cm[key] = cm[key] === \"correct\" ? 1 :-1 \n    }\n    return cm\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if(!deep_equal(prevProps.skill_set,this.props.skill_set)){\n      let s_skill_set = this.structure_skills(this.props.skill_set)\n      this.setState({\n        feedback_map: {},\n        s_skill_set : s_skill_set\n      })\n\n      let s_keys = Object.keys(s_skill_set)\n      if(s_keys.length > 0){// && !this.state.selected_skill || !this.state.selected_skill){\n        let select = s_skill_set[s_keys[0]][0]\n        this.setState({\n            selected_skill: select,\n            selected_match: select,\n        })\n      }else{\n        this.setState({\n            selected_skill: null,\n            selected_match: null,\n        })\n      }\n    }\n    // }\n  }\n\n\n\trender(){\n    // console.log(this.s_skill_set)\n    // this.s_skill_set = this.structure_skills(this.props.skill_set)\n    \n    \n\n    // this.state = \n\t\treturn (\n\t\t    <View style={skillbox_styles.content}>\n\t\t      \n          <View style={liststyles.skill_list}>\n          <ScrollView>\n            {Object.keys(this.state.s_skill_set).map((title, index) => {\n              let header = <TouchableHighlight underlayColor=\"#fff\" >\n                 <Text style={liststyles.sectionHeader}>{title}</Text>\n              </TouchableHighlight> \n              // let itemStyle = liststyles.item;\n              let rest = this.state.s_skill_set[title].map((skill, index) => {\n                  const skill_eq = this.state.selected_skill && this.state.selected_skill['_id']===skill['_id'];\n                  // console.log(skill_eq)\n                  // console.log(\"IS\",itemStyle)\n                  // console.log(\"EQ\",eq, index, (eq ? itemStyle.selectColor : itemStyle.backgroundColor))\n                  let innerHTML = (skill_text_by_action[skill.action] || skill_text_by_action[\"UpdateTextField\"])(skill,this.props.where_colors)\n                  let skill_elem = <TouchableHighlight underlayColor=\"#f1f1f1\"\n                             onPress={ this.daisyChain(this.handleClickSkillItem,[skill],\n                                                       skill['callback']) } >\n                            <Text style={[liststyles.item, skill_eq && liststyles.selected_skill]} \n                            backgroundColor={\"#ff00ffff\"}>{\n                              innerHTML}</Text>\n                        </TouchableHighlight>\n                  let matches = [];\n                  if(\"matches\" in skill){\n                      // console.log(skill[\"matches\"])\n                      matches = skill[\"matches\"].map((match,mIndex) => {\n                        if('mapping' in match){\n                          const match_eq = this.state.selected_match && this.state.selected_match['_id']===match['_id'];\n                          \n                          // let sel = match['mapping']['?sel']\n                          // let args =  Object.entries(match['mapping']).reduce(\n                          //   function (acc,kv) {if(kv[0] != \"?sel\") {acc.push(kv[1])}return acc;},[]);\n                          // console.log(sel,args)\n                          // sel = sel.replace(\"?ele-\",\"\")\n                          // args = args.map(x => x.replace(\"?ele-\",\"\"))\n                          // let innerHTML = String.fromCharCode(8226) + \"(\" + args.join(\", \") + \"):\" + sel + \"->\" + (match['inputs'] && match['inputs']['value']);\n                          // innerHTML = colorItems(innerHTML,{\"B1\":'red',\"A1\":'green'}); // innerHTML = cramBtw( innerHTML.split(\"A1\"),<Text style={{\"color\":\"red\"}}>A1</Text>);\n                          // console.log(match_text_by_action,match.action)\n                          let innerHTML = (match_text_by_action[match.action] || match_text_by_action[\"UpdateTextField\"])(match,this.props.where_colors)\n                          let correct = this.state.feedback_map[match[\"_id\"]] === \"correct\";\n                          let incorrect = this.state.feedback_map[match[\"_id\"]] === \"incorrect\";\n                          // console.log(this.state.feedback_map)\n                          let match_view = <View style={liststyles.match_container}> \n\n                            <TouchableHighlight underlayColor=\"#919191\"  \n                            onPress = {this.daisyChain(this.handleToggleFeedbackButton,[skill,match,\"correct\"])}\n\n                                 // onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           // match['callback'])} >\n                                                           >\n                                <Text style={[liststyles.feedback_button, correct && liststyles.correct_selected]}>{\n                                  String.fromCharCode(10004)\n                                  // innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight underlayColor=\"#919191\"  \n                            onPress = {this.daisyChain(this.handleToggleFeedbackButton,[skill,match,\"incorrect\"])}\n                                 // onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           // match['callback'])} >\n                                                           >\n                                <Text style={[liststyles.feedback_button, incorrect && liststyles.incorrect_selected]}>{\n                                  String.fromCharCode(10006)\n                                  // innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n\n                            \n                            <TouchableHighlight underlayColor=\"#919191\"\n                                  style={{'flex': 1}}\n                                 onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           match['callback'])} >\n                                <Text style={[liststyles.match,skill_eq && match_eq && liststyles.selected_match]}>{\n                                  innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n                          </View>\n\n                          // let match_view = <View> {match_elem} </View>\n                          // console.log(typeof match_elem)\n                          return match_view;\n                        }else{\n                          return null;\n                        }\n                      })\n                  }\n                  matches = matches.filter(x => x != null); //remove undefinded\n                  return [skill_elem].concat(matches);\n                })\n              // console.log(title)\n              // console.log(header)\n              // console.log(rest)\n              return [header].concat(rest)\n              })\n            }\n          </ScrollView>\n\n            \n\n          </View>\n\n          \n\t\t      <ScrollView style={liststyles.skill_info}\n\t\t                 showsVerticalScrollIndicator={true}\n\t\t                 \n\t\t                 // contentInset= {{top: 20, left: 20, bottom: 0, right: 20}}\n\t\t                 >\n\t\t        <Panel title=\"How\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.how}>\n\t\t          <Text>{this.state.selected_skill && this.state.selected_skill.how}</Text>\n\t\t        </Panel>\n\t\t        <Panel title=\"Where\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.where}>\n\t\t          <Text>{this.state.selected_skill && JSON.stringify(this.state.selected_skill.where, null, 2)}</Text>\n\t\t        </Panel>\n\t\t        <Panel title=\"When\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.when}>\n\t\t          <Text>{this.state.selected_skill && this.state.selected_skill.when}</Text>\n\t\t        </Panel>\n\t\t        <Panel title=\"Which\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.which}>\n\t\t          <Text>{this.state.selected_skill && this.state.selected_skill.which}</Text>\n\t\t        </Panel>\n\n\t\t      </ScrollView>\n          \n\n\n\n\n\t\t    </View>  \n\t\t  );\n\t}\n\n}\n\nconst skillbox_styles = StyleSheet.create({\n  content: {\n    // \"display\": \"flex\",\n    flex : 1,\n\n    // \"height\" : \"100%\",\n    // \"flexDirection\":\"row-reverse\",\n    \"flexDirection\":\"row\",\n    \n    backgroundColor: \"#F5FCFF\",\n    // \"width\":\"100%\",\n    borderRadius: 4,\n    borderWidth: 0.5,\n    borderColor: '#d6d7da',\n    \n  },\n});\n\nconst liststyles = StyleSheet.create({\n  skill_list: {\n   flexBasis : 250,\n   paddingTop: 10,\n  },\n  skill_info: {\n   flex: 1,\n   paddingTop: 10,\n  },\n  sectionHeader: {\n    flexWrap: 'wrap',\n    paddingTop: 6,\n    paddingLeft: 10,\n    paddingRight: 10,\n    paddingBottom: 2,\n    fontSize: 15,\n    fontWeight: 'bold',\n    backgroundColor: \"'rgba(247,247,247,1.0)'\",\n  },\n  selected_skill:{\n    backgroundColor: \"#93e4ec\",\n  },\n  \n\n  item: {\n    flexWrap: 'wrap',\n    padding: 4,\n    paddingLeft: 6,\n    fontSize: 16,\n    borderBottomWidth: 1,\n    borderColor: 'gray',\n    backgroundColor: \"'rgba(247,0,0,0.0)'\",\n  },\n  feedback_button:{\n    fontSize: 20,\n    width:27,\n    textAlign:\"center\",\n    borderWidth:.1,\n    borderColor: 'lightgray',\n\n  },\n  incorrect_selected:{\n    // underlayColor:\"#00FF00\",\n    backgroundColor: \"red\",\n  },\n  correct_selected:{\n    backgroundColor: \"limegreen\",\n  },\n  match_container:{\n    display: 'flex',\n    flexDirection: 'row',\n    borderBottomWidth: 1,\n    borderColor: 'gray',\n\n  },\n  match: {\n    flex: 1,\n    flexWrap: 'wrap',\n    // justifySelf: 'stretch',\n    padding: 3,\n    textIndent:5,\n    fontSize: 15,\n    backgroundColor: \"'rgba(252,252,252,1.0)'\",\n\n  },\n  selected_match:{\n    backgroundColor: \"#b3e8ff\",\n  },\n})\n\n// function no_op(){\n// \tvoid 0;\n// }\n\nSkillPanel.propTypes = {\n  collapsedHeight: PropTypes.object,\n  select_callback: PropTypes.func,\n}\n\nSkillPanel.defaultProps = {\n  collapsedHeight: {\"how\": 40,\n\t\t\t\t\t\"where\": 90,\n\t\t\t\t\t\"when\": 90,\n\t\t\t\t\t\"which\": 40,\n\t\t\t\t\t},\n   //\"darkorchid\", \"#feb201\",   \"#ff884d\", \"#52d0e0\", \"#e44161\",  \"#2f85ee\", \"#562ac6\", \"#cc24cc\"\n   where_colors: [  \"darkorchid\",  \"#ff884d\",  \"#52d0e0\", \"#feb201\",  \"#e44161\", \"#ed3eea\", \"#2f85ee\",  \"#562ac6\", \"#cc24cc\"],\n   select_callback: () => {}\n}\n\nexport default SkillPanel;\n\n\n\n            /*<ScrollView >\n            \n                <SectionList \n                  sections={this.props.sections}\n\n                  renderSectionHeader={({section}) =>\n                  <TouchableHighlight underlayColor=\"#f1f1f1\" >\n                   <Text style={liststyles.sectionHeader}>{section.title}</Text>\n                  </TouchableHighlight>\n                  }\n                  renderItem={({item}) => \n                  <TouchableHighlight underlayColor=\"#f1f1f1\"\n                    onPress={this.props.clicky_callback}>\n                   <Text style={liststyles.item}>{item}</Text>\n                  </TouchableHighlight>\n                  }\n\n                  keyExtractor={(item, index) => index}\n                />\n            \n            </ScrollView>*/","import React, { Component } from 'react'\nimport {StyleSheet,Text,View,Image,TouchableHighlight,Animated} from 'react-native'; //Step 1\n\nclass Panel extends Component{\n    constructor(props){\n        super(props);\n\n        this.icons = {     //Step 2\n            'up'    : require('./images/Arrowhead-01-128.png'),\n            'down'  : require('./images/Arrowhead-Down-01-128.png')\n        };\n\n        this.state = {       //Step 3\n            title       : props.title,\n            expanded    : false,\n            expandable  : true,\n            animation   : new Animated.Value(props.collapsedHeight)\n        };\n    }\n\n    _setMaxHeight(event){\n        // console.log(\"maxheight\",event.nativeEvent.layout.height)\n        this.setState({\n            maxHeight   : event.nativeEvent.layout.height,\n            expandable  : event.nativeEvent.layout.height > this.props.collapsedHeight\n        });\n\n    }\n\n    _setMinHeight(event){\n        \n        // console.log(\"minheight\",minHeight,this.props.collapsedHeight)\n        this.setState({\n            minHeight   : event.nativeEvent.layout.height\n        });\n    }\n\n    toggle(){\n        //Step 1\n        // let initialValue, finalValue\n\n        let expandedHeight = Math.max(this.state.maxHeight + this.state.minHeight,this.props.collapsedHeight);\n        let collapsedHeight = Math.max(this.state.minHeight,this.props.collapsedHeight);\n        \n        let initialValue    = this.state.expanded? expandedHeight:collapsedHeight,\n            finalValue      = this.state.expanded? collapsedHeight:expandedHeight;\n        // console.log(finalValue)\n        this.setState({\n            expanded : !this.state.expanded  //Step 2\n        });\n\n        this.state.animation.setValue(initialValue);  //Step 3\n        Animated.timing(     //Step 4\n            this.state.animation,\n            {\n                toValue: finalValue,\n                duration: 50\n            }\n        ).start();  //Step 5\n    }\n\n\n    render(){\n        let icon = this.icons['down'];\n\n        if(this.state.expanded){\n            icon = this.icons['up'];   //Step 4\n        }\n\n        //Step 5\n        return ( \n            <Animated.View\n                style={[styles.container,{height: this.state.animation}]}>\n                <TouchableHighlight \n                    underlayColor=\"#f1f1f1\"\n                    onLayout={this._setMinHeight.bind(this)}\n                    onPress={this.state.expandable ? this.toggle.bind(this):null}> \n                    <View style={styles.titleContainer}>\n                        \n                        <Text style={styles.title}> {this.props.title} </Text> \n\n                    { this.state.expandable &&\n                        <Image\n                            style={styles.buttonImage}\n                            source={icon}\n                        ></Image>\n                    }\n                        \n                    </View>\n                </TouchableHighlight>\n                \n                <View style={styles.body} onLayout={this._setMaxHeight.bind(this)}> \n                    {this.props.children}\n                </View>\n\n            </Animated.View>\n        );\n    }\n}\n\n\nvar styles = StyleSheet.create({\n    container   : {\n        backgroundColor: '#fff',\n        margin:2,\n        overflow:'hidden'\n    },\n    titleContainer : {\n        flexDirection: 'row'\n    },\n    title       : {\n        flex    : 1,\n        padding : 2,\n        color   :'#2a2f43',\n        fontWeight:'bold'\n    },\n    button      : {\n\n    },\n    buttonImage : {\n        width   : 30,\n        height  : 25\n    },\n    body        : {\n        padding     : 5,\n        paddingTop  : 0,\n        paddingBottom  : 20,\n\n    }\n});\n\nexport default Panel;"],"sourceRoot":""}