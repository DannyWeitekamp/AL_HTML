(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){var i=n(52),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),d=i(n(1)),f=n(36),_=(r(n(99)),n(100)),p=["Or specify if the ",d.default.createElement(f.Text,{style:{color:"darkorchid",textShadowRadius:3,textShadowColor:"darkorchid"}},"highlighted")," input is correct for the next step."],h=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(0,u.default)(t).call(this,e))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=this.props.interactions_state,n=function(e){return t&&t.matches?t.matches(e):_(e,{Waiting_User_Feedback:"Waiting_Yes_No_Feedback"})};console.log("props",this.props);var i=function(t){console.log(t),console.log(e.props.callbacks),e.props.callbacks&&t in e.props.callbacks&&e.props.callbacks[t](),e.props.interactions_service.send(t)};return d.default.createElement(f.View,{style:g.container},d.default.createElement(f.View,{style:g.button_wrapper1},d.default.createElement(f.Text,{style:g.prompt1},n("Setting_Start_State")&&"Set the start state.",(n("Waiting_User_Feedback")||n({Waiting_User_Feedback:"Waiting_Yes_No_Feedback"}))&&"Demonstrate the next step.",n("Explantions_Displayed")&&"Press next to continue. Or demonstrate the next step.",n("Waiting_Select_Foci")&&"Select any interface elements that were used to compute this result.",n("Waiting_User_Attempt")&&"TUTOR MODE"),n("Waiting_Select_Foci")&&d.default.createElement(f.TouchableHighlight,{style:g.next_button,underlayColor:"#CCCCCC",onPress:function(){return i("FOCI_DONE")}},d.default.createElement(f.Text,{style:g.next_button_text},"Next")),n("Explantions_Displayed")&&d.default.createElement(f.TouchableHighlight,{style:g.next_button,underlayColor:"#CCCCCC",onPress:function(){return i("NEXT_PRESSED")}},d.default.createElement(f.Text,{style:g.next_button_text},"Next")),n("Setting_Start_State")&&d.default.createElement(f.TouchableHighlight,{style:g.startstate_button,underlayColor:"#CCCCCC",onPress:function(){return i("START_STATE_SET")}},d.default.createElement(f.Text,{style:g.startstate_button_text},"Start State Done"))),(n({Waiting_User_Feedback:"Waiting_Yes_No_Feedback"})||n({Waiting_User_Feedback:"Waiting_Submit_Feedback"}))&&d.default.createElement(f.View,{style:g.button_wrapper2},d.default.createElement(f.Text,{style:g.prompt2},n({Waiting_User_Feedback:"Waiting_Yes_No_Feedback"})&&p,n({Waiting_User_Feedback:"Waiting_Submit_Feedback"})&&"Or press submit to send the feedback from the skill panel."),n({Waiting_User_Feedback:"Waiting_Yes_No_Feedback"})&&d.default.createElement(f.View,{style:g.yes_no},d.default.createElement(f.TouchableHighlight,{style:g.yes_button,underlayColor:"#CCCCCC",onPress:function(){return i("YES_PRESSED")}},d.default.createElement(f.Text,{style:g.yes_button_text},"YES")),d.default.createElement(f.TouchableHighlight,{style:g.no_button,underlayColor:"#CCCCCC",onPress:function(){return i("NO_PRESSED")}},d.default.createElement(f.Text,{style:g.no_button_text},"NO"))),n({Waiting_User_Feedback:"Waiting_Submit_Feedback"})&&d.default.createElement(f.TouchableHighlight,{style:g.submit_button,underlayColor:"#CCCCCC",onPress:function(){return i("SUBMIT_SKILL_FEEDBACK")}},d.default.createElement(f.Text,{style:g.submit_button_text},"Submit"))),!this.props.debugmode&&d.default.createElement(f.View,{style:g.button_wrapper3},d.default.createElement(f.TouchableHighlight,{style:g.nools_button,underlayColor:"#CCCCCC",onPress:function(){return i("GEN_NOOLS")}},d.default.createElement(f.Text,{style:g.nools_button_text},"Generate Nools"))),this.props.debugmode&&d.default.createElement(f.View,{style:g.button_wrapper3},d.default.createElement(f.View,{style:{display:"absolute",bottom:0,flexDirection:"row"}},d.default.createElement(f.TouchableHighlight,{style:[g.yes_button,{height:20}],underlayColor:"#CCCCCC",onPress:function(){return i("DEMONSTRATE")}},d.default.createElement(f.Text,{style:{fontSize:10}},"Demonstrate")),d.default.createElement(f.TouchableHighlight,(0,a.default)({style:[g.yes_button,{height:20}],underlayColor:"#CCCCCC",onPress:function(){}},"onPress",function(){return i("DONE")}),d.default.createElement(f.Text,{style:{fontSize:10}},"Done")),d.default.createElement(f.TouchableHighlight,(0,a.default)({style:[g.yes_button,{height:20}],underlayColor:"#CCCCCC",onPress:function(){}},"onPress",function(){return i("APPLICABLE_SKILLS_RECIEVED")}),d.default.createElement(f.Text,{style:{fontSize:10}},"Req recieved")))))}}]),t}(d.Component),g=f.StyleSheet.create({container:{flex:1,flexDirection:"column"},prompt1:{fontSize:20,textAlign:"center",margin:3,flexWrap:"wrap"},prompt2:{fontSize:20,textAlign:"center",margin:7,marginTop:25,marginBottom:12,flexWrap:"wrap"},button_wrapper1:{display:"flex",flexDirection:"column",alignItems:"center"},button_wrapper2:{display:"flex",flexDirection:"column",alignItems:"center",flexShrink:1},button_wrapper3:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"auto"},yes_no:{display:"flex",flexDirection:"row"},nools_button:{position:"absolute",bottom:5,padding:5,width:200,backgroundColor:"#999999",borderRadius:5},nools_button_text:{fontSize:18,textAlign:"center"},startstate_button:{position:"relative",width:200,backgroundColor:"#4CAF50",borderRadius:5,padding:5},startstate_button_text:{fontSize:20,textAlign:"center"},yes_button:{width:80,backgroundColor:"#4CAF50",borderRadius:6,margin:8,padding:4},yes_button_text:{fontSize:30,textAlign:"center"},no_button:{width:80,backgroundColor:"#f44336",borderRadius:6,margin:8,padding:4},no_button_text:{fontSize:30,textAlign:"center"},next_button:{width:100,backgroundColor:"#4CAFFF",borderRadius:6,margin:10,padding:5},next_button_text:{fontSize:35,textAlign:"center"},submit_button:{width:150,backgroundColor:"#4CAFFF",borderRadius:6,margin:10,padding:5},submit_button_text:{fontSize:30,textAlign:"center"},prompt_text:{textAlign:"center",fontSize:25}}),m=h;t.default=m},104:function(e,t,n){var i=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.build_interactions_sm=b,t.default=void 0;var r=i(n(41)),a=i(n(46)),o=n(71),s=(0,o.assign)({start_state_history:function(e,t){var n=e.tutor.get_state(),i=e.start_state_history||[];return i.push(n),i}}),l=(0,o.assign)({state:function(e,t){return null==e.staged_SAI||e.staged_SAI.reward>0?e.tutor.get_state():e.state}}),u=(0,o.assign)({staged_SAI:function(e,t){return(0,a.default)(e.staged_SAI,{foci_of_attention:e.tutor.get_current_foci()}),e.staged_SAI}});function c(e,t){var n=e.staged_SAI;return"done"===n.selection&&(null==n.reward||n.reward>0)}function d(e,t){return e.free_author||!1}function f(e,t){return t.data>0}function _(e,t){return!Object.keys(t.data).length}function p(e,t){console.error(t.data)}function h(e,t){e.network_layer.kill_this(t.data.toString())}function g(e,t){var n=e.network_layer,i=e.staged_SAI,r=e.action_type;if(e.feedback_map&&0!==Object.keys(e.feedback_map).length)for(var a in e.feedback_map){var o=e.skill_applications[a];r=e.feedback_map[a].toUpperCase(),s=o.inputs.value||"";n.term_print(r+": "+o.selection+" -> "+s,r)}else{"ATTEMPT"==r&&(r=i.reward>0?"CORRECT":"INCORRECT");var s=i.inputs.value||"";n.term_print(r+": "+i.selection+" -> "+s,r)}}function m(e,t){e.app.setState({skill_panel_props:{skill_set:{"Applicable Skills":{}}}})}function y(e,t){e.app.setState({skill_panel_props:{skill_set:{"Applicable Skills":t.data.responses||{}}}})}var E=(0,o.send)(function(e,t){t.skill;var n=t.match,i=t.label,a=n._id,o=e.feedback_map||{},s=o[a]&&i===o[a]?null:i,l=(0,r.default)({},o);return null===s?delete l[a]:l[a]=s,{type:"FEEBACK_MAP_UPDATE",feedback_map:l,was_empty:0===Object.keys(o).length,now_empty:0===Object.keys(l).length}}),T=(0,o.assign)({feedback_map:function(e,t){return e.skill_panel.updateFeedbackMap&&e.skill_panel.updateFeedbackMap(t.feedback_map),e.tutor.updateFeedbackMap&&e.tutor.updateFeedbackMap(t.feedback_map),t.feedback_map}}),v=(0,o.send)(function(e,t){return!t.was_empty&&t.now_empty?(console.log("EMPTY"),{type:"SKILL_PANEL_FEEDBACK_EMPTY"}):t.was_empty&&!t.now_empty?(console.log("NOT EMPTY"),{type:"SKILL_PANEL_FEEDBACK_NONEMPTY"}):{type:""}});function b(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]),a={app:e,tutor:e.tutor.current,skill_panel:e.skill_panel.current,buttons:e.buttons.current,network_layer:e.network_layer,agent_id:null,interactive:null,free_author:null,staged_SAI:null,action_type:null};return t=i?A:n?S:w,(0,o.Machine)((0,r.default)({},{context:a},t),function(e){var t=e.tutor.current,n=(e.skill_panel.current,e.network_layer.current,e.network_layer);return{services:{sendFeedback:function(e,t){return n.sendFeedback(e,t)},sendFeedbackExplicit:function(e,t){return n.sendFeedbackExplicit(e,t)},applyNextExample:t.applyNextExample,attemptStagedSAI:t.attemptStagedSAI,queryApprentice:n.queryApprentice,checkApprentice:n.checkApprentice},actions:{logError:p,stateRecalc:l,assignResponse:(0,o.assign)({response:function(e,t){return t.data}}),assignStagedSAI:(0,o.assign)({staged_SAI:function(e,t){return t.data}}),assignExample:(0,o.assign)({action_type:function(e,t){return"EXAMPLE"}}),assignAttempt:(0,o.assign)({action_type:function(e,t){return"ATTEMPT"}}),assignCorrect:(0,o.assign)({staged_SAI:function(e,t){return(0,r.default)({},e.staged_SAI,{reward:1})}}),assignIncorrect:(0,o.assign)({staged_SAI:function(e,t){return(0,r.default)({},e.staged_SAI,{reward:-1})}}),assignFoci:u,clearFeedbackData:(0,o.assign)(function(e,t){return{reward:null,rewards:null,staged_SAI:null,skill_applications:null,feedback_map:null}}),assignSkillApplications:(0,o.assign)({skill_applications:function(e,t){return t.data.responses||t.data.skill_applications}}),printFeedback:g,kill_this:h,printEvent:function(e,t){console.log("P_EVT:",t)},fillSkillPanel:y,clearSkillPanel:m,done:function(e,t){e.app.training_service.send("PROBLEM_DONE")},enterSetStartStateMode:t.enterSetStartStateMode,exitSetStartStateMode:t.exitSetStartStateMode,enterFeedbackMode:t.enterFeedbackMode,exitFeedbackMode:t.exitFeedbackMode,enterFociMode:t.enterFociMode,exitFociMode:t.exitFociMode,enterTutoringMode:t.enterTutoringMode,exitTutoringMode:t.exitTutoringMode,displayCorrectness:t.displayCorrectness,applyStagedSAI:function(e,n){t.applySAI(e.staged_SAI)},proposeSAI:function(e,n){return t.proposeSAI(n.data)},confirmProposedSAI:function(e,n){t.confirmProposedSAI()},clearProposedSAI:function(e,n){t.clearProposedSAI()},recalcFeedbackMap:E,assignFeedbackMap:T,toggleFeedbackStyle:v,generate_nools:n.generate_nools,appendStartHistory:s},guards:{saiIsCorrectDone:c,noApplicableSkills:_,isFreeAuthor:d,checkIsCorrect:f}}}(e))}var w={initial:"Start",states:{Start:{entry:"stateRecalc",on:{"":"Querying_Apprentice"}},Querying_Apprentice:{invoke:{id:"queryApprentice",src:"queryApprentice",onDone:[{target:"Applying_Next_Example",cond:"noApplicableSkills"},{target:"Applying_Staged_SAI",actions:["assignStagedSAI"]}],onError:"Fail"},exit:"assignResponse"},Applying_Staged_SAI:{invoke:{id:"attemptStagedSAI",src:"attemptStagedSAI",onDone:{target:"Sending_Feedback",actions:["assignStagedSAI","assignAttempt"]},onError:"Fail"}},Applying_Next_Example:{invoke:{id:"applyNextExample",src:"applyNextExample",onDone:{target:"Sending_Feedback",actions:["assignStagedSAI","assignExample"]},onError:"Fail"}},Sending_Feedback:{entry:"printFeedback",invoke:{id:"sendFeedback",src:"sendFeedback",onDone:[{target:"Done",cond:"saiIsCorrectDone"},{target:"Querying_Apprentice"}],onError:"Fail"},exit:["stateRecalc","assignResponse","clearFeedbackData"]},Done:{type:"final",entry:"done"},Fail:{entry:["logError","kill_this"]}}},S={id:"interactive",initial:"Start",states:{Start:{entry:"stateRecalc",on:{"":[{target:"Setting_Start_State",cond:"isFreeAuthor"},{target:"Querying_Apprentice"}]}},Setting_Start_State:{entry:"enterSetStartStateMode",on:{START_STATE_SET:{target:"Querying_Apprentice",actions:["appendStartHistory"]}},exit:["exitSetStartStateMode","stateRecalc"]},Querying_Apprentice:{invoke:{id:"queryApprentice",src:"queryApprentice",onDone:[{target:"Waiting_User_Feedback.Waiting_Demonstrate_Only",cond:"noApplicableSkills",actions:["fillSkillPanel"]},{target:"Waiting_User_Feedback.Waiting_Yes_No_Feedback",actions:["fillSkillPanel","proposeSAI","assignStagedSAI"]}],onError:"Fail"},exit:"assignSkillApplications"},Waiting_User_Feedback:{entry:"enterFeedbackMode",initial:"Waiting_Demonstrate_Only",states:{Waiting_Demonstrate_Only:{},Waiting_Yes_No_Feedback:{on:{SKILL_PANEL_FEEDBACK_NONEMPTY:"Waiting_Submit_Feedback",YES_PRESSED:{target:"#interactive.Sending_Feedback",actions:["assignCorrect","assignAttempt","confirmProposedSAI"]},NO_PRESSED:{target:"#interactive.Sending_Feedback",actions:["assignIncorrect","assignAttempt","clearProposedSAI"]}}},Waiting_Submit_Feedback:{on:{SKILL_PANEL_FEEDBACK_EMPTY:"Waiting_Yes_No_Feedback",SUBMIT_SKILL_FEEDBACK:{target:"#interactive.Sending_Feedback_Explicit",actions:["clearProposedSAI"]}}}},on:{STAGE_SAI:{actions:["assignStagedSAI","proposeSAI"]},TOGGLE_FEEDBACK:{actions:"recalcFeedbackMap"},FEEBACK_MAP_UPDATE:{actions:["assignFeedbackMap","toggleFeedbackStyle"]},DEMONSTRATE:{target:"Waiting_Select_Foci",actions:["assignStagedSAI","assignExample","printEvent","clearProposedSAI"]},GEN_NOOLS:{actions:["generate_nools"]}},exit:["exitFeedbackMode"]},Waiting_Select_Foci:{entry:"enterFociMode",on:{"":{target:"Sending_Feedback",actions:"assignFoci",cond:"saiIsCorrectDone"},FOCI_DONE:{target:"Sending_Feedback",actions:"assignFoci"}},exit:"exitFociMode"},Sending_Feedback:{entry:["printFeedback"],invoke:{id:"sendFeedback",src:"sendFeedback",onDone:[{target:"Done",cond:"saiIsCorrectDone"},{target:"Querying_Apprentice"}],onError:"Fail"},exit:["stateRecalc","assignResponse","clearFeedbackData"]},Sending_Feedback_Explicit:{entry:"printFeedback",invoke:{id:"sendFeedbackExplicit",src:"sendFeedbackExplicit",onDone:[{target:"Done",cond:"saiIsCorrectDone"},{target:"Querying_Apprentice"}],onError:"Fail"},exit:["stateRecalc","assignResponse","clearFeedbackData"]},Done:{type:"final",entry:["clearSkillPanel","done"]},Fail:{entry:["logError","kill_this"]}}},A={id:"interactive",initial:"Start",states:{Start:{entry:"stateRecalc",on:{"":[{target:"Setting_Start_State",cond:"isFreeAuthor"},{target:"Waiting_User_Attempt"}]}},Setting_Start_State:{entry:"enterSetStartStateMode",on:{START_STATE_SET:{target:"Waiting_User_Attempt",actions:["appendStartHistory"]}},exit:["exitSetStartStateMode","stateRecalc"]},Waiting_User_Attempt:{entry:["enterTutoringMode","stateRecalc"],on:{ATTEMPT:{target:"Checking_Against_Apprentice",actions:"assignStagedSAI"}},exit:"exitTutoringMode"},Checking_Against_Apprentice:{invoke:{id:"checkApprentice",src:"checkApprentice",onDone:[{cond:"checkIsCorrect",target:"Waiting_User_Attempt",actions:["displayCorrectness","assignCorrect"]},{target:"Waiting_User_Attempt",actions:["displayCorrectness","assignIncorrect"]}]}}}},k=b;t.default=k},124:function(e,t,n){e.exports=n(125)},125:function(e,t,n){var i=n(52),r=n(31),a=r(n(46)),o=r(n(41)),s=r(n(1)),l=r(n(34));n(129);r(n(89)),r(n(101));var u=i(n(166)),c=(n(71),r(n(167))),d=r(n(180)),f=r(n(184)),_=r(n(105)),p={ctatttutor:c.default,ctat:c.default,stylustutor:d.default,stylus:d.default};function h(e){var t;try{t=JSON.parse(e)}catch(n){t=null}return t}var g,m=function(){var e=new URLSearchParams(window.location.search.substring(1));console.log(window.location.search),console.log(e);var t={AL_URL:e.get("al_url"),HOST_URL:window.location.origin,training_file:e.get("training"),interactive:h((e.get("interactive")||"").toLowerCase()),use_foci:h((e.get("use_foci")||"").toLowerCase()),tutor:e.get("tutor"),nools_dir:e.get("nools_dir")};return console.log("PROPS",t,e.get("interactive")),t}();m.training_file=m.training_file||"/stylus_author.json",(g=m.training_file,fetch(g).then(function(e){return e.text()}).then(function(e){return _.default.parse(e)})).then(function(e){var t=e.set_params;(m=(0,o.default)({},t,function(e){var t={};return console.log(e),Object.keys(e).forEach(function(n){console.log(n),null!=e[n]&&(t[n]=e[n])}),t}(m))).tutor=(m.tutor||"ctat").toLowerCase().replace("_",""),l.default.render(s.default.createElement(f.default,(0,a.default)({ref:function(e){window.react_interface=e},style:{height:"100%"},tutorClass:p[m.tutor]||d.default},m)),document.getElementById("root"))}),u.unregister()},129:function(e,t,n){},164:function(e,t,n){e.exports=n.p+"static/media/Arrowhead-01-128.3fbf838f.png"},165:function(e,t,n){e.exports=n.p+"static/media/Arrowhead-Down-01-128.912d4e8d.png"},166:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(e){if("serviceWorker"in navigator){var t=new URL(".",window.location.href);if(t.origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");i?(!function(e,t){fetch(e).then(function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):r(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):r(t,e)})}},t.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})};var i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}},167:function(e,t,n){var i=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(68)),a=i(n(47)),o=i(n(41)),s=i(n(46)),l=i(n(12)),u=i(n(13)),c=i(n(14)),d=i(n(15)),f=i(n(16)),_=i(n(54)),p=i(n(1)),h=i(n(168)),g=i(n(70)),m=(n(36),n(173)),y=n(177),E=n(179);function T(e,t){for(var n=!1,i=t.length-1;i>=0;i--){var r=t[i];e.classList.contains(r)&&(n=!0)}return n}var v=function(e){function t(e){var n;return(0,l.default)(this,t),n=(0,c.default)(this,(0,d.default)(t).call(this,e)),(0,g.default)((0,_.default)((0,_.default)(n))),n.where_colors=["darkorchid","#ff884d","#52d0e0","#feb201","#e44161","#ed3eea","#2f85ee","#562ac6","#cc24cc"],n.relative_pos_cache={},n.color_class_map={EXAMPLE:"CTAT--example",CORRECT:"CTAT--correct",INCORRECT:"CTAT--incorrect",HIGHLIGHT:"CTAT--AL_highlight",START_STATE:"CTAT--AL_start",ATTEMPT:"",DEFAULT:""},n.ctat_webview=p.default.createRef(),n.state={source:"../../examples/FracPreBake/FractionArithmetic/HTML/fraction_arithmetic.html?question_file=../mass_production/mass_production_brds/AD 5_9_plus_3_7.brd"},n.start_state_history=[],n.highlighted_elements=[],n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){console.log("THIS",this)}},{key:"componentDidUpdate",value:function(e,t){console.log("UPDATED",this.state),this.iframe=this.ctat_webview.current,this.init_callback||(this.init_callback=function(e){})}},{key:"loadProblem",value:function(e){var t=this,n=e.prob_obj,i=e.network_layer,r=e.interactive;return this.interactive=e.interactive,this.setState({source:{html:b}}),new Promise(function(a,o){var l=n.HTML.substring(n.HTML.lastIndexOf("/")+1).replace(".html",""),u=n.domain_name||l,c=n.HTML;y.isAbsolute(c)||(c=y.join(e.working_dir||"/",c));var d,f,_=void 0!=n.question_file&&"INTERACTIVE"!=n.question_file.toUpperCase();_?(d=n.question_file.substring(n.question_file.lastIndexOf("/")+1).replace(".brd","").replace(".nools",""),f=!1):(d="FREE AUTHORING",f=!0),i.term_print("Starting Problem: "+d,"INFO");var p=_?{question_file:n.question_file}:{question_file:"/src/empty.nools"};console.log("qf",p,r),!r&&p.question_file.includes(".nools")&&i.kill_this("Question file cannot be nools in non-interactive mode. Use example tracing.");var h={problem_name:d,dataset_level_name1:u,dataset_level_type1:"Domain",SessionLog:"true",Logging:"ClientToLogServer",log_service_url:window.location.origin,user_guid:e.agent_id,session_id:e.session_id},g=(0,s.default)({},p,h);t.HTML_PATH=c,t.init_callback=function(){a({updateContext:{free_author:f}})};var E=c+"?"+m.stringify(g);console.log("source",E),t.graph=null,t.commLibrary=null,t.hasConfig=null,t.setState({source:{uri:E},onLoad:t._triggerWhenInitialized})})}},{key:"_inject_element",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.iframe_content.document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);this.iframe_content.document.getElementsByTagName("head")[0].appendChild(n)}},{key:"_triggerWhenInitialized",value:function(){var e=this;console.log("TRIGGER WHEN INITIALIZED"),this.iframe_content=this.iframe.frameRef.contentWindow;var t=this.iframe_content;if("undefined"==typeof t.CTAT||null==t.CTAT||"undefined"==typeof t.CTATCommShell||null==t.CTATCommShell||"undefined"==typeof t.CTATCommShell.commShell||null==t.CTATCommShell.commShell||"undefined"==typeof t.CTAT.ToolTutor||null==t.CTAT.ToolTutor||"undefined"==typeof t.CTAT.ToolTutor.tutor||null==t.CTAT.ToolTutor.tutor)return console.log("BLEHH1"),void window.setTimeout(function(){e._triggerWhenInitialized()},500);this.graph=t.CTAT.ToolTutor.tutor.getGraph()||!1,this.commLibrary=t.CTATCommShell.commShell.getCommLibrary(),this.hasConfig=void 0!=t.CTATConfiguration,(this.graph||this.interactive)&&this.commLibrary&&this.hasConfig?(this._inject_element("link",{href:"/css/AL_colors.css",type:"text/css",rel:"stylesheet"}),t.flashVars.setParams({deliverymode:"bleehhhh"}),this.CTAT_CORRECT=t.CTAT.Component.Base.Tutorable.EventType.correct,this.CTAT_INCORRECT=t.CTAT.Component.Base.Tutorable.EventType.incorrect,this.CTAT_ACTION=t.CTAT.Component.Base.Tutorable.EventType.action,console.log("INITIALIZED!"),this.init_callback(this)):(console.log("BLEHH2"),window.setTimeout(function(){e._triggerWhenInitialized()},500))}},{key:"handle_user_set_state",value:function(e){var t=e.detail.sai,n=t.getSelection();""!=t.getInput()?(this.colorElement(n,"START_STATE"),this.start_state_elements.push(n)):(this.colorElement(n,"DEFAULT"),this.start_state_elements.includes(n)&&this.start_state_elements.remove(n))}},{key:"enterSetStartStateMode",value:function(){this.start_state_elements=[],this.iframe_content.document.addEventListener(this.CTAT_ACTION,this.handle_user_set_state)}},{key:"exitSetStartStateMode",value:function(){for(var e in this.iframe_content.document.removeEventListener(this.CTAT_ACTION,this.handle_user_set_state),console.log("START DONE"),this.start_state_elements){var t=this.start_state_elements[e];this.iframe_content.document.getElementById(t).firstChild.value&&this.lockElement(t),this.colorElement(t,"DEFAULT")}this.start_state_history.push(this.get_state())}},{key:"handleUserExample",value:function(e){this.handleUserInput(e,"EXAMPLE")}},{key:"handleUserAttempt",value:function(e){this.handleUserInput(e,"ATTEMPT")}},{key:"handleUserInput",value:function(e,t){var n=(i=e.detail.sai).getSelection();if("false"!=this.iframe_content.document.getElementById(n).firstChild.contentEditable){var i={selection:i.getSelection(),action:i.getAction(),inputs:{value:i.getInput()}};if(this.lockElement(n),this.colorElement(n,t),"EXAMPLE"==t)this.props.interactions_service.send({type:"DEMONSTRATE",data:(0,o.default)({},i,{reward:1})});else{if("ATTEMPT"!=t)throw"uknown type given";console.log("SEND ATTEMPT",i),this.props.interactions_service.send({type:"ATTEMPT",data:(0,o.default)({},i)})}}else console.log("BAIL")}},{key:"displayCorrectness",value:function(e,t){var n=e.staged_SAI.selection;1==t.data?this.colorElement(n,"CORRECT"):(this.colorElement(n,"INCORRECT"),this.unlockElement(n))}},{key:"_done_clicked_example",value:function(e){this.handleUserExample({detail:{sai:new this.iframe_content.CTATSAI("done","ButtonPressed","-1")}})}},{key:"enterFeedbackMode",value:function(){this.iframe_content.document.addEventListener(this.CTAT_ACTION,this.handleUserExample),this.iframe_content.document.getElementById("done").addEventListener("click",this._done_clicked_example)}},{key:"exitFeedbackMode",value:function(){this.iframe_content.document.removeEventListener(this.CTAT_ACTION,this.handleUserExample),this.iframe_content.document.getElementById("done").removeEventListener("click",this._done_clicked_example)}},{key:"_done_clicked_attempt",value:function(e){this.handleUserAttempt({detail:{sai:new this.iframe_content.CTATSAI("done","ButtonPressed","-1")}})}},{key:"enterTutoringMode",value:function(){this.iframe_content.document.addEventListener(this.CTAT_ACTION,this.handleUserAttempt),this.iframe_content.document.getElementById("done").addEventListener("click",this._done_clicked_attempt)}},{key:"exitTutoringMode",value:function(){this.iframe_content.document.removeEventListener(this.CTAT_ACTION,this.handleUserAttempt),this.iframe_content.document.getElementById("done").removeEventListener("click",this._done_clicked_attempt)}},{key:"handle_foci_select",value:function(e){console.log("FOCI SELECT!");var t=!0,n=!1,i=void 0;try{for(var r,a=e.path["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(console.log("EELE",o),void 0!=o.classList&&o.classList.contains("CTATComponent")){var s=this.current_foci.indexOf(o);-1==s?(this.current_foci.push(o),this.highlightElement(o.id,1)):(this.current_foci.splice(s,1),this.unhighlightElement(o.id)),console.log(this.current_foci);break}}}catch(l){n=!0,i=l}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"enterFociMode",value:function(){console.log("FOCI START!"),this.unhighlightAll(),this.current_foci=[],this.iframe_content.document.addEventListener("click",this.handle_foci_select)}},{key:"get_current_foci",value:function(){return this.current_foci?this.current_foci.map(function(e){return e.id}):[]}},{key:"exitFociMode",value:function(){this.unhighlightAll(),console.log("FOCI DONE!"),this.current_foci=[],this.iframe_content.document.removeEventListener("click",this.handle_foci_select)}},{key:"attemptStagedSAI",value:function(e,t){var n=this;return new Promise(function(t,i){var r=e.staged_SAI,a=n.iframe_content.document.getElementById(r.selection),s=n.CTAT_CORRECT,l=n.CTAT_INCORRECT;function u(e){console.log("EVENT",e.detail.sai.getTransactionID()),console.log("EVENT",e.detail.sai.getTransactionID()),a.removeEventListener(s,u),a.removeEventListener(l,u),t((0,o.default)({},r,{reward:e.type==s?1:-1}))}a.addEventListener(s,u),a.addEventListener(l,u),n.applySAI(r)})}},{key:"applyNextExample",value:function(e,t){var n=this;return new Promise(function(e,t){n.applyHint();var i=n.getDefaultSAI();n.colorElement(i.selection,"EXAMPLE"),n.applySAI(i),e((0,o.default)({},i,{reward:1}))})}},{key:"applySAI",value:function(e){var t=this.iframe_content.document.getElementById(e.selection);if("false"==(t["data-ctat-enabled"]||"true")){var n=new CustomEvent(this.CTAT_INCORRECT,{detail:{sai:e,component:t},bubbles:!0,cancelable:!0});t.dispatchEvent(n)}"ButtonPressed"==e.action&&(e.inputs={value:-1});var i=new(0,this.iframe_content.CTATSAI)(e.selection,e.action,e.inputs.value);this.iframe_content.CTATCommShell.commShell.processComponentAction(i,!0)}},{key:"lockElement",value:function(e){this.iframe_content.CTATShellTools.findComponent(e)[0].setEnabled(!1)}},{key:"unlockElement",value:function(e){this.iframe_content.CTATShellTools.findComponent(e)[0].setEnabled(!0)}},{key:"colorElement",value:function(e,t){var n=this.iframe_content.document.getElementById(e);n&&n.firstElementChild&&n.firstElementChild.setAttribute("class",this.color_class_map[t])}},{key:"highlightElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.unhighlightElement(e),this.iframe_content.document.getElementById(e.replace("?ele-","")).firstElementChild.classList.add("CTAT--AL_highlight"+t),this.highlighted_elements.push(e)}},{key:"unhighlightElement",value:function(e){if(this.highlighted_elements.includes(e)){for(var t=this.iframe_content.document.getElementById(e.replace("?ele-","")),n=(t.firstElementChild.classList.toString(),1);n<=this.where_colors.length;n++){var i="CTAT--AL_highlight"+n;t.firstElementChild.classList.contains(i)&&t.firstElementChild.classList.remove(i)}t.firstElementChild.classList.toString();var r=this.highlighted_elements.indexOf(e);r>-1&&this.highlighted_elements.splice(r,1)}}},{key:"clearElement",value:function(e){this.iframe_content.document.getElementById(e).firstElementChild.value=""}},{key:"highlightSAI",value:function(e){if(e.mapping){var t=0;for(var n in e.mapping){var i=e.mapping[n],r=1;"?sel"!=n&&(r=2+(t-1)%(this.where_colors.length-1)),this.highlightElement(i,r),t++}}else alert("IDK WHAT THIS IS")}},{key:"unhighlightAll",value:function(){for(var e=0,t=(0,a.default)(this.highlighted_elements);e<t.length;e++){var n=t[e];this.unhighlightElement(n)}}},{key:"getDefaultSAI",value:function(){var e=this.graph.getExampleTracer().getBestNextLink().getDefaultSAI();return e={selection:e.getSelection(),action:e.getAction(),inputs:{value:e.getInput()}}}},{key:"clearProposedSAI",value:function(){this.proposed_SAI&&(this.clearElement(this.proposed_SAI.selection),this.unlockElement(this.proposed_SAI.selection.replace("?ele-","")),this.unhighlightAll(),this.proposed_SAI=null)}},{key:"proposeSAI",value:function(e){this.clearProposedSAI(),this.proposed_SAI=(0,o.default)({},e),this.highlightSAI(e),this.stageSAI(e)}},{key:"stageSAI",value:function(e){var t=this.iframe_content.CTATShellTools.findComponent(e.selection)[0],n=new this.iframe_content.CTATSAI(e.selection,e.action,e.inputs.value);t.executeSAI(n),this.lockElement(e.selection)}},{key:"confirmProposedSAI",value:function(){this.proposed_SAI&&(this.unhighlightAll(),this.proposed_SAI=null)}},{key:"applyHint",value:function(){this.commLibrary.sendXML("<message><properties><MessageType>InterfaceAction</MessageType><Selection><value>hint</value></Selection><Action><value>ButtonPressed</value></Action><Input><value><![CDATA[hint request]]></value></Input></properties></message>")}},{key:"get_state",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.encode_relative,n=void 0===t||t,i=e.strip_offsets,a=void 0===i||i,o=e.use_offsets,l=void 0===o||o,u=e.use_class,c=void 0===u||u,d=e.use_id,f=void 0===d||d,_=e.append_ele,p=void 0===_||_,h=this.relative_pos_cache,g=this.HTML_PATH,m=this.iframe_content.$("div").toArray(),y={};if(E.each(m,function(e,t){if(F={},t.classList.contains("CTATComponent")&&!t.classList.contains("CTATTable")&&"CTATTextField"!=t.classList[0]){if(c&&(F.type=t.classList[0]),l&&(F.offsetParent=t.offsetParent.dataset.silexId,F.offsetLeft=t.offsetLeft,F.offsetTop=t.offsetTop,F.offsetWidth=t.offsetWidth,F.offsetHeight=t.offsetHeight),f&&(F.id=t.id),T(t,["CTATTextInput","CTATComboBox","CTATTable--cell"])&&(F.value=t.firstElementChild.value,F.contentEditable="true"==t.firstElementChild.contentEditable),T(t,["CTATComboBox"])){for(var n=t.firstElementChild.options,i=[],r=0;r<n.length;r++)i.push(n[r].text);F.options=(0,s.default)({},i)}var a=(p?"?ele-":"")+t.id;y[a]=F,0}}),n){var v,b=Object.entries(y);if(g in h)v=h[g];else{v={};for(var w=0;w<b.length;w++)v[b[w][0]]={to_left:[],to_right:[],above:[],below:[]};for(w=0;w<b.length;w++)for(var S=0;S<b.length;S++)if(w!=S){var A=(0,r.default)(b[w],2),k=A[0],O=A[1],x=(0,r.default)(b[S],2),I=x[0],R=x[1];if(O.offsetTop>R.offsetTop&&O.offsetLeft<R.offsetLeft+R.offsetWidth&&O.offsetLeft+O.offsetWidth>R.offsetLeft){var M=O.offsetTop-R.offsetTop;v[k].above.push([I,M]),v[I].below.push([k,M])}if(O.offsetLeft<R.offsetLeft&&O.offsetTop+O.offsetHeight>R.offsetTop&&O.offsetTop<R.offsetTop+R.offsetHeight){M=R.offsetLeft-O.offsetLeft;v[k].to_right.push([I,M]),v[I].to_left.push([k,M])}}var C=function(e){return e[0]},D=function(e,t){return e[1]-t[1]};for(w=0;w<b.length;w++){(P=v[b[w][0]]).below=P.below.sort(D).map(C)[0]||"",P.above=P.above.sort(D).map(C)[0]||"",P.to_right=P.to_right.sort(D).map(C)[0]||"",P.to_left=P.to_left.sort(D).map(C)[0]||""}h[g]=v}for(w=0;w<b.length;w++){var F=y[b[w][0]],P=v[b[w][0]];F.below=P.below,F.above=P.above,F.to_right=P.to_right,F.to_left=P.to_left,a&&(delete F.offsetTop,delete F.offsetLeft,delete F.offsetWidth,delete F.offsetHeight),y[b[w][0]]=F}}return console.log("STATE JSON",y),y}},{key:"render",value:function(){return p.default.createElement(h.default,{ref:this.ctat_webview,originWhitelist:["*"],source:this.state.source,onLoad:this.state.onLoad})}}]),t}(p.default.Component),b='<!DOCTYPE html> <html><head><meta name="viewport" content="width=device-width, initial-scale=1"><style>.loader {  border: 16px solid #f3f3f3;  border-radius: 50%;  border-top: 16px solid #3498db;  width: 120px;  height: 120px;  -webkit-animation: spin 2s linear infinite; /* Safari */  animation: spin 2s linear infinite;  position: absolute;  left: 50%;  top: 50%;  transform: translate(-50%, -50%);*/}/* Safari */@-webkit-keyframes spin {  0% { -webkit-transform: rotate(0deg); }  100% { -webkit-transform: rotate(360deg); }}@keyframes spin {  0% { transform: rotate(0deg); }  100% { transform: rotate(360deg); }}</style></head><body><h2>How To Create A Loader</h2><div class="loader"></div></body></html>',w=v;t.default=w},180:function(e,t,n){var i=n(52),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(41)),o=r(n(47)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),d=r(n(16)),f=r(n(54)),_=i(n(192)),p=r(n(1)),h=n(36),g=r(n(70)),m=r(n(182)),y=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this,e))).state={pen_down:!1,strokes:{},n_strokes:0},(0,g.default)((0,f.default)((0,f.default)(n))),n.BezierFit=new m.default,n.BezierFit.promise.then(function(){n.fitCurve=n.BezierFit.fitCurve,n.groupStrokes=n.BezierFit.groupStrokes,n.fitCurve([[1,2],[3,4],[5,6],[7,8]])}),window.setMode=function(e){n.setState({mode:e})},n.where_colors=["darkorchid","#ff884d","#52d0e0","#feb201","#e44161","#ed3eea","#2f85ee","#562ac6","#cc24cc"],n.mode_to_color={set_start_state:"START_STATE",demonstrate:"EXAMPLE",debug:"gray"},n.current_foci=[],n.start_state_history=[],n.highlighted_elements=[],n}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){console.log("PROPSMODE",this.props.mode),this.setState({mode:this.props.mode||null})}},{key:"enterSetStartStateMode",value:function(){"debug"!=this.state.mode&&this.setState({mode:"set_start_state"}),console.log("MODE!",this.state.mode)}},{key:"exitSetStartStateMode",value:function(){for(var e=this.state.n_strokes+this.state.pen_down,t={},n=0;n<e;n++){var i=this.state.strokes[n];"START_STATE"==i.evaluation&&(i.evaluation="TUTOR"),t[n]=i}this.setState({strokes:t,mode:null})}},{key:"enterFeedbackMode",value:function(){this.setState({mode:"feedback"})}},{key:"exitFeedbackMode",value:function(){this.setState({mode:null})}},{key:"getCurrentFoci",value:function(){return this.current_foci?this.current_foci.map(function(e){return e.id}):[]}},{key:"enterFociMode",value:function(){this.unhighlightAll(),this.current_foci=[],this.setState({mode:"foci"})}},{key:"exitFociMode",value:function(){this.unhighlightAll(),this.current_foci=[],this.setState({mode:null})}},{key:"loadProblem",value:function(e){}},{key:"lockElement",value:function(e){this.state.strokes[e].locked=!0,this.setState({strokes:this.state.strokes})}},{key:"unlockElement",value:function(e){this.state.strokes[e].locked=!1,this.setState({strokes:this.state.strokes})}},{key:"colorElement",value:function(e,t){alert("NOT IMPLEMENTED")}},{key:"highlightElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.state.strokes[e].highlight=t,-1==this.highlighted_elements.indexOf(e)&&this.highlighted_elements.push(e)}},{key:"unhighlightElement",value:function(e){this.state.strokes[e].highlight=null;var t=this.highlighted_elements.indexOf(e);t>-1&&this.highlighted_elements.splice(t,1)}},{key:"clearElement",value:function(e){}},{key:"highlightSAI",value:function(e){if(e.mapping){var t=0;for(var n in e.mapping){var i=e.mapping[n],r=0;"?sel"!=n&&(r=1+(t-1)%(this.where_colors.length-1)),this.highlightElement(i,r),t++}}else alert("IDK WHAT THIS IS")}},{key:"unhighlightAll",value:function(){for(var e=0,t=(0,o.default)(this.highlighted_elements);e<t.length;e++){var n=t[e];this.unhighlightElement(n)}}},{key:"getState",value:function(){}},{key:"clearProposedSAI",value:function(){this.proposed_SAI&&(this.clearElement(this.proposed_SAI.selection),this.unlockElement(this.proposed_SAI.selection.replace("?ele-","")),this.unhighlightAll(),this.proposed_SAI=null)}},{key:"proposeSAI",value:function(e){this.clearProposedSAI(),this.proposed_SAI=(0,a.default)({},e),this.highlightSAI(e),this.stageSAI(e)}},{key:"stageSAI",value:function(e){}},{key:"confirmProposedSAI",value:function(){this.proposed_SAI&&(this.unhighlightAll(),this.proposed_SAI=null)}},{key:"penDown",value:function(e){if("foci"!=this.state.mode){if(console.log("HERE",typeof e.target.className,"svg_canvas"==e.target.className.baseVal||!1),console.log("DOWN"),"svg_canvas"==e.target.className.baseVal||"svg_canvas"==e.target.parentNode.className.baseVal){var t=this.state.strokes,n=Object.keys(t).length;t[n]={id:n},t[n].points_str=e.clientX.toString()+","+e.clientY.toString(),t[n].points=[[e.clientX,e.clientY]],t[n].bounds={minY:e.clientY,maxY:e.clientY,minX:e.clientX,maxX:e.clientX},console.log("MODE",this.state.mode),"set_start_state"==this.state.mode?t[n].evaluation="START_STATE":t[n].evaluation="ATTEMPT",this.setState({pen_down:!0,strokes:t})}}else this.mouseDown(e)}},{key:"penUp",value:function(e){var t=this;if("foci"!=this.state.mode){console.log("UP"),this.state.pen_down&&this.setState({pen_down:!1,n_strokes:this.state.n_strokes+1});var n=this.groupStrokes(this.state.strokes);this.elements=[];for(var i=function(e,t){return Math.min.apply(Math,(0,o.default)(Object.values(t).map(function(t){return t.bounds[e]})))},r=function(e,t){return Math.max.apply(Math,(0,o.default)(Object.values(t).map(function(t){return t.bounds[e]})))},a=0;a<n.length;a++){var s={};s.strokes=n[a].map(function(e){return t.state.strokes[e]}),console.log("CLOOOO",s.strokes,Object.values(s.strokes)),console.log("CLOOOO",Object.values(s.strokes).map(function(e){return e.bounds.minX})),s.bounds={minX:i("minX",s.strokes),maxX:r("maxX",s.strokes),minY:i("minY",s.strokes),maxY:r("maxY",s.strokes)},this.elements.push(s)}console.log(this.groupStrokes(this.state.strokes))}else this.mouseUp(e)}},{key:"penMove",value:function(e){if("foci"!=this.state.mode){if(this.state.pen_down){var t=this.state.strokes,n=t[this.state.n_strokes],i=[e.clientX,e.clientY],r=n.points[n.points.length-1];e.clientX<n.bounds.minX&&(n.bounds.minX=e.clientX),e.clientX>n.bounds.maxX&&(n.bounds.maxX=e.clientX),e.clientY<n.bounds.minY&&(n.bounds.minY=e.clientY),e.clientY>n.bounds.maxY&&(n.bounds.maxY=e.clientY),Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2)>=16&&n.points.length<512&&(n.points.push(i),n.points_str+=" "+e.clientX.toString()+","+e.clientY.toString(),n.bezier_splines=this.fitCurve(n.points),this.setState({strokes:t}))}}else this.mouseMove(e)}},{key:"mouseMove",value:function(e){var t=this.getElementUnderPoint(e.clientX,e.clientY),n=t?t.id:null;this.setState({elmUnderPointID:n})}},{key:"mouseDown",value:function(e){console.log("MOUSE DOWN");var t=this.getElementUnderPoint(e.clientX,e.clientY),n=t?t.id:null;this.setState({mouseDownElmID:n,elmUnderPointID:n})}},{key:"mouseUp",value:function(e){console.log("MOUSE UP");var t=this.getElementUnderPoint(e.clientX,e.clientY),n=t?t.id:null;if(t&&n==this.state.mouseDownElmID){var i=this.current_foci.indexOf(t);-1==i?(this.current_foci.push(t),this.highlightElement(t.id,0)):(this.current_foci.splice(i,1),this.unhighlightElement(t.id))}this.setState({mouseDownElmID:null,elmUnderPointID:n})}},{key:"getElementUnderPoint",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=[],r=0;r<this.state.n_strokes;r++){var a=this.state.strokes[r];a&&e>a.bounds.minX-n&&e<a.bounds.maxX+n&&t>a.bounds.minY-n&&t<a.bounds.maxY+n&&i.push(a)}if(0==i.length)return null;for(var o,s=Number.MAX_VALUE,l=0,u=i;l<u.length;l++)for(var c=u[l],d=0;d<c.points.length;d++){var f=c.points[d],_=Math.pow(e-f[0],2)+Math.pow(t-f[1],2);_<s&&(s=_,o=c)}return o}},{key:"undoStroke",value:function(e){var t=this.state.strokes;if(this.state.n_strokes>0){var n=t[this.state.n_strokes-1].evaluation;"INCORRECT"!=n&&"ATTEMPT"!=n&&"START_STATE"!=n||(delete t[this.state.n_strokes-1],this.setState({strokes:t,n_strokes:this.state.n_strokes-1}))}}},{key:"getEvaluatable",value:function(){for(var e=0,t=this.state.n_strokes+this.state.pen_down;e<t;e++){var n=this.state.strokes[e].evaluation;if("ATTEMPT"==n||"INCORRECT"==n)break}console.log("hee",e);for(var i={};e<t;e++)i[e]=this.state.strokes[e];return i}},{key:"evaluate",value:function(){var e={};if(this.props.evaluate)e=this.props.evaluate(this.getEvaluatable());else for(var t in e=this.getEvaluatable(),console.log("bleep",e),e)e[t].evaluation="INCORRECT";console.log("bloop",e),this.setState({strokes:(0,a.default)({},this.state.strokes,e)})}},{key:"render",value:function(){for(var e,t,n=[],i=0;i<this.state.n_strokes+this.state.pen_down;i++){var r=this.state.strokes[i],a="debug"==this.state.mode?".5":r.id==this.state.elmUnderPointID?"4":"3";if(null!=r.highlight&&(n.push(p.default.createElement(_.Polyline,{points:r.points_str,fill:"none",stroke:this.where_colors[r.highlight],strokeWidth:3*a+1,strokeOpacity:.15})),n.push(p.default.createElement(_.Polyline,{points:r.points_str,fill:"none",stroke:this.where_colors[r.highlight],strokeWidth:2*a,strokeOpacity:.4}))),r.points.length>1?n.push(p.default.createElement(_.Polyline,{points:r.points_str,fill:"none",stroke:E[r.evaluation]||E.DEFAULT,strokeWidth:a})):n.push(p.default.createElement(_.Circle,{cx:r.points[0][0],cy:r.points[0][1],r:a,fill:E[r.evaluation]||E.DEFAULT})),"debug"==this.state.mode){for(var o=r.bezier_splines||[],s=[],l=0;l<o.length;l++){var u="M"+(y=o[l])[0]+" "+y[1]+" C"+y[2]+" "+y[3]+" "+y[4]+" "+y[5]+" "+y[6]+" "+y[7]+" ";n.push(p.default.createElement(_.Path,{d:u,fill:"none",stroke:"blue",strokeWidth:"3"})),s.push(p.default.createElement(_.Circle,{cx:y[0]+"",cy:y[1]+"",r:"3",fill:"red"}))}for(var c=r.points||[],d=0;d<c.length;d++){var f=c[d];s.push(p.default.createElement(_.Circle,{cx:f[0]+"",cy:f[1]+"",r:"1",fill:"red"}))}n=n.concat(s);for(var g=this.elements||[],m=0;m<g.length;m++){var y=g[m].bounds;n.push(p.default.createElement(_.Rect,{x:y.minX,y:y.minY,width:y.maxX-y.minX,height:y.maxY-y.minY,stroke:"orange",strokeWidth:".5",fill:"none"}))}}}return e="set_start_state"==this.state.mode?this.setStartState:this.evaluate,t="foci"==this.state.mode?null==this.state.elmUnderPointID?"default":"pointer":T[this.state.mode]||"crosshair",p.default.createElement(h.TouchableWithoutFeedback,{onMouseDown:this.penDown,onMouseUp:this.penUp,onMouseLeave:this.penUp,onMouseMove:this.penMove,style:{height:"100%",width:"100%"}},p.default.createElement(h.View,{style:[h.StyleSheet.absoluteFill,{justifyContent:"center",height:"100%",width:"100%"}]},p.default.createElement(_.default,{className:"svg_canvas",style:{cursor:t},height:"100%",width:"100%"},p.default.createElement(_.Defs,null),n),"foci"!=this.state.mode&&p.default.createElement(h.View,null,p.default.createElement(h.TouchableHighlight,{style:[v.circle_buttons,v.undo_button],onPress:this.undoStroke},p.default.createElement(h.Text,{style:v.undo_button_text},"\u21b6")),p.default.createElement(h.TouchableHighlight,{style:[v.circle_buttons,v.check_button],onPress:e},p.default.createElement(h.Text,{style:v.check_button_text},"\u2713")))))}}]),t}(p.default.Component);t.default=y;var E={DEFAULT:"black",ATTEMPT:"slategray",TUTOR:"black",START_STATE:"teal",CORRECT:"limegreen",INCORRECT:"crimson"},T={debug:"crosshair",foci:"pointer",set_start_state:"crosshair",null:"progress"},v=h.StyleSheet.create({circle_buttons:{position:"absolute",backgroundColor:"gray",borderRadius:60,height:60,width:60,justifyContent:"center",alignItems:"center",zIndex:1,shadowColor:"#000",shadowOffset:{width:2,height:2},shadowOpacity:.8,shadowRadius:2},undo_button:{bottom:50,right:120},undo_button_text:{fontSize:40},check_button:{bottom:50,right:50},check_button_text:{fontSize:40}})},182:function(e,t,n){var i=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(12)),a=i(n(183)),o=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512;(0,r.default)(this,e),this.promise=(0,a.default)().then(function(e){console.log("Module",e);var i=e.HEAPF64,r=e.HEAP32;t.input_ptr=e._malloc(2*n*i.BYTES_PER_ELEMENT);var a=t.input_ptr;t.output_ptr=e._malloc(2*n*i.BYTES_PER_ELEMENT);var o=t.output_ptr;t.ml_ptr=e._malloc(9*n*i.BYTES_PER_ELEMENT);var s=t.ml_ptr,l=new Float64Array(i.buffer,a,2*n),u=new Float64Array(i.buffer,o,2*n);new Float64Array(i.buffer,s,9*n),t.c_module=e,t.fitCurve=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=(t=t.flat()).length/2;l.set(t.flat());var r=e._c_FitCurve(a,i,n*n,o);e._c_ML_EncodeCurves(o,r,s);for(var c=[],d=u.entries(),f=function(){return Math.round(d.next().value[1])},_=0;_<r;_++)c[_]=[f(),f(),f(),f(),f(),f(),f(),f()];return c},t.groupStrokes=function(t){t=Object.values(t);for(var n=e._malloc(t.length*r.BYTES_PER_ELEMENT),a=new Int32Array(r.buffer,n,t.length),o=[],s=[],l=0;l<t.length;l++){var u=t[l];o.push(u.points.length),s=s.concat(u.points)}a.set(o);var c=e._malloc(2*s.length*i.BYTES_PER_ELEMENT);new Float64Array(i.buffer,c,2*s.length).set(s.flat());var d=e._malloc(2*t.length*r.BYTES_PER_ELEMENT),f=new Int32Array(r.buffer,d,2*t.length),_=e._c_GroupStrokes(c,n,t.length,d,.1,.5,50),p=[],h=f.entries(),g=function(){return h.next().value[1]};for(l=0;l<_;l++){for(var m=g(),y=[],E=0;E<m;E++)y.push(t[g()].id);p.push(y)}return e._free(c),e._free(n),e._free(d),p}})};t.default=o},183:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){var e="/react_interface/src/tutors/Stylus/c_modules/bezier_fit/build/";return function(t){var n,i="undefined"!==typeof(t=t||{})?t:{},r={};for(n in i)i.hasOwnProperty(n)&&(r[n]=i[n]);var a=[],o="./this.program",s=!0,l=!1;if(i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var u,c="";if(!s&&!l)throw new Error("environment detection error");if(l?c=self.location.href:document.currentScript&&(c=document.currentScript.src),c=0!==(c=e).indexOf("blob:")?c.substr(0,c.lastIndexOf("/")+1):"","object"!==typeof window&&"function"!==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");l&&(u=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)});var d=i.print||console.log.bind(console),f=i.printErr||console.warn.bind(console);for(n in r)r.hasOwnProperty(n)&&(i[n]=r[n]);r=null,i.arguments&&(a=i.arguments),Object.getOwnPropertyDescriptor(i,"arguments")||Object.defineProperty(i,"arguments",{configurable:!0,get:function(){J("Module.arguments has been replaced with plain arguments_")}}),i.thisProgram&&(o=i.thisProgram),Object.getOwnPropertyDescriptor(i,"thisProgram")||Object.defineProperty(i,"thisProgram",{configurable:!0,get:function(){J("Module.thisProgram has been replaced with plain thisProgram")}}),i.quit&&i.quit,Object.getOwnPropertyDescriptor(i,"quit")||Object.defineProperty(i,"quit",{configurable:!0,get:function(){J("Module.quit has been replaced with plain quit_")}}),E("undefined"===typeof i.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),E("undefined"===typeof i.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),E("undefined"===typeof i.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),E("undefined"===typeof i.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),E("undefined"===typeof i.read,"Module.read option was removed (modify read_ in JS)"),E("undefined"===typeof i.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),E("undefined"===typeof i.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),E("undefined"===typeof i.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),Object.getOwnPropertyDescriptor(i,"read")||Object.defineProperty(i,"read",{configurable:!0,get:function(){J("Module.read has been replaced with plain read_")}}),Object.getOwnPropertyDescriptor(i,"readAsync")||Object.defineProperty(i,"readAsync",{configurable:!0,get:function(){J("Module.readAsync has been replaced with plain readAsync")}}),Object.getOwnPropertyDescriptor(i,"readBinary")||Object.defineProperty(i,"readBinary",{configurable:!0,get:function(){J("Module.readBinary has been replaced with plain readBinary")}});function _(e){_.shown||(_.shown={}),_.shown[e]||(_.shown[e]=1,f(e))}it=function(){J("cannot use the stack before compiled code is ready to run, and has provided stack access")};var p=function(e){e};var h,g;i.wasmBinary&&(h=i.wasmBinary),Object.getOwnPropertyDescriptor(i,"wasmBinary")||Object.defineProperty(i,"wasmBinary",{configurable:!0,get:function(){J("Module.wasmBinary has been replaced with plain wasmBinary")}}),i.noExitRuntime&&i.noExitRuntime,Object.getOwnPropertyDescriptor(i,"noExitRuntime")||Object.defineProperty(i,"noExitRuntime",{configurable:!0,get:function(){J("Module.noExitRuntime has been replaced with plain noExitRuntime")}}),"object"!==typeof WebAssembly&&J("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");var m=new WebAssembly.Table({initial:354,maximum:354,element:"anyfunc"}),y=!1;function E(e,t){e||J("Assertion failed: "+t)}var T="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function v(e,t,n){for(var i=t+n,r=t;e[r]&&!(r>=i);)++r;if(r-t>16&&e.subarray&&T)return T.decode(e.subarray(t,r));for(var a="";t<r;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|l:(240!=(248&o)&&_("Invalid UTF-8 leading byte 0x"+o.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),o=(7&o)<<18|s<<12|l<<6|63&e[t++]),o<65536)a+=String.fromCharCode(o);else{var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}function b(e,t){return e?v(I,e,t):""}function w(e,t,n,i){if(!(i>0))return 0;for(var r=n,a=n+i-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;s>=2097152&&_("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-r}function S(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++n)),i<=127?++t:t+=i<=2047?2:i<=65535?3:4}return t}"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function A(e,t){E(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),x.set(e,t)}function k(e,t,n){for(var i=0;i<e.length;++i)E(e.charCodeAt(i)===e.charCodeAt(i)&255),x[t++>>0]=e.charCodeAt(i);n||(x[t>>0]=0)}var O,x,I,R,M;var C=21616,D=21456;E(!0,"stack must start aligned"),E(!0,"heap must start aligned");i.TOTAL_STACK&&E(5242880===i.TOTAL_STACK,"the stack size can no longer be determined at runtime");var F,P=i.TOTAL_MEMORY||16777216;function N(){E(0==(3&C)),M[1+(C>>2)]=34821223,M[2+(C>>2)]=2310721022,R[0]=1668509029}function U(){var e=M[1+(C>>2)],t=M[2+(C>>2)];34821223==e&&2310721022==t||J("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+t.toString(16)+" "+e.toString(16)),1668509029!==R[0]&&J("Runtime error: The application has corrupted its heap memory area (address zero)!")}function L(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?i.dynCall_v(n):i.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}else t()}}Object.getOwnPropertyDescriptor(i,"TOTAL_MEMORY")||Object.defineProperty(i,"TOTAL_MEMORY",{configurable:!0,get:function(){J("Module.TOTAL_MEMORY has been replaced with plain INITIAL_TOTAL_MEMORY")}}),E(P>=5242880,"TOTAL_MEMORY should be larger than TOTAL_STACK, was "+P+"! (TOTAL_STACK=5242880)"),E("undefined"!==typeof Int32Array&&"undefined"!==typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),(g=i.wasmMemory?i.wasmMemory:new WebAssembly.Memory({initial:P/65536,maximum:P/65536}))&&(O=g.buffer),E((P=O.byteLength)%65536===0),O=F=O,i.HEAP8=x=new Int8Array(F),i.HEAP16=new Int16Array(F),i.HEAP32=R=new Int32Array(F),i.HEAPU8=I=new Uint8Array(F),i.HEAPU16=new Uint16Array(F),i.HEAPU32=M=new Uint32Array(F),i.HEAPF32=new Float32Array(F),i.HEAPF64=new Float64Array(F),R[D>>2]=5264496,function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var X=[],H=[],j=[],W=[],B=[],Y=!1,Q=!1;E(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");Math.abs,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc;var V=0,z=null,G=null,q={};function J(e){throw i.onAbort&&i.onAbort(e),d(e+=""),f(e),y=!0,1,e="abort("+e+") at "+function(){var e=function(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}();i.extraStackTrace&&(e+="\n"+i.extraStackTrace());return t=e,t.replace(/\b_Z[\w\d_]+/g,function(e){var t,n=(t=e,_("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),t);return e===n?e:n+" ["+e+"]"});var t}(),new WebAssembly.RuntimeError(e)}i.preloadedImages={},i.preloadedAudios={};var K={error:function(){J("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){K.error()},createDataFile:function(){K.error()},createPreloadedFile:function(){K.error()},createLazyFile:function(){K.error()},open:function(){K.error()},mkdev:function(){K.error()},registerDevice:function(){K.error()},analyzePath:function(){K.error()},loadFilesFromDB:function(){K.error()},ErrnoError:function(){K.error()}};i.FS_createDataFile=K.createDataFile,i.FS_createPreloadedFile=K.createPreloadedFile;var Z="data:application/octet-stream;base64,";function $(e){return String.prototype.startsWith?e.startsWith(Z):0===e.indexOf(Z)}var ee,te="bezier_fit.wasm";function ne(){try{if(h)return new Uint8Array(h);if(u)return u(te);throw"both async and sync fetching of the wasm failed"}catch(f){J(f)}}$(te)||(ee=te,te=i.locateFile?i.locateFile(ee,c):c+ee),H.push({func:function(){$e()}});var ie={};function re(e){return i.___errno_location?R[i.___errno_location()>>2]=e:f("failed to set errno from JS"),e}var ae={buffers:[null,[],[]],printChar:function(e,t){var n=ae.buffers[e];E(n),0===t||10===t?((1===e?d:f)(v(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return ae.varargs+=4,R[ae.varargs-4>>2]},getStr:function(){return b(ae.get())},get64:function(){var e=ae.get(),t=ae.get();return E(e>=0?0===t:-1===t),e},getZero:function(){E(0===ae.get())}};function oe(){J()}function se(e,t,n){I.set(I.subarray(t,t+n),e)}var le={};function ue(){if(!ue.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:o};for(var t in le)e[t]=le[t];var n=[];for(var t in e)n.push(t+"="+e[t]);ue.strings=n}return ue.strings}function ce(e){return e%4===0&&(e%100!==0||e%400===0)}function de(e,t){for(var n=0,i=0;i<=t;n+=e[i++]);return n}var fe=[31,29,31,30,31,30,31,31,30,31,30,31],_e=[31,28,31,30,31,30,31,31,30,31,30,31];function pe(e,t){for(var n=new Date(e.getTime());t>0;){var i=ce(n.getFullYear()),r=n.getMonth(),a=(i?fe:_e)[r];if(!(t>a-n.getDate()))return n.setDate(n.getDate()+t),n;t-=a-n.getDate()+1,n.setDate(1),r<11?n.setMonth(r+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function he(e,t,n,i){var r=R[i+40>>2],a={tm_sec:R[i>>2],tm_min:R[i+4>>2],tm_hour:R[i+8>>2],tm_mday:R[i+12>>2],tm_mon:R[i+16>>2],tm_year:R[i+20>>2],tm_wday:R[i+24>>2],tm_yday:R[i+28>>2],tm_isdst:R[i+32>>2],tm_gmtoff:R[i+36>>2],tm_zone:r?b(r):""},o=b(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in s)o=o.replace(new RegExp(l,"g"),s[l]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var i="number"===typeof e?e.toString():e||"";i.length<t;)i=n[0]+i;return i}function f(e,t){return d(e,t,"0")}function _(e,t){function n(e){return e<0?-1:e>0?1:0}var i;return 0===(i=n(e.getFullYear()-t.getFullYear()))&&0===(i=n(e.getMonth()-t.getMonth()))&&(i=n(e.getDate()-t.getDate())),i}function p(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function h(e){var t=pe(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),i=new Date(t.getFullYear()+1,0,4),r=p(n),a=p(i);return _(r,t)<=0?_(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return c[e.tm_mon].substring(0,3)},"%B":function(e){return c[e.tm_mon]},"%C":function(e){return f((e.tm_year+1900)/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return h(e).toString().substring(2)},"%G":function(e){return h(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+de(ce(e.tm_year+1900)?fe:_e,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:pe(t,7-t.getDay()),i=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(_(n,i)<0){var r=de(ce(i.getFullYear())?fe:_e,i.getMonth()-1)-31,a=31-n.getDate()+r+i.getDate();return f(Math.ceil(a/7),2)}return 0===_(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),i=new Date(e.tm_year+1901,0,4),r=p(n),a=p(i),o=pe(new Date(e.tm_year+1900,0,1),e.tm_yday);return _(o,r)<0?"53":_(a,o)<=0?"01":(t=r.getFullYear()<e.tm_year+1900?e.tm_yday+32-r.getDate():e.tm_yday+1-r.getDate(),f(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:pe(t,0===t.getDay()?1:7-t.getDay()+1),i=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(_(n,i)<0){var r=de(ce(i.getFullYear())?fe:_e,i.getMonth()-1)-31,a=31-n.getDate()+r+i.getDate();return f(Math.ceil(a/7),2)}return 0===_(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var l in g)o.indexOf(l)>=0&&(o=o.replace(new RegExp(l,"g"),g[l](a)));var m=function(e,t,n){var i=n>0?n:S(e)+1,r=new Array(i),a=w(e,r,0,r.length);t&&(r.length=a);return r}(o,!1);return m.length>t?0:(A(m,e),m.length-1)}oe=function(){return performance.now()};var ge={__cxa_allocate_exception:function(e){return et(e)},__cxa_atexit:function(){return function(e,t){_("atexit() called, but EXIT_RUNTIME is not set, so atexits() will not be called. set EXIT_RUNTIME to 1 (see the FAQ)"),W.unshift({func:e,arg:t})}.apply(null,arguments)},__cxa_throw:function(e,t,n){throw ie[e]={ptr:e,adjusted:[e],type:t,destructor:n,refcount:0,caught:!1,rethrown:!1},e,"uncaught_exception"in nt?nt.uncaught_exceptions++:nt.uncaught_exceptions=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."},__handle_stack_overflow:function(){J("stack overflow")},__lock:function(){},__map_file:function(e,t){return re(63),-1},__syscall91:function(e,t){ae.varargs=t;try{return function(e,t){if(-1===e||0===t)return-28;var n=ae.mappings[e];if(!n)return 0;if(t===n.len){var i=K.getStream(n.fd);ae.doMsync(e,i,t,n.flags),K.munmap(i),ae.mappings[e]=null,n.allocated&&tt(n.malloc)}return 0}(ae.get(),ae.get())}catch(n){return"undefined"!==typeof K&&n instanceof K.ErrnoError||J(n),-n.errno}},__unlock:function(){},abort:function(){J()},clock_gettime:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e)return re(28),-1;n=oe()}return R[t>>2]=n/1e3|0,R[t+4>>2]=n%1e3*1e3*1e3|0,0},emscripten_get_sbrk_ptr:function(){return 21456},emscripten_memcpy_big:se,emscripten_resize_heap:function(e){!function(e){J("Cannot enlarge memory arrays to size "+e+" bytes (OOM). Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+x.length+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}(e)},environ_get:function(e,t){var n=ue(),i=0;return n.forEach(function(n,r){var a=t+i;R[e+4*r>>2]=a,k(n,a),i+=n.length+1}),0},environ_sizes_get:function(e,t){var n=ue();R[e>>2]=n.length;var i=0;return n.forEach(function(e){i+=e.length+1}),R[t>>2]=i,0},fd_close:function(e){try{return J("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0}catch(t){return"undefined"!==typeof K&&t instanceof K.ErrnoError||J(t),t.errno}},fd_read:function(e,t,n,i){try{var r=ae.getStreamFromFD(e),a=ae.doReadv(r,t,n);return R[i>>2]=a,0}catch(o){return"undefined"!==typeof K&&o instanceof K.ErrnoError||J(o),o.errno}},fd_seek:function(e,t,n,i,r){try{return J("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0}catch(a){return"undefined"!==typeof K&&a instanceof K.ErrnoError||J(a),a.errno}},fd_write:function(e,t,n,i){try{for(var r=0,a=0;a<n;a++){for(var o=R[t+8*a>>2],s=R[t+(8*a+4)>>2],l=0;l<s;l++)ae.printChar(e,I[o+l]);r+=s}return R[i>>2]=r,0}catch(u){return"undefined"!==typeof K&&u instanceof K.ErrnoError||J(u),u.errno}},memory:g,setTempRet0:function(e){p(0|e)},strftime_l:function(e,t,n,i){return he(e,t,n,i)},table:m},me=function(){var e,t={env:ge,wasi_snapshot_preview1:ge};function n(e,t){var n=e.exports;i.asm=n,function(e){if(V--,i.monitorRunDependencies&&i.monitorRunDependencies(V),e?(E(q[e]),delete q[e]):f("warning: run dependency removed without ID"),0==V&&(null!==z&&(clearInterval(z),z=null),G)){var t=G;G=null,t()}}("wasm-instantiate")}e="wasm-instantiate",V++,i.monitorRunDependencies&&i.monitorRunDependencies(V),e?(E(!q[e]),q[e]=1,null===z&&"undefined"!==typeof setInterval&&(z=setInterval(function(){if(y)return clearInterval(z),void(z=null);var e=!1;for(var t in q)e||(e=!0,f("still waiting on run dependencies:")),f("dependency: "+t);e&&f("(end of list)")},1e4))):f("warning: run dependency added without ID");var r=i;function a(e){E(i===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,n(e.instance)}function o(e){return(h||!s&&!l||"function"!==typeof fetch?new Promise(function(e,t){e(ne())}):fetch(te,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+te+"'";return e.arrayBuffer()}).catch(function(){return ne()})).then(function(e){return WebAssembly.instantiate(e,t)}).then(e,function(e){f("failed to asynchronously prepare wasm: "+e),J(e)})}if(i.instantiateWasm)try{return i.instantiateWasm(t,n)}catch(u){return f("Module.instantiateWasm callback failed with error: "+u),!1}return function(){if(h||"function"!==typeof WebAssembly.instantiateStreaming||$(te)||"function"!==typeof fetch)return o(a);fetch(te,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(a,function(e){f("wasm streaming compile failed: "+e),f("falling back to ArrayBuffer instantiation"),o(a)})})}(),{}}(),ye=me.__wasm_call_ctors;me.__wasm_call_ctors=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ye.apply(null,arguments)};var Ee=me.malloc;me.malloc=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ee.apply(null,arguments)};var Te=me.free;me.free=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Te.apply(null,arguments)};var ve=me.c_GroupStrokes;me.c_GroupStrokes=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ve.apply(null,arguments)};var be=me.c_FitCurve;me.c_FitCurve=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),be.apply(null,arguments)};var we=me.c_ML_EncodeCurves;me.c_ML_EncodeCurves=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),we.apply(null,arguments)};var Se=me.setThrew;me.setThrew=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Se.apply(null,arguments)};var Ae=me._ZSt18uncaught_exceptionv;me._ZSt18uncaught_exceptionv=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ae.apply(null,arguments)};var ke=me.__set_stack_limit;me.__set_stack_limit=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ke.apply(null,arguments)};var Oe=me.stackSave;me.stackSave=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Oe.apply(null,arguments)};var xe=me.stackAlloc;me.stackAlloc=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),xe.apply(null,arguments)};var Ie=me.stackRestore;me.stackRestore=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ie.apply(null,arguments)};var Re=me.__growWasmMemory;me.__growWasmMemory=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Re.apply(null,arguments)};var Me=me.dynCall_iii;me.dynCall_iii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Me.apply(null,arguments)};var Ce=me.dynCall_ii;me.dynCall_ii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ce.apply(null,arguments)};var De=me.dynCall_iiii;me.dynCall_iiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),De.apply(null,arguments)};var Fe=me.dynCall_jiji;me.dynCall_jiji=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Fe.apply(null,arguments)};var Pe=me.dynCall_iidiiii;me.dynCall_iidiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Pe.apply(null,arguments)};var Ne=me.dynCall_vii;me.dynCall_vii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ne.apply(null,arguments)};var Ue=me.dynCall_vi;me.dynCall_vi=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ue.apply(null,arguments)};var Le=me.dynCall_viijii;me.dynCall_viijii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Le.apply(null,arguments)};var Xe=me.dynCall_viiii;me.dynCall_viiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Xe.apply(null,arguments)};var He=me.dynCall_iiiii;me.dynCall_iiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),He.apply(null,arguments)};var je=me.dynCall_iiiiii;me.dynCall_iiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),je.apply(null,arguments)};var We=me.dynCall_iiiiiiiii;me.dynCall_iiiiiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),We.apply(null,arguments)};var Be=me.dynCall_iiiiiii;me.dynCall_iiiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Be.apply(null,arguments)};var Ye=me.dynCall_iiiiij;me.dynCall_iiiiij=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ye.apply(null,arguments)};var Qe=me.dynCall_iiiiid;me.dynCall_iiiiid=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Qe.apply(null,arguments)};var Ve=me.dynCall_iiiiijj;me.dynCall_iiiiijj=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ve.apply(null,arguments)};var ze=me.dynCall_iiiiiiii;me.dynCall_iiiiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ze.apply(null,arguments)};var Ge=me.dynCall_iiiiiijj;me.dynCall_iiiiiijj=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ge.apply(null,arguments)};var qe=me.dynCall_viiiiii;me.dynCall_viiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),qe.apply(null,arguments)};var Je=me.dynCall_v;me.dynCall_v=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Je.apply(null,arguments)};var Ke=me.dynCall_viiiii;me.dynCall_viiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ke.apply(null,arguments)},i.asm=me;var Ze,$e=i.___wasm_call_ctors=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.__wasm_call_ctors.apply(null,arguments)},et=i._malloc=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.malloc.apply(null,arguments)},tt=i._free=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.free.apply(null,arguments)},nt=(i._c_GroupStrokes=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.c_GroupStrokes.apply(null,arguments)},i._c_FitCurve=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.c_FitCurve.apply(null,arguments)},i._c_ML_EncodeCurves=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.c_ML_EncodeCurves.apply(null,arguments)},i._setThrew=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.setThrew.apply(null,arguments)},i.__ZSt18uncaught_exceptionv=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm._ZSt18uncaught_exceptionv.apply(null,arguments)}),it=(i.___set_stack_limit=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.__set_stack_limit.apply(null,arguments)},i.stackSave=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.stackSave.apply(null,arguments)});i.stackAlloc=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.stackAlloc.apply(null,arguments)},i.stackRestore=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.stackRestore.apply(null,arguments)},i.__growWasmMemory=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.__growWasmMemory.apply(null,arguments)},i.dynCall_iii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iii.apply(null,arguments)},i.dynCall_ii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_ii.apply(null,arguments)},i.dynCall_iiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiii.apply(null,arguments)},i.dynCall_jiji=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_jiji.apply(null,arguments)},i.dynCall_iidiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iidiiii.apply(null,arguments)},i.dynCall_vii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_vii.apply(null,arguments)},i.dynCall_vi=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_vi.apply(null,arguments)},i.dynCall_viijii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_viijii.apply(null,arguments)},i.dynCall_viiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_viiii.apply(null,arguments)},i.dynCall_iiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiii.apply(null,arguments)},i.dynCall_iiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiii.apply(null,arguments)},i.dynCall_iiiiiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiiiiii.apply(null,arguments)},i.dynCall_iiiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiiii.apply(null,arguments)},i.dynCall_iiiiij=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiij.apply(null,arguments)},i.dynCall_iiiiid=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiid.apply(null,arguments)},i.dynCall_iiiiijj=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiijj.apply(null,arguments)},i.dynCall_iiiiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiiiii.apply(null,arguments)},i.dynCall_iiiiiijj=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_iiiiiijj.apply(null,arguments)},i.dynCall_viiiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_viiiiii.apply(null,arguments)},i.dynCall_v=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_v.apply(null,arguments)},i.dynCall_viiiii=function(){return E(Y,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),E(!Q,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i.asm.dynCall_viiiii.apply(null,arguments)};i.asm=me,Object.getOwnPropertyDescriptor(i,"intArrayFromString")||(i.intArrayFromString=function(){J("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"intArrayToString")||(i.intArrayToString=function(){J("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"ccall")||(i.ccall=function(){J("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"cwrap")||(i.cwrap=function(){J("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setValue")||(i.setValue=function(){J("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getValue")||(i.getValue=function(){J("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"allocate")||(i.allocate=function(){J("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getMemory")||(i.getMemory=function(){J("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"AsciiToString")||(i.AsciiToString=function(){J("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToAscii")||(i.stringToAscii=function(){J("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF8ArrayToString")||(i.UTF8ArrayToString=function(){J("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF8ToString")||(i.UTF8ToString=function(){J("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF8Array")||(i.stringToUTF8Array=function(){J("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF8")||(i.stringToUTF8=function(){J("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"lengthBytesUTF8")||(i.lengthBytesUTF8=function(){J("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF16ToString")||(i.UTF16ToString=function(){J("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF16")||(i.stringToUTF16=function(){J("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"lengthBytesUTF16")||(i.lengthBytesUTF16=function(){J("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"UTF32ToString")||(i.UTF32ToString=function(){J("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stringToUTF32")||(i.stringToUTF32=function(){J("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"lengthBytesUTF32")||(i.lengthBytesUTF32=function(){J("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"allocateUTF8")||(i.allocateUTF8=function(){J("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackTrace")||(i.stackTrace=function(){J("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnPreRun")||(i.addOnPreRun=function(){J("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnInit")||(i.addOnInit=function(){J("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnPreMain")||(i.addOnPreMain=function(){J("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnExit")||(i.addOnExit=function(){J("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addOnPostRun")||(i.addOnPostRun=function(){J("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeStringToMemory")||(i.writeStringToMemory=function(){J("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeArrayToMemory")||(i.writeArrayToMemory=function(){J("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"writeAsciiToMemory")||(i.writeAsciiToMemory=function(){J("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addRunDependency")||(i.addRunDependency=function(){J("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"removeRunDependency")||(i.removeRunDependency=function(){J("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"ENV")||(i.ENV=function(){J("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"FS")||(i.FS=function(){J("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"FS_createFolder")||(i.FS_createFolder=function(){J("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"FS_createPath")||(i.FS_createPath=function(){J("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"FS_createDataFile")||(i.FS_createDataFile=function(){J("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"FS_createPreloadedFile")||(i.FS_createPreloadedFile=function(){J("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"FS_createLazyFile")||(i.FS_createLazyFile=function(){J("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"FS_createLink")||(i.FS_createLink=function(){J("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"FS_createDevice")||(i.FS_createDevice=function(){J("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"FS_unlink")||(i.FS_unlink=function(){J("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(i,"GL")||(i.GL=function(){J("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"dynamicAlloc")||(i.dynamicAlloc=function(){J("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"loadDynamicLibrary")||(i.loadDynamicLibrary=function(){J("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"loadWebAssemblyModule")||(i.loadWebAssemblyModule=function(){J("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getLEB")||(i.getLEB=function(){J("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getFunctionTables")||(i.getFunctionTables=function(){J("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"alignFunctionTables")||(i.alignFunctionTables=function(){J("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"registerFunctions")||(i.registerFunctions=function(){J("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"addFunction")||(i.addFunction=function(){J("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"removeFunction")||(i.removeFunction=function(){J("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getFuncWrapper")||(i.getFuncWrapper=function(){J("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"prettyPrint")||(i.prettyPrint=function(){J("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"makeBigInt")||(i.makeBigInt=function(){J("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"dynCall")||(i.dynCall=function(){J("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getCompilerSetting")||(i.getCompilerSetting=function(){J("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"print")||(i.print=function(){J("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"printErr")||(i.printErr=function(){J("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"getTempRet0")||(i.getTempRet0=function(){J("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"setTempRet0")||(i.setTempRet0=function(){J("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"callMain")||(i.callMain=function(){J("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"abort")||(i.abort=function(){J("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"Pointer_stringify")||(i.Pointer_stringify=function(){J("'Pointer_stringify' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"warnOnce")||(i.warnOnce=function(){J("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackSave")||(i.stackSave=function(){J("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackRestore")||(i.stackRestore=function(){J("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"stackAlloc")||(i.stackAlloc=function(){J("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(i,"establishStackSpace")||(i.establishStackSpace=function(){J("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),i.writeStackCookie=N,i.checkStackCookie=U,i.abortStackOverflow=function(e){J("Stack overflow! Attempted to allocate "+e+" bytes on the stack, but stack has only "+(C-it()+e)+" bytes available!")},Object.getOwnPropertyDescriptor(i,"ALLOC_NORMAL")||Object.defineProperty(i,"ALLOC_NORMAL",{configurable:!0,get:function(){J("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(i,"ALLOC_STACK")||Object.defineProperty(i,"ALLOC_STACK",{configurable:!0,get:function(){J("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(i,"ALLOC_DYNAMIC")||Object.defineProperty(i,"ALLOC_DYNAMIC",{configurable:!0,get:function(){J("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(i,"ALLOC_NONE")||Object.defineProperty(i,"ALLOC_NONE",{configurable:!0,get:function(){J("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(i,"calledRun")||Object.defineProperty(i,"calledRun",{configurable:!0,get:function(){J("'calledRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}}),i.then=function(e){if(Ze)e(i);else{var t=i.onRuntimeInitialized;i.onRuntimeInitialized=function(){t&&t(),e(i)}}return i};function rt(e){function t(){Ze||(Ze=!0,y||(U(),E(!Y),Y=!0,L(H),U(),L(j),i.onRuntimeInitialized&&i.onRuntimeInitialized(),E(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),B.unshift(e);var e;L(B)}()))}e=e||a,V>0||(N(),function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),X.unshift(e);var e;L(X)}(),V>0||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t(),U()))}if(G=function e(){Ze||rt(),Ze||(G=e)},i.run=rt,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return!0,rt(),t}}();t.default=i},184:function(e,t,n){var i=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(46)),a=i(n(12)),o=i(n(13)),s=i(n(14)),l=i(n(15)),u=i(n(16)),c=i(n(54)),d=i(n(89)),f=i(n(101)),_=n(104),p=n(185),h=i(n(187)),g=n(71),m=i(n(70)),y=i(n(1)),E=n(36),T=function(e){function t(e){var n;if((0,a.default)(this,t),n=(0,s.default)(this,(0,l.default)(t).call(this,e)),(0,m.default)((0,c.default)((0,c.default)(n))),n.onInteractionTransition=n.onInteractionTransition.bind((0,c.default)((0,c.default)(n))),n.network_layer=new h.default(e.AL_URL,e.HOST_URL),null==e.working_dir&&null!=e.training_file){var i=e.training_file.match(/(.*)[\/\\]/);e.working_dir=i?i[1]:""}return n.tutor=y.default.createRef(),n.skill_panel=y.default.createRef(),n.buttons=y.default.createRef(),n.state={default_props:{},buttons_props:{},tutor_props:n.props.tutor_props||{},skill_panel_props:{},training_description:"????",agent_description:"????",problem_description:"????",interactive:n.props.interactive,free_author:n.props.free_author,tutor_mode:n.props.tutor_mode},n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onInteractionTransition",value:function(e){console.log("#",e.value,":",e.context,e);var t={interactions_state:e,interactions_service:this.interactions_service};this.setState({default_props:t})}},{key:"onTrainingTransition",value:function(e){var t=e.context;console.log("&","HEY THIS IS THIS THING"),t.interactive||this.setState({training_description:t.training_description||"???",agent_description:t.agent_description||"???",problem_description:t.problem_description||"???"})}},{key:"changeInteractionMode",value:function(e){this.setState(e),this.training_service.send({type:"CHANGE_INTERACTION_MODE",data:e})}},{key:"componentDidMount",value:function(){var e,t,n=this;console.log("MOUNTED");var i=[this.tutor.current,this.network_layer,this.props.working_dir,this.props.training_file];e=i[2],t=i[3],this.interactions_sm=(0,_.build_interactions_sm)(this,this.props.interactive,this.props.free_author,this.props.tutor_mode),this.interactions_service=null,this.training_machine=(0,p.build_training_sm)(this,this.interactions_sm,t,e),this.training_service=(0,g.interpret)(this.training_machine),this.training_service.onTransition(this.onTrainingTransition),this.training_service.start();this.training_service.subscribe(function(e){console.log("SUBSCRIBE:",e)});console.log("T MACHINE!",this.training_service),window.setTutorMode=function(e){n.changeInteractionMode({tutor_mode:e})},window.setInteractive=function(e){n.changeInteractionMode({interactive:e})},window.setFreeAuthor=function(e){n.changeInteractionMode({free_author:e})},window.generateBehaviorProfile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=n.network_layer.generateBehaviorProfile,r=n.training_service._state.context;if(null!=e){return"/"!=e[0]&&(e=(r.working_dir||"/")+e),fetch(e).then(function(e){return e.text()}).then(function(e){return e.split("\n")}).then(function(e){return function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(""!=s){var l=JSON.parse(s);t.push(l)}}}catch(u){i=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}(e)}).then(function(e){return i(r,{data:{requests:e,out_dir:t}})})}return i(r)}}},{key:"render",value:function(){var e,t,n=this.props.tutorClass;this.state.interactive?e=y.default.createElement(E.View,{style:v.controls},!this.state.tutor_mode&&y.default.createElement(E.View,{style:v.skill_panel},y.default.createElement(d.default,(0,r.default)({ref:this.skill_panel},this.state.default_props,this.state.skill_panel_props))),y.default.createElement(E.View,{style:v.buttons},y.default.createElement(f.default,(0,r.default)({ref:this.buttons},this.state.default_props,this.state.buttons_props)))):(t=this.state.training_description+"\n"+this.state.agent_description+"\n"+this.state.problem_description+"\n",e=y.default.createElement(E.View,{style:v.prompt},y.default.createElement(E.Text,null,t)));return y.default.createElement(E.View,{style:v.container},y.default.createElement(E.View,{style:v.ctat_tutor},y.default.createElement(n,(0,r.default)({ref:this.tutor,id:"tutor_iframe",interactive:!1},this.state.default_props,this.state.tutor_props))),e)}}]),t}(y.default.Component);t.default=T;var v=E.StyleSheet.create({container:{flex:1,flexDirection:"column"},ctat_tutor:{margin:4,flexBasis:"65%",flex:1},prompt:{flex:1,textAlign:"center"},controls:{flex:1,flexBasis:"35%",flexDirection:"row"},skill_panel:{flex:1,flexBasis:"60%"},buttons:{flexGrow:1,flexDirection:"column",flexBasis:"40%",justifySelf:"space-around"}})},185:function(e,t,n){var i=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.build_training_sm=function(e,t){var n=e.network_layer,i={app:e,tutor:e.tutor.current,skill_panel:e.skill_panel.current,buttons:e.buttons.current,network_layer:e.network_layer,interactive:e.props.interactive,training_file:e.props.training_file,working_dir:e.props.working_dir,interactions_sm:t,file_params:null,agent_params:null,prob_obj:null,free_author:null};return(0,o.Machine)({context:i,initial:"Loading_Training_File",states:{Loading_Training_File:{invoke:{id:"load_training_file",src:"load_training_file",onDone:{target:"Serving_Training_Sets",actions:"updateContext"},onError:{target:"Fail",actions:"logError"}}},Serving_Training_Sets:{invoke:{id:"serve_next_training_set",src:"serve_next_training_set",onDone:[{target:"All_Done",cond:"iteratorEmpty"},{target:"Serving_Agents",actions:"updateContext"}],onError:{target:"Fail",actions:"logError"}}},Serving_Agents:{invoke:{id:"serve_next_agent",src:"serve_next_agent",onDone:[{target:"Serving_Training_Sets",cond:"iteratorEmpty"},{target:"Creating_Agent",actions:"updateContext"}],onError:{target:"Fail",actions:"logError"}}},Creating_Agent:{invoke:{id:"create_agent",src:"create_agent",onDone:{target:"Handling_Prior_Knowledge",actions:"assignAgentId"},onError:{target:"Fail",actions:"logError"}}},Handling_Prior_Knowledge:{invoke:{id:"handle_prior_knowledge",src:"handle_prior_knowledge",onDone:{target:"Serving_Problems",actions:"updateContext"},onError:{target:"Fail",actions:"logError"}}},Serving_Problems:{invoke:{id:"serve_next_problem",src:"serve_next_problem",onDone:[{target:"Serving_Agents",cond:"iteratorEmpty"},{target:"Waiting_Problem_Load",actions:"updateContext"}],onError:{target:"Fail",actions:"logError"}}},Waiting_Problem_Load:{invoke:{id:"load_problem",src:"load_problem",onDone:{target:"Training",actions:"updateContext"},onError:{target:"Fail",actions:"logError"}}},Training:{entry:"start_training_interaction",on:{PROBLEM_DONE:"Serving_Problems",CHANGE_INTERACTION_MODE:{target:"Serving_Problems",actions:"assignInteractionSM"}}},All_Done:{entry:"allDone",type:"final"},Fail:{entry:["logError","kill_this"]}}},{services:{load_training_file:c,serve_next_training_set:d,serve_next_agent:f,create_agent:n.createAgent,serve_next_problem:h,load_problem:g,handle_prior_knowledge:_},actions:{start_training_interaction:y,logError:function(e,t){console.error(t.data)},updateContext:(0,o.assign)(function(e,t){return t.data.updateContext}),assignAgentId:(0,o.assign)(function(e,t){return{agent_id:t.data.agent_id}}),allDone:E,assignInteractionSM:T},guards:{iteratorEmpty:m}})};var r=i(n(68)),a=i(n(41)),o=n(71),s=i(n(105)),l=n(104),u=(n(186),{s4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},guid:function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()}});function c(e,t){return console.log("TRAINING JSON:",e.training_file),fetch(e.training_file).then(function(e){return e.text()}).then(function(e){return s.default.parse(e)}).then(function(e){return Object.entries(e)}).then(function(e){return{updateContext:{training_iterator:e}}})}function d(e,t){return new Promise(function(t,n){var i=e.training_iterator,r=e.file_params||{};if(console.log("TRAINING ITERATOR",i.length),i.length>0){for(var o=i.shift(),s=o[0];"set_params"==s;)r=(0,a.default)({},r,o[1]),s=(o=i.shift())[0];console.log("START TRAINING SET: ",s,r),t({updateContext:{training_iterator:i,agent_iterator:o[1],file_params:r,training_description:e.training_file.replace(/^.*[\\\/]/,"")+" : "+s}})}else t(null)})}function f(e,t){return new Promise(function(t,n){var i=e.agent_iterator;if(console.log("AGENT ITERATOR",i.length),e.agent_iterator.length>0){var r=(0,a.default)({},e.file_params.agent||{},i.shift());e.file_params.agent&&e.file_params.agent.args&&(r.args=(0,a.default)({},e.file_params.agent.args,r.args));var o=r.set_params||{},s="Agent Name: "+r.agent_name+"\nAgent Type: "+r.agent_type,l=r.problem_set,c=r.prior_knowledge||[],d=(0,a.default)({},r);delete d.problem_set,delete d.agent_name,delete d.agent_type,t({updateContext:{start_state_history:[],request_history:[],session_id:u.guid(),user_guid:"Stu_"+u.guid(),agent_params:o,agent_name:r.agent_name,agent_type:r.agent_type,agent_description:s,other_agent_data:d,agent_iterator:i,problem_set:l,prior_knowledge:c,agent_start_time:new Date}})}else t(null)})}function _(e,t){return new Promise(function(t,n){for(var i=e.prior_knowledge;i.length>0;){console.log("CURRENT",i);i.shift().type.toLowerCase().replace("_","")}t({updateContext:{prior_knowledge:i,problem_iterator:e.problem_set}})})}function p(e,t,n){var i=e.shift();if(!i)return null;for(;"set_params"in i;)if(t=(0,a.default)({},t,i.set_params),!(i=e.shift()))return null;var r=(0,a.default)({},n);return delete r.agent,i=(0,a.default)({},r,t,i),console.log(i,t),[i,t]}function h(e,t){return new Promise(function(t,n){var i=null,o=e.agent_params,s=e.file_params,l=e.problem_iterator;e.network_layer,e.interactive;if(console.log("PROBLEM ITERATOR",l.length),l.length>0){var u=p(l,o,s),c=(0,r.default)(u,2);if(i=c[0],o=c[1],console.log(i,o),i){if("repetitions"in i)if(i.repetitions<0)l.unshift((0,a.default)({},i));else if(0==i.repetitions){var d=p(l,o,s),f=(0,r.default)(d,2);i=f[0],o=f[1]}else i.repetitions>=2&&(i.repetitions-=1,l.unshift((0,a.default)({},i)));var _=i.examples_only||!1,h=Object.keys(i).reduce(function(e,t){return e+t+": "+i[t]+"\n"},"");t({updateContext:{EXAMPLES_ONLY:_,agent_params:o,problem_iterator:l,prob_obj:i,problem_description:h}})}else t(null)}else t(null)})}function g(e,t){return e.tutor.loadProblem(e)}function m(e,t){return null==t.data}function y(e,t){console.log("START TRAINING INTERACTION");var n=e.app,i={agent_id:e.agent_id,interactive:e.interactive,free_author:e.free_author},r=e.interactions_sm.withContext((0,a.default)({},e.interactions_sm.context,i)),s=(0,o.interpret)(r);e.app.interactions_service=s,s.onTransition(n.onInteractionTransition),s.start()}function E(e,t){var n=e.network_layer;console.log("ITS ALL DONE!"),n.kill_this("\n TRAINING FINISHED SUCCESSFULLY! \n","info")}var T=(0,o.assign)({interactions_sm:function(e,t){var n=(0,a.default)({},{app:e.app,interactive:e.interactive,free_author:e.free_author,tutor_mode:e.tutor_mode},t.data);return console.log("assignInteractionSM",n),(0,l.build_interactions_sm)(n.app,n.interactive,n.free_author,n.tutor_mode)}})},187:function(e,t,n){var i=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(41)),a=i(n(12)),o=i(n(13)),s=i(n(188)),l=i(n(191)),u=i(n(70));function c(e,t){return"matches"==e?void 0:t}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,l.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _=function(){var e=(0,l.default)(s.default.mark(function e(t,n){var i,r,a,o,l=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=l.length>2&&void 0!==l[2]?l[2]:3,r=l.length>3&&void 0!==l[3]?l[3]:100,a=!(l.length>4&&void 0!==l[4])||l[4],o=0;case 4:if(!(o<i)){e.next=23;break}return e.prev=5,e.next=8,fetch(t,n);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(5),console.log("AL ERROR Retrying",e.t0),!(o+1===i)){e.next=17;break}throw e.t0;case 17:return console.log("waiting",a?r*Math.pow(2,o):r),e.next=20,d(a?r*Math.pow(2,o):r);case 20:o++,e.next=4;break;case 23:case"end":return e.stop()}},e,null,[[5,11]])}));return function(t,n){return e.apply(this,arguments)}}(),p={Accept:"application/json","Content-Type":"application/json"},h=function(){function e(t,n){(0,a.default)(this,e),this.AL_URL=t,this.HOST_URL=n,this.request_history=[],(0,u.default)(this)}return(0,o.default)(e,[{key:"createAgent",value:function(e,t){var n={name:e.agent_name,agent_type:e.agent_type,project_id:e.project_id};return n=(0,r.default)({},e.other_agent_data,n),console.log(this.AL_URL+"/create/"),this.request_history=[],_(this.AL_URL+"/create/",{method:"POST",headers:p,body:JSON.stringify(n)},6).then(function(e){return e.json()})}},{key:"sendFeedback",value:function(e,t){console.log("sendFeedback"),null===e.staged_SAI&&console.error("cannot give feedback on no action.");var n=(0,r.default)({},e.staged_SAI,{state:e.state});return e.interactive&&(n.kwargs={add_skill_info:!0}),this.sendTrainingData(n,e.agent_id)}},{key:"sendFeedbackExplicit",value:function(e,t){console.log("sendFeedback EXPLICIT");e.agent_id;var n=e.state,i=e.skill_applications,r=e.feedback_map,a=[],o=[];for(var s in r){var l=i[s];a.push({rhs_id:l.rhs_id,mapping:l.mapping});var u="correct"==r[s].toLowerCase()?1:-1;o.push(u)}var c={state:n,skill_applications:a,rewards:o};return console.log("EXPLICIT DATA",c),e.interactive&&(c.kwargs={add_skill_info:!0}),this.sendTrainingData(c,e.agent_id)}},{key:"sendTrainingData",value:function(e,t){console.log("sendTrainingData");var n=this.AL_URL+"/train/"+t+"/";return _(n,{method:"POST",headers:p,body:JSON.stringify(e,c)}).then(function(e){return e.text()}).then(function(e){try{return JSON.parse(e)}catch(t){return{}}})}},{key:"queryApprentice",value:function(e,t){console.log("queryApprentice");var n={state:e.state};e.interactive&&(n.kwargs={add_skill_info:!0,n:0}),this.request_history.push(n);var i=this.AL_URL+"/request/"+e.agent_id+"/";return _(i,{method:"POST",headers:p,body:JSON.stringify(n)}).then(function(e){return e.json()})}},{key:"checkApprentice",value:function(e,t){console.log("checkApprentice");var n=(0,r.default)({state:e.state},e.staged_SAI),i=this.AL_URL+"/check/"+e.agent_id+"/";return _(i,{method:"POST",headers:p,body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){return+e.reward})}},{key:"term_print",value:function(e){var t={message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default"};return _(this.HOST_URL,{method:"PRINT",headers:p,body:JSON.stringify(t)})}},{key:"kill_this",value:function(e){var t={message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error"};return _(this.HOST_URL,{method:"QUIT",headers:p,body:JSON.stringify(t)})}},{key:"generate_nools",value:function(e,t){var n=this,i=this.AL_URL+"/get_skills/"+e.agent_id+"/",r={states:this.request_history.map(function(e){return e.state})};return _(i,{method:"POST",headers:p,body:JSON.stringify(r,c)}).then(function(e){return e.json()}).then(function(t){console.log("NOOLS DIR: ",e.nools_dir);var i={nools_dir:e.nools_dir,problems:e.start_state_history,skills:t};return fetch(n.HOST_URL,{method:"GEN_NOOLS",headers:p,body:JSON.stringify(i,c)})})}},{key:"generateBehaviorProfile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.data=t.data||{};var n=t.data.requests||this.request_history,i=t.data.out_dir||(e.working_dir||".")+"/bprofiles",r=this.HOST_URL,a=this.AL_URL,o=(new Date-e.agent_start_time)%864e5%36e5/6e4,u={dir:i,elapse_minutes:o.toFixed(1)};return fetch(r,{method:"START_BEHAVIOR_PROFILE",headers:p,body:JSON.stringify(u)}).then(function(){var t=(0,l.default)(s.default.mark(function t(o){var l,u,c,d,f,h,g,m,y,E,T;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l=!0,u=!1,c=void 0,t.prev=3,d=n["function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();case 5:if(l=(f=d.next()).done){t.next=20;break}return h=f.value,g=h.state,m={state:g,kwargs:{add_skill_info:!0,n:-1}},t.next=11,_(a+"/request/"+e.agent_id+"/",{method:"POST",headers:p,body:JSON.stringify(m)}).then(function(e){return e.json()});case 11:return y=t.sent,E=[],"responses"in y&&y.responses.forEach(function(e,t){var n={selection:e.selection,action:e.action,inputs:e.inputs};console.log(e),console.log(e.selection),E.push(n)}),T={state:g,responses:E,dir:i},t.next=17,fetch(r,{method:"APPEND_BEHAVIOR_PROFILE",headers:p,body:JSON.stringify(T)});case 17:l=!0,t.next=5;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(3),u=!0,c=t.t0;case 26:t.prev=26,t.prev=27,l||null==d.return||d.return();case 29:if(t.prev=29,!u){t.next=32;break}throw c;case 32:return t.finish(29);case 33:return t.finish(26);case 34:case"end":return t.stop()}},t,null,[[3,22,26,34],[27,,29,33]])}));return function(e){return t.apply(this,arguments)}}())}}]),e}();t.default=h},89:function(e,t,n){var i=n(52),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(41)),o=r(n(68)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),d=r(n(16)),f=r(n(54)),_=r(n(47)),p=i(n(1)),h=n(36),g=r(n(99)),m=n(100);function y(e,t,n){return e=[e],t.forEach(function(t,i){e=e.map(function(e,r){if("string"==typeof e){var a=e.split(t);if(a.length>1)return o=a,s=p.default.createElement(h.Text,{style:{color:n[i],textShadowRadius:3,textShadowColor:n[i]}},t),(0,_.default)(o).map(function(e,t){return t<o.length-1?[e,s]:[e]}).reduce(function(e,t){return e.concat(t)})}var o,s;return e}).flat()}),e}var E={ButtonPressed:function(e,t){return"Press Button"},UpdateTextField:function(e,t){return e.name||e.how}},T={UpdateTextField:function(e,t){var n=e.mapping["?sel"],i=Object.entries(e.mapping).reduce(function(e,t){return"?sel"!==t[0]&&e.push(t[1]),e},[]);n=n.replace("?ele-","");var r="("+(i=i.map(function(e){return e.replace("?ele-","")})).join(", ")+"): "+n+"->"+(e.inputs&&e.inputs.value);return r=y(r,[n].concat(i),t)},ButtonPressed:function(e,t){return"Press: "+e.mapping["?sel"].replace("?ele-","")}},v=function(e){function t(e){var n;(0,s.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this,e))).s_skill_set=n.structure_skills(e.skill_set);var i=n.starting_selection();return n.state={selected_skill:i,selected_match:i,feedback_map:{},s_skill_set:{"":[]}},n.handleClickSkillItem=n.handleClickSkillItem.bind((0,f.default)((0,f.default)(n))),n.handleToggleFeedbackButton=n.handleToggleFeedbackButton.bind((0,f.default)((0,f.default)(n))),n}return(0,d.default)(t,e),(0,l.default)(t,[{key:"starting_selection",value:function(){if("first"==this.props.initial_select){var e=Object.keys(this.s_skill_set)[0];return null==e?null:this.s_skill_set[e][0]}}},{key:"structure_skills",value:function(e){var t={},n=0,i=function(){var i={};for(a in e[r])(o=e[r][a]).how in i||(i[o.how]=o,i[o.how].matches=[]),o._id=n++,i[o.how].matches.push(o),t[r]=Object.keys(i).map(function(e,t){return i[e]})};for(var r in e){var a,o;i()}return t}},{key:"selectSkill",value:function(e,t){t||(t=e),this.setState({selected_skill:e,selected_match:t})}},{key:"daisyChain",value:function(e,t,n){return function(i){e(i,t,n)}}},{key:"handleClickSkillItem",value:function(e,t,n){var i=(0,o.default)(t,2),r=i[0],a=i[1];this.selectSkill(r,a),this.props.select_callback&&this.props.interactions_service.send({type:"STAGE_SAI",data:a||r}),n&&n(t)}},{key:"handleToggleFeedbackButton",value:function(e,t){var n=(0,o.default)(t,3),i=n[0],r=n[1],a=n[2];this.props.interactions_service.send({type:"TOGGLE_FEEDBACK",skill:i,match:r,label:a})}},{key:"updateFeedbackMap",value:function(e){this.setState({feedback_map:e}),console.log(e)}},{key:"queuedSkillApplicationFeedback",value:function(){var e=(0,a.default)({},this.state.feedback_map);for(var t in e)e[t]="correct"===e[t]?1:-1;return e}},{key:"componentDidUpdate",value:function(e,t){if(!m(e.skill_set,this.props.skill_set)){var n=this.structure_skills(this.props.skill_set);this.setState({feedback_map:{},s_skill_set:n});var i=Object.keys(n);if(i.length>0){var r=n[i[0]][0];this.setState({selected_skill:r,selected_match:r})}else this.setState({selected_skill:null,selected_match:null})}}},{key:"render",value:function(){var e=this;return p.default.createElement(h.View,{style:b.content},p.default.createElement(h.View,{style:w.skill_list},p.default.createElement(h.ScrollView,null,Object.keys(this.state.s_skill_set).map(function(t,n){var i=p.default.createElement(h.TouchableHighlight,{underlayColor:"#fff"},p.default.createElement(h.Text,{style:w.sectionHeader},t)),r=e.state.s_skill_set[t].map(function(t,n){var i=e.state.selected_skill&&e.state.selected_skill._id===t._id,r=(E[t.action]||E.UpdateTextField)(t,e.props.where_colors),a=p.default.createElement(h.TouchableHighlight,{underlayColor:"#f1f1f1",onPress:e.daisyChain(e.handleClickSkillItem,[t],t.callback)},p.default.createElement(h.Text,{style:[w.item,i&&w.selected_skill],backgroundColor:"#ff00ffff"},r)),o=[];return"matches"in t&&(o=t.matches.map(function(n,r){if("mapping"in n){var a=e.state.selected_match&&e.state.selected_match._id===n._id,o=(T[n.action]||T.UpdateTextField)(n,e.props.where_colors),s="correct"===e.state.feedback_map[n._id],l="incorrect"===e.state.feedback_map[n._id];return p.default.createElement(h.View,{style:w.match_container},p.default.createElement(h.TouchableHighlight,{underlayColor:"#919191",onPress:e.daisyChain(e.handleToggleFeedbackButton,[t,n,"correct"])},p.default.createElement(h.Text,{style:[w.feedback_button,s&&w.correct_selected]},String.fromCharCode(10004))),p.default.createElement(h.TouchableHighlight,{underlayColor:"#919191",onPress:e.daisyChain(e.handleToggleFeedbackButton,[t,n,"incorrect"])},p.default.createElement(h.Text,{style:[w.feedback_button,l&&w.incorrect_selected]},String.fromCharCode(10006))),p.default.createElement(h.TouchableHighlight,{underlayColor:"#919191",style:{flex:1},onPress:e.daisyChain(e.handleClickSkillItem,[t,n],n.callback)},p.default.createElement(h.Text,{style:[w.match,i&&a&&w.selected_match]},o)))}return null})),o=o.filter(function(e){return null!=e}),[a].concat(o)});return[i].concat(r)}))),p.default.createElement(h.ScrollView,{style:w.skill_info,showsVerticalScrollIndicator:!0},p.default.createElement(g.default,{title:"How",collapsedHeight:this.props.collapsedHeight.how},p.default.createElement(h.Text,null,this.state.selected_skill&&this.state.selected_skill.how)),p.default.createElement(g.default,{title:"Where",collapsedHeight:this.props.collapsedHeight.where},p.default.createElement(h.Text,null,this.state.selected_skill&&JSON.stringify(this.state.selected_skill.where,null,2))),p.default.createElement(g.default,{title:"When",collapsedHeight:this.props.collapsedHeight.when},p.default.createElement(h.Text,null,this.state.selected_skill&&this.state.selected_skill.when)),p.default.createElement(g.default,{title:"Which",collapsedHeight:this.props.collapsedHeight.which},p.default.createElement(h.Text,null,this.state.selected_skill&&this.state.selected_skill.which))))}}]),t}(p.Component),b=h.StyleSheet.create({content:{flex:1,flexDirection:"row",backgroundColor:"#F5FCFF",borderRadius:4,borderWidth:.5,borderColor:"#d6d7da"}}),w=h.StyleSheet.create({skill_list:{flexBasis:250,paddingTop:10},skill_info:{flex:1,paddingTop:10},sectionHeader:{flexWrap:"wrap",paddingTop:6,paddingLeft:10,paddingRight:10,paddingBottom:2,fontSize:15,fontWeight:"bold",backgroundColor:"'rgba(247,247,247,1.0)'"},selected_skill:{backgroundColor:"#93e4ec"},item:{flexWrap:"wrap",padding:4,paddingLeft:6,fontSize:16,borderBottomWidth:1,borderColor:"gray",backgroundColor:"'rgba(247,0,0,0.0)'"},feedback_button:{fontSize:20,width:27,textAlign:"center",borderWidth:.1,borderColor:"lightgray"},incorrect_selected:{backgroundColor:"red"},correct_selected:{backgroundColor:"limegreen"},match_container:{display:"flex",flexDirection:"row",borderBottomWidth:1,borderColor:"gray"},match:{flex:1,flexWrap:"wrap",padding:3,textIndent:5,fontSize:15,backgroundColor:"'rgba(252,252,252,1.0)'"},selected_match:{backgroundColor:"#b3e8ff"}});v.defaultProps={collapsedHeight:{how:40,where:90,when:90,which:40},where_colors:["darkorchid","#ff884d","#52d0e0","#feb201","#e44161","#ed3eea","#2f85ee","#562ac6","#cc24cc"],select_callback:function(){}};var S=v;t.default=S},99:function(e,t,n){var i=n(52),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(12)),o=r(n(13)),s=r(n(14)),l=r(n(15)),u=r(n(16)),c=i(n(1)),d=n(36),f=function(e){function t(e){var i;return(0,a.default)(this,t),(i=(0,s.default)(this,(0,l.default)(t).call(this,e))).icons={up:n(164),down:n(165)},i.state={title:e.title,expanded:!1,expandable:!0,animation:new d.Animated.Value(e.collapsedHeight)},i}return(0,u.default)(t,e),(0,o.default)(t,[{key:"_setMaxHeight",value:function(e){this.setState({maxHeight:e.nativeEvent.layout.height,expandable:e.nativeEvent.layout.height>this.props.collapsedHeight})}},{key:"_setMinHeight",value:function(e){this.setState({minHeight:e.nativeEvent.layout.height})}},{key:"toggle",value:function(){var e=Math.max(this.state.maxHeight+this.state.minHeight,this.props.collapsedHeight),t=Math.max(this.state.minHeight,this.props.collapsedHeight),n=this.state.expanded?e:t,i=this.state.expanded?t:e;this.setState({expanded:!this.state.expanded}),this.state.animation.setValue(n),d.Animated.timing(this.state.animation,{toValue:i,duration:50}).start()}},{key:"render",value:function(){var e=this.icons.down;return this.state.expanded&&(e=this.icons.up),c.default.createElement(d.Animated.View,{style:[_.container,{height:this.state.animation}]},c.default.createElement(d.TouchableHighlight,{underlayColor:"#f1f1f1",onLayout:this._setMinHeight.bind(this),onPress:this.state.expandable?this.toggle.bind(this):null},c.default.createElement(d.View,{style:_.titleContainer},c.default.createElement(d.Text,{style:_.title}," ",this.props.title," "),this.state.expandable&&c.default.createElement(d.Image,{style:_.buttonImage,source:e}))),c.default.createElement(d.View,{style:_.body,onLayout:this._setMaxHeight.bind(this)},this.props.children))}}]),t}(c.Component),_=d.StyleSheet.create({container:{backgroundColor:"#fff",margin:2,overflow:"hidden"},titleContainer:{flexDirection:"row"},title:{flex:1,padding:2,color:"#2a2f43",fontWeight:"bold"},button:{},buttonImage:{width:30,height:25},body:{padding:5,paddingTop:0,paddingBottom:20}}),p=f;t.default=p}},[[124,1,2]]]);
//# sourceMappingURL=main.a7b29db1.chunk.js.map